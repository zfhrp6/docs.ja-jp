---
title: "構造化ナビゲーションの概要"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- structured navigation [WPF]
ms.assetid: 025d30ef-fec5-436d-ad7a-5d5483331c26
caps.latest.revision: 
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: f9d20fb5b16fbf44bdf8431ae32afee105af7676
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/22/2017
---
# <a name="structured-navigation-overview"></a><span data-ttu-id="4dea7-102">構造化ナビゲーションの概要</span><span class="sxs-lookup"><span data-stu-id="4dea7-102">Structured Navigation Overview</span></span>
<span data-ttu-id="4dea7-103">コンテンツでホストできますが、 [!INCLUDE[TLA#tla_xbap](../../../../includes/tlasharptla-xbap-md.md)]、 <xref:System.Windows.Controls.Frame>、または<xref:System.Windows.Navigation.NavigationWindow>はパックによって識別できるページで構成されて[!INCLUDE[TLA#tla_uri#plural](../../../../includes/tlasharptla-urisharpplural-md.md)]とハイパーリンクでに移動します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-103">Content that can be hosted by an [!INCLUDE[TLA#tla_xbap](../../../../includes/tlasharptla-xbap-md.md)], a <xref:System.Windows.Controls.Frame>, or a <xref:System.Windows.Navigation.NavigationWindow> is composed of pages that can be identified by pack [!INCLUDE[TLA#tla_uri#plural](../../../../includes/tlasharptla-urisharpplural-md.md)] and navigated to by hyperlinks.</span></span> <span data-ttu-id="4dea7-104">ページの構造、およびハイパーリンクで定義される移動方法を、ナビゲーション トポロジと呼びます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-104">The structure of pages and the ways in which they can be navigated, as defined by hyperlinks, is known as a navigation topology.</span></span> <span data-ttu-id="4dea7-105">このトポロジはさまざまな種類のアプリケーションに対応しますが、特にドキュメント間を移動するアプリケーションに適しています。</span><span class="sxs-lookup"><span data-stu-id="4dea7-105">Such a topology suits a variety of application types, particularly those that navigate through documents.</span></span> <span data-ttu-id="4dea7-106">このようなアプリケーションでは、互いのページの情報を必要とせずに、ユーザーはページ間を移動できます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-106">For such applications, the user can navigate from one page to another page without either page needing to know anything about the other.</span></span>  
  
 <span data-ttu-id="4dea7-107">ただし、アプリケーションによっては、移動のタイミングを理解している必要があるページを使用します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-107">However, other types of applications have pages that do need to know when they have been navigated between.</span></span> <span data-ttu-id="4dea7-108">たとえば、組織内のすべての従業員を一覧するページ ([従業員の一覧] ページ) を使用する人事アプリケーションがあるものとします。</span><span class="sxs-lookup"><span data-stu-id="4dea7-108">For example, consider a human resources application that has one page to list all the employees in an organization—the "List Employees" page.</span></span> <span data-ttu-id="4dea7-109">このページでは、ハイパーリンクをクリックすることによって、新しい従業員を追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-109">This page could also allow users to add a new employee by clicking a hyperlink.</span></span> <span data-ttu-id="4dea7-110">クリックすると、[従業員の追加] ページに移動して新しい従業員の詳細情報を収集します。次に、それを [従業員の一覧] ページに返して、新しい従業員を作成し、一覧を更新します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-110">When clicked, the page navigates to an "Add an Employee" page to gather the new employee's details and return them to the "List Employees" page to create the new employee and update the list.</span></span> <span data-ttu-id="4dea7-111">このスタイルのナビゲーションは、構造化プログラミングと呼ばれる、処理を実行して値を返すメソッドの呼び出しに似ています。</span><span class="sxs-lookup"><span data-stu-id="4dea7-111">This style of navigation is similar to calling a method to perform some processing and return a value, which is known as structured programming.</span></span> <span data-ttu-id="4dea7-112">そのため、このスタイルのナビゲーションを、*構造化ナビゲーション*と呼びます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-112">As such, this style of navigation is known as *structured navigation*.</span></span>  
  
 <span data-ttu-id="4dea7-113"><xref:System.Windows.Controls.Page>クラスは、構造化されたナビゲーションのサポートを実装していません。</span><span class="sxs-lookup"><span data-stu-id="4dea7-113">The <xref:System.Windows.Controls.Page> class doesn't implement support for structured navigation.</span></span> <span data-ttu-id="4dea7-114">代わりに、<xref:System.Windows.Navigation.PageFunction%601>クラスから派生<xref:System.Windows.Controls.Page>および構造化されたナビゲーションのために必要な基本的な構成要素を拡張します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-114">Instead, the <xref:System.Windows.Navigation.PageFunction%601> class derives from <xref:System.Windows.Controls.Page> and extends it with the basic constructs required for structured navigation.</span></span> <span data-ttu-id="4dea7-115">このトピックは、構造化ナビゲーションを使用して確立する方法を示しています。<xref:System.Windows.Navigation.PageFunction%601>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-115">This topic shows how to establish structured navigation using <xref:System.Windows.Navigation.PageFunction%601>.</span></span>  
  
 
  
<a name="Structured_Navigation"></a>   
## <a name="structured-navigation"></a><span data-ttu-id="4dea7-116">構造化ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="4dea7-116">Structured Navigation</span></span>  
 <span data-ttu-id="4dea7-117">構造化ナビゲーションで、あるページが別のページを呼び出す場合、以下の一部またはすべての動作が必要です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-117">When one page calls another page in a structured navigation, some or all of the following behaviors are required:</span></span>  
  
-   <span data-ttu-id="4dea7-118">呼び出し元ページが、必要に応じてパラメーターを渡して、呼び出されたページに移動します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-118">The calling page navigates to the called page, optionally passing parameters required by the called page.</span></span>  
  
-   <span data-ttu-id="4dea7-119">ユーザーが呼び出し元ページの使用を終了すると、呼び出されたページは呼び出し元ページに戻ります。このとき、次の動作が行われることがあります。</span><span class="sxs-lookup"><span data-stu-id="4dea7-119">The called page, when a user has completed using the calling page, returns specifically to the calling page, optionally:</span></span>  
  
    -   <span data-ttu-id="4dea7-120">呼び出し元ページの終了方法 (ユーザーが [OK] または [キャンセル] をクリックしたかどうかなど) を示す状態情報を返します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-120">Returning state information that describes how the calling page was completed (for example, whether a user pressed an OK button or a Cancel button).</span></span>  
  
    -   <span data-ttu-id="4dea7-121">ユーザーから収集したデータ (新しい従業員の詳細など) を返します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-121">Returning that data that was collected from the user (for example, new employee details).</span></span>  
  
-   <span data-ttu-id="4dea7-122">呼び出し元ページが、呼び出されたページに戻ると、呼び出されたページはナビゲーション履歴から削除されて、呼び出されたページのインスタンスが他のインスタンスから分離されます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-122">When the calling page returns to the called page, the called page is removed from navigation history to isolate one instance of a called page from another.</span></span>  
  
 <span data-ttu-id="4dea7-123">これらの動作を次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-123">These behaviors are illustrated by the following figure.</span></span>  
  
 <span data-ttu-id="4dea7-124">![呼び出し元ページと呼び出し先ページの間のフロー](../../../../docs/framework/wpf/app-development/media/structurednavigationoverviewfigure1.png "StructuredNavigationOverviewFigure1")</span><span class="sxs-lookup"><span data-stu-id="4dea7-124">![Flow between calling page and called page](../../../../docs/framework/wpf/app-development/media/structurednavigationoverviewfigure1.png "StructuredNavigationOverviewFigure1")</span></span>  
  
 <span data-ttu-id="4dea7-125">使用してこれらの動作を実装することができます、<xref:System.Windows.Navigation.PageFunction%601>として呼び出されるページ。</span><span class="sxs-lookup"><span data-stu-id="4dea7-125">You can implement these behaviors by using a <xref:System.Windows.Navigation.PageFunction%601> as the called page.</span></span>  
  
<a name="Structured_Navigation_with_PageFunction"></a>   
## <a name="structured-navigation-with-pagefunction"></a><span data-ttu-id="4dea7-126">PageFunction を使用した構造化ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="4dea7-126">Structured Navigation with PageFunction</span></span>  
 <span data-ttu-id="4dea7-127">このトピックは、1 つに関連する構造化されたナビゲーションの基本的なメカニズムを実装する方法を示します<xref:System.Windows.Navigation.PageFunction%601>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-127">This topic shows how to implement the basic mechanics of structured navigation involving a single <xref:System.Windows.Navigation.PageFunction%601>.</span></span> <span data-ttu-id="4dea7-128">このサンプルでは、<xref:System.Windows.Controls.Page>呼び出し、<xref:System.Windows.Navigation.PageFunction%601>を取得する、<xref:System.String>し、ユーザーからの値を返します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-128">In this sample, a <xref:System.Windows.Controls.Page> calls a <xref:System.Windows.Navigation.PageFunction%601> to get a <xref:System.String> value from the user and return it.</span></span>  
  
### <a name="creating-a-calling-page"></a><span data-ttu-id="4dea7-129">呼び出し元ページを作成する</span><span class="sxs-lookup"><span data-stu-id="4dea7-129">Creating a Calling Page</span></span>  
 <span data-ttu-id="4dea7-130">呼び出すページ、<xref:System.Windows.Navigation.PageFunction%601>のいずれか、<xref:System.Windows.Controls.Page>または<xref:System.Windows.Navigation.PageFunction%601>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-130">The page that calls a <xref:System.Windows.Navigation.PageFunction%601> can be either a <xref:System.Windows.Controls.Page> or a <xref:System.Windows.Navigation.PageFunction%601>.</span></span> <span data-ttu-id="4dea7-131">この例では、<xref:System.Windows.Controls.Page>次のコードに示すように、します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-131">In this example, it is a <xref:System.Windows.Controls.Page>, as shown in the following code.</span></span>  
  
 [!code-xaml[StructuredNavigationSample#CallingPageDefaultMARKUP1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml#callingpagedefaultmarkup1)]  
[!code-xaml[StructuredNavigationSample#CallingPageDefaultMARKUP2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml#callingpagedefaultmarkup2)]  
  
 [!code-csharp[StructuredNavigationSample#CallingPageDefaultCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#callingpagedefaultcodebehind1)]
 [!code-vb[StructuredNavigationSample#CallingPageDefaultCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#callingpagedefaultcodebehind1)]  
[!code-csharp[StructuredNavigationSample#CallingPageDefaultCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#callingpagedefaultcodebehind2)]
[!code-vb[StructuredNavigationSample#CallingPageDefaultCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#callingpagedefaultcodebehind2)]  
[!code-csharp[StructuredNavigationSample#CallingPageDefaultCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#callingpagedefaultcodebehind3)]
[!code-vb[StructuredNavigationSample#CallingPageDefaultCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#callingpagedefaultcodebehind3)]  
  
### <a name="creating-a-page-function-to-call"></a><span data-ttu-id="4dea7-132">呼び出すページ関数を作成する</span><span class="sxs-lookup"><span data-stu-id="4dea7-132">Creating a Page Function to Call</span></span>  
 <span data-ttu-id="4dea7-133">呼び出し元のページが呼び出されるページを使用して収集して、ユーザーからデータを返すため<xref:System.Windows.Navigation.PageFunction%601>呼び出されるページから返される値の型を指定する型引数を持つジェネリックのクラスとして実装されます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-133">Because the calling page can use the called page to collect and return data from the user, <xref:System.Windows.Navigation.PageFunction%601> is implemented as a generic class whose type argument specifies the type of the value that the called page will return.</span></span> <span data-ttu-id="4dea7-134">次のコードが呼び出されるは、最初の実装を示しています ページを使用して、 <xref:System.Windows.Navigation.PageFunction%601>、返された、<xref:System.String>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-134">The following code shows the initial implementation of the called page, using a <xref:System.Windows.Navigation.PageFunction%601>, which returns a <xref:System.String>.</span></span>  
  
 [!code-xaml[StructuredNavigationSample#CalledPageFunctionMARKUP](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml#calledpagefunctionmarkup)]  
  
 [!code-csharp[StructuredNavigationSample#CalledPageFunctionCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#calledpagefunctioncodebehind1)]
 [!code-vb[StructuredNavigationSample#CalledPageFunctionCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#calledpagefunctioncodebehind1)]  
[!code-csharp[StructuredNavigationSample#CalledPageFunctionCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#calledpagefunctioncodebehind2)]
[!code-vb[StructuredNavigationSample#CalledPageFunctionCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#calledpagefunctioncodebehind2)]  
  
 <span data-ttu-id="4dea7-135">宣言、<xref:System.Windows.Navigation.PageFunction%601>の宣言に似ていますが、<xref:System.Windows.Controls.Page>に型引数を追加します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-135">The declaration of a <xref:System.Windows.Navigation.PageFunction%601> is similar to the declaration of a <xref:System.Windows.Controls.Page> with the addition of the type arguments.</span></span> <span data-ttu-id="4dea7-136">コード例に示されているように、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] マークアップ (`x:TypeArguments` 属性を使用) と分離コード (標準のジェネリック型引数構文を使用) の両方で型引数が指定されています。</span><span class="sxs-lookup"><span data-stu-id="4dea7-136">As you can see from the code example, the type arguments are specified in both [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] markup, using the `x:TypeArguments` attribute, and code-behind, using standard generic type argument syntax.</span></span>  
  
 <span data-ttu-id="4dea7-137">型引数として [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] クラスのみを使用する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="4dea7-137">You don't have to use only [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] classes as type arguments.</span></span> <span data-ttu-id="4dea7-138">A<xref:System.Windows.Navigation.PageFunction%601>抽象化して、カスタム データ型としてドメイン固有のデータを収集するために呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-138">A <xref:System.Windows.Navigation.PageFunction%601> could be called to gather domain-specific data that is abstracted as a custom type.</span></span> <span data-ttu-id="4dea7-139">次のコードは、カスタム型に対して、型引数として使用する方法を示します、<xref:System.Windows.Navigation.PageFunction%601>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-139">The following code shows how to use a custom type as a type argument for a <xref:System.Windows.Navigation.PageFunction%601>.</span></span>  
  
 [!code-csharp[CustomTypePageFunctionSnippets#CustomTypeCODE1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomType.cs#customtypecode1)]
 [!code-vb[CustomTypePageFunctionSnippets#CustomTypeCODE1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/VisualBasic/CustomType.vb#customtypecode1)]  
[!code-csharp[CustomTypePageFunctionSnippets#CustomTypeCODE2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomType.cs#customtypecode2)]
[!code-vb[CustomTypePageFunctionSnippets#CustomTypeCODE2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/VisualBasic/CustomType.vb#customtypecode2)]  
  
 [!code-xaml[CustomTypePageFunctionSnippets#CustomTypePageFunctionMARKUP1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomTypePageFunction.xaml#customtypepagefunctionmarkup1)]  
[!code-xaml[CustomTypePageFunctionSnippets#CustomTypePageFunctionMARKUP2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomTypePageFunction.xaml#customtypepagefunctionmarkup2)]  
  
 [!code-csharp[CustomTypePageFunctionSnippets#CustomTypePageFunctionCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomTypePageFunction.xaml.cs#customtypepagefunctioncodebehind1)]
 [!code-vb[CustomTypePageFunctionSnippets#CustomTypePageFunctionCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/VisualBasic/CustomTypePageFunction.xaml.vb#customtypepagefunctioncodebehind1)]  
[!code-csharp[CustomTypePageFunctionSnippets#CustomTypePageFunctionCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomTypePageFunction.xaml.cs#customtypepagefunctioncodebehind2)]
[!code-vb[CustomTypePageFunctionSnippets#CustomTypePageFunctionCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/VisualBasic/CustomTypePageFunction.xaml.vb#customtypepagefunctioncodebehind2)]  
  
 <span data-ttu-id="4dea7-140">型引数、<xref:System.Windows.Navigation.PageFunction%601>呼び出し元のページと呼び出し先 ページで、次のセクションで説明する間の通信の基盤を提供します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-140">The type arguments for the <xref:System.Windows.Navigation.PageFunction%601> provide the foundation for the communication between a calling page and the called page, which are discussed in the following sections.</span></span>  
  
 <span data-ttu-id="4dea7-141">おわかりの宣言で識別される型と、<xref:System.Windows.Navigation.PageFunction%601>からデータを返すときに重要な役割を果たす、<xref:System.Windows.Navigation.PageFunction%601>呼び出し元のページにします。</span><span class="sxs-lookup"><span data-stu-id="4dea7-141">As you'll see, the type that is identified with the declaration of a <xref:System.Windows.Navigation.PageFunction%601> plays an important role in returning data from a <xref:System.Windows.Navigation.PageFunction%601> to the calling page.</span></span>  
  
### <a name="calling-a-pagefunction-and-passing-parameters"></a><span data-ttu-id="4dea7-142">PageFunction を呼び出してパラメーターを渡す</span><span class="sxs-lookup"><span data-stu-id="4dea7-142">Calling a PageFunction and Passing Parameters</span></span>  
 <span data-ttu-id="4dea7-143">ページを呼び出すには、呼び出し元のページする必要があります呼び出されるページのインスタンスを作成しを使用して移動、<xref:System.Windows.Navigation.NavigationService.Navigate%2A>メソッドです。</span><span class="sxs-lookup"><span data-stu-id="4dea7-143">To call a page, the calling page must instantiate the called page and navigate to it using the <xref:System.Windows.Navigation.NavigationService.Navigate%2A> method.</span></span> <span data-ttu-id="4dea7-144">これにより、呼び出し元ページは、呼び出されるページで収集されるデータの既定値など、呼び出されるページに初期データを渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-144">This allows the calling page to pass initial data to the called page, such as default values for the data being gathered by the called page.</span></span>  
  
 <span data-ttu-id="4dea7-145">既定以外のコンストラクターを使用して呼び出されたページが、呼び出し元ページからパラメーターを受け取るコードを次に示します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-145">The following code shows the called page with a non-default constructor to accept parameters from the calling page.</span></span>  
  
 [!code-csharp[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#acceptsinitialdatacodebehind1)]
 [!code-vb[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#acceptsinitialdatacodebehind1)]  
[!code-csharp[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#acceptsinitialdatacodebehind2)]
[!code-vb[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#acceptsinitialdatacodebehind2)]  
[!code-csharp[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#acceptsinitialdatacodebehind3)]
[!code-vb[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#acceptsinitialdatacodebehind3)]  
[!code-csharp[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#acceptsinitialdatacodebehind4)]
[!code-vb[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND4](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#acceptsinitialdatacodebehind4)]  
  
 <span data-ttu-id="4dea7-146">次のコードは呼び出し元のページ処理、<xref:System.Windows.Documents.Hyperlink.Click>のイベント、<xref:System.Windows.Documents.Hyperlink>呼び出されるページをインスタンス化し、最初の文字列値を渡します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-146">The following code shows the calling page handling the <xref:System.Windows.Documents.Hyperlink.Click> event of the <xref:System.Windows.Documents.Hyperlink> to instantiate the called page and pass it an initial string value.</span></span>  
  
 [!code-xaml[StructuredNavigationSample#PassingDataMARKUP2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml#passingdatamarkup2)]  
[!code-csharp[StructuredNavigationSample#PassingDataCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#passingdatacodebehind1)]
[!code-vb[StructuredNavigationSample#PassingDataCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#passingdatacodebehind1)]  
[!code-csharp[StructuredNavigationSample#PassingDataCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#passingdatacodebehind2)]
[!code-vb[StructuredNavigationSample#PassingDataCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#passingdatacodebehind2)]  
[!code-csharp[StructuredNavigationSample#PassingDataCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#passingdatacodebehind3)]
[!code-vb[StructuredNavigationSample#PassingDataCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#passingdatacodebehind3)]  
  
 <span data-ttu-id="4dea7-147">呼び出されるページにパラメーターを渡す必要はありません。</span><span class="sxs-lookup"><span data-stu-id="4dea7-147">You are not required to pass parameters to the called page.</span></span> <span data-ttu-id="4dea7-148">代わりに、以下を実行できます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-148">Instead, you could do the following:</span></span>  
  
-   <span data-ttu-id="4dea7-149">呼び出し元ページの場合:</span><span class="sxs-lookup"><span data-stu-id="4dea7-149">From the calling page:</span></span>  
  
    1.  <span data-ttu-id="4dea7-150">インスタンス化、呼び出された<xref:System.Windows.Navigation.PageFunction%601>既定コンス トラクターを使用します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-150">Instantiate the called <xref:System.Windows.Navigation.PageFunction%601> using the default constructor.</span></span>  
  
    2.  <span data-ttu-id="4dea7-151">内のパラメーターを格納<xref:System.Windows.Application.Properties%2A>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-151">Store the parameters in <xref:System.Windows.Application.Properties%2A>.</span></span>  
  
    3.  <span data-ttu-id="4dea7-152">呼び出したへ移動<xref:System.Windows.Navigation.PageFunction%601>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-152">Navigate to the called <xref:System.Windows.Navigation.PageFunction%601>.</span></span>  
  
-   <span data-ttu-id="4dea7-153">呼び出されるから<xref:System.Windows.Navigation.PageFunction%601>:</span><span class="sxs-lookup"><span data-stu-id="4dea7-153">From the called <xref:System.Windows.Navigation.PageFunction%601>:</span></span>  
  
    -   <span data-ttu-id="4dea7-154">取得しに格納されているパラメーターを使用して<xref:System.Windows.Application.Properties%2A>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-154">Retrieve and use the parameters stored in <xref:System.Windows.Application.Properties%2A>.</span></span>  
  
 <span data-ttu-id="4dea7-155">しかし、この後の説明にもあるように、コードを使用して呼び出されたページをインスタンス化して、そのページに移動して、呼び出されたページから返されるデータを収集する必要が依然としてあります。</span><span class="sxs-lookup"><span data-stu-id="4dea7-155">But, as you'll see shortly, you'll still need use code to instantiate and navigate to the called page to collect the data returned by the called page.</span></span> <span data-ttu-id="4dea7-156">このため、<xref:System.Windows.Navigation.PageFunction%601>に移動するそれ以外のアライブを保持する必要があります、次回、 <xref:System.Windows.Navigation.PageFunction%601>、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]をインスタンス化、<xref:System.Windows.Navigation.PageFunction%601>既定コンス トラクターを使用します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-156">For this reason, the <xref:System.Windows.Navigation.PageFunction%601> needs to be kept alive; otherwise, the next time you navigate to the <xref:System.Windows.Navigation.PageFunction%601>, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] instantiates the <xref:System.Windows.Navigation.PageFunction%601> using the default constructor.</span></span>  
  
 <span data-ttu-id="4dea7-157">ただし、呼び出されたページが戻る前に、呼び出し元ページが取得できるデータを返す必要があります。</span><span class="sxs-lookup"><span data-stu-id="4dea7-157">Before the called page can return, however, it needs to return data that can be retrieved by the calling page.</span></span>  
  
### <a name="returning-task-result-and-task-data-from-a-task-to-a-calling-page"></a><span data-ttu-id="4dea7-158">タスクから呼び出し元ページにタスク結果とタスク データを返す</span><span class="sxs-lookup"><span data-stu-id="4dea7-158">Returning Task Result and Task Data from a Task to a Calling Page</span></span>  
 <span data-ttu-id="4dea7-159">ユーザーが呼び出されたページの使用を終了すると (この例では、[OK] または [キャンセル] をクリックすることで表されます)、呼び出されたページは戻る必要があります。</span><span class="sxs-lookup"><span data-stu-id="4dea7-159">Once the user has finished using the called page, signified in this example by pressing either the OK or Cancel buttons, the called page needs to return.</span></span> <span data-ttu-id="4dea7-160">呼び出し元ページは、呼び出されたページを使用してユーザーからデータを収集したため、呼び出し元ページには 2 種類の情報が必要です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-160">Since the calling page used the called page to collect data from the user, the calling page requires two types of information:</span></span>  
  
1.  <span data-ttu-id="4dea7-161">ユーザーが呼び出されたページをキャンセルしたかどうか (この例では、[OK] と [キャンセル] のどちらをクリックしたかで表されます)。</span><span class="sxs-lookup"><span data-stu-id="4dea7-161">Whether the user canceled the called page (by pressing either the OK button or the Cancel button in this example).</span></span> <span data-ttu-id="4dea7-162">これによって、呼び出し元ページは、ユーザーから収集したデータを処理するかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-162">This allows the calling page to determine whether to process the data that the calling page gathered from the user.</span></span>  
  
2.  <span data-ttu-id="4dea7-163">ユーザーが提供したデータ。</span><span class="sxs-lookup"><span data-stu-id="4dea7-163">The data that was provided by the user.</span></span>  
  
 <span data-ttu-id="4dea7-164">情報を取得する<xref:System.Windows.Navigation.PageFunction%601>を実装する、<xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A>メソッドです。</span><span class="sxs-lookup"><span data-stu-id="4dea7-164">To return information, <xref:System.Windows.Navigation.PageFunction%601> implements the <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> method.</span></span> <span data-ttu-id="4dea7-165">その呼び出し方法を次のコードに示します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-165">The following code shows how to call it.</span></span>  
  
 [!code-csharp[StructuredNavigationSample#ReturnCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#returncodebehind1)]
 [!code-vb[StructuredNavigationSample#ReturnCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#returncodebehind1)]  
[!code-csharp[StructuredNavigationSample#ReturnCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#returncodebehind2)]
[!code-vb[StructuredNavigationSample#ReturnCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#returncodebehind2)]  
  
 <span data-ttu-id="4dea7-166">この例では、ユーザーが [キャンセル] をクリックすると、呼び出し元ページに値 `null` が返されます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-166">In this example, if a user presses the Cancel button, a value of `null` is returned to the calling page.</span></span> <span data-ttu-id="4dea7-167">ユーザーが [OK] をクリックすると、ユーザーによって指定された文字列値が返されます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-167">If the OK button is pressed instead, the string value provided by the user is returned.</span></span> <span data-ttu-id="4dea7-168"><xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A>`protected``virtual`データを返す、呼び出し元のページに呼び出すメソッド。</span><span class="sxs-lookup"><span data-stu-id="4dea7-168"><xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is a `protected``virtual` method that you call to return your data to the calling page.</span></span> <span data-ttu-id="4dea7-169">ジェネリックのインスタンスにパッケージ化する必要があるデータ<xref:System.Windows.Navigation.ReturnEventArgs%601>、型引数の型を指定する、型の値を<xref:System.Windows.Navigation.ReturnEventArgs%601.Result%2A>を返します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-169">Your data needs to be packaged in an instance of the generic <xref:System.Windows.Navigation.ReturnEventArgs%601> type, whose type argument specifies the type of value that <xref:System.Windows.Navigation.ReturnEventArgs%601.Result%2A> returns.</span></span> <span data-ttu-id="4dea7-170">宣言するときに、この方法で、<xref:System.Windows.Navigation.PageFunction%601>特定の型引数を指定して、ことを示すは、<xref:System.Windows.Navigation.PageFunction%601>は型引数で指定されている型のインスタンスを返します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-170">In this way, when you declare a <xref:System.Windows.Navigation.PageFunction%601> with a particular type argument, you are stating that a <xref:System.Windows.Navigation.PageFunction%601> will return an instance of the type that is specified by the type argument.</span></span> <span data-ttu-id="4dea7-171">この例では、型引数と、その結果、戻り値が型で<xref:System.String>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-171">In this example, the type argument and, consequently, the return value is of type <xref:System.String>.</span></span>  
  
 <span data-ttu-id="4dea7-172">ときに<xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A>が呼び出されると、呼び出し元のページは何らかの戻り値を受け取る、<xref:System.Windows.Navigation.PageFunction%601>です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-172">When <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is called, the calling page needs some way of receiving the return value of the <xref:System.Windows.Navigation.PageFunction%601>.</span></span> <span data-ttu-id="4dea7-173">このため、<xref:System.Windows.Navigation.PageFunction%601>を実装する、<xref:System.Windows.Navigation.PageFunction%601.Return>イベントを処理するページを呼び出すためです。</span><span class="sxs-lookup"><span data-stu-id="4dea7-173">For this reason, <xref:System.Windows.Navigation.PageFunction%601> implements the <xref:System.Windows.Navigation.PageFunction%601.Return> event for calling pages to handle.</span></span> <span data-ttu-id="4dea7-174">ときに<xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A>が呼び出されると、<xref:System.Windows.Navigation.PageFunction%601.Return>が発生すると、呼び出し元のページに登録できるように<xref:System.Windows.Navigation.PageFunction%601.Return>通知を受信します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-174">When <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is called, <xref:System.Windows.Navigation.PageFunction%601.Return> is raised, so the calling page can register with <xref:System.Windows.Navigation.PageFunction%601.Return> to receive the notification.</span></span>  
  
 [!code-csharp[StructuredNavigationSample#ProcessResultCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#processresultcodebehind1)]
 [!code-vb[StructuredNavigationSample#ProcessResultCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#processresultcodebehind1)]  
[!code-csharp[StructuredNavigationSample#ProcessResultCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#processresultcodebehind2)]
[!code-vb[StructuredNavigationSample#ProcessResultCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#processresultcodebehind2)]  
  
### <a name="removing-task-pages-when-a-task-completes"></a><span data-ttu-id="4dea7-175">タスク完了時にタスク ページを削除する</span><span class="sxs-lookup"><span data-stu-id="4dea7-175">Removing Task Pages When a Task Completes</span></span>  
 <span data-ttu-id="4dea7-176">呼び出されたページが戻り、呼び出されたページをユーザーが取り消さなかった場合、呼び出し元ページでは、ユーザーから提供されたデータだけでなく、呼び出されたページから返されたデータも処理します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-176">When a called page returns, and the user didn't cancel the called page, the calling page will process the data that was provided by the user and also returned from the called page.</span></span> <span data-ttu-id="4dea7-177">このような方法で行われるデータ取得は、通常は分離されたアクティビティです。呼び出されたページが戻ると、呼び出し元ページでは、さらにデータをキャプチャするために、新しい呼び出し元ページを作成し、そこに移動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4dea7-177">Data acquisition in this way is usually an isolated activity; when the called page returns, the calling page needs to create and navigate to a new calling page to capture more data.</span></span>  
  
 <span data-ttu-id="4dea7-178">ただし、呼び出されたページが履歴から削除されない限り、ユーザーは呼び出し元ページの前のインスタンスに戻ることができます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-178">However, unless a called page is removed from the journal, a user will be able to navigate back to a previous instance of the calling page.</span></span> <span data-ttu-id="4dea7-179">かどうか、<xref:System.Windows.Navigation.PageFunction%601>に保持されますが、ジャーナルはによって決定されます、<xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A>プロパティです。</span><span class="sxs-lookup"><span data-stu-id="4dea7-179">Whether a <xref:System.Windows.Navigation.PageFunction%601> is retained in the journal is determined by the <xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A> property.</span></span> <span data-ttu-id="4dea7-180">既定では、ページ関数は、自動的に削除<xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A>ためにと呼ばれます<xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A>に設定されている`true`です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-180">By default, a page function is automatically removed when <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is called because <xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A> is set to `true`.</span></span> <span data-ttu-id="4dea7-181">ナビゲーション履歴の後にページ関数を保持する<xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A>が呼び出されると、設定<xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A>に`false`です。</span><span class="sxs-lookup"><span data-stu-id="4dea7-181">To keep a page function in navigation history after <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is called, set <xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A> to `false`.</span></span>  
  
<a name="Other_Types_of_Structured_Navigation"></a>   
## <a name="other-types-of-structured-navigation"></a><span data-ttu-id="4dea7-182">他の種類の構造化ナビゲーション</span><span class="sxs-lookup"><span data-stu-id="4dea7-182">Other Types of Structured Navigation</span></span>  
 <span data-ttu-id="4dea7-183">このトピックの最も基本的な使用を示しています、  <xref:System.Windows.Navigation.PageFunction%601> /戻り値の呼び出しをサポートするために、ナビゲーションを構造化します。</span><span class="sxs-lookup"><span data-stu-id="4dea7-183">This topic illustrates the most basic use of a <xref:System.Windows.Navigation.PageFunction%601> to support call/return structured navigation.</span></span> <span data-ttu-id="4dea7-184">これに基づいて、より複雑な構造化ナビゲーションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-184">This foundation provides you with the ability to create more complex types of structured navigation.</span></span>  
  
 <span data-ttu-id="4dea7-185">たとえば、呼び出し元ページがユーザーから十分なデータを収集したり、タスクを実行するには、複数のページが必要な場合があります。</span><span class="sxs-lookup"><span data-stu-id="4dea7-185">For example, sometimes multiple pages are required by a calling page to gather enough data from a user or to perform a task.</span></span> <span data-ttu-id="4dea7-186">複数のページを使用する場合、これを "ウィザード" と呼びます。</span><span class="sxs-lookup"><span data-stu-id="4dea7-186">The use of multiple pages is referred to as a "wizard".</span></span>  
  
 <span data-ttu-id="4dea7-187">また、構造化ナビゲーションに基づいて効率的な操作を実行する複雑なナビゲーション トポロジを使用するアプリケーションもあります。</span><span class="sxs-lookup"><span data-stu-id="4dea7-187">In other cases, applications may have complex navigation topologies that depend on structured navigation to operate effectively.</span></span> <span data-ttu-id="4dea7-188">詳細については、「[ナビゲーション トポロジの概要](../../../../docs/framework/wpf/app-development/navigation-topologies-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="4dea7-188">For more information, see [Navigation Topologies Overview](../../../../docs/framework/wpf/app-development/navigation-topologies-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4dea7-189">参照</span><span class="sxs-lookup"><span data-stu-id="4dea7-189">See Also</span></span>  
 <xref:System.Windows.Navigation.PageFunction%601>  
 <xref:System.Windows.Navigation.NavigationService>  
 [<span data-ttu-id="4dea7-190">ナビゲーション トポロジの概要</span><span class="sxs-lookup"><span data-stu-id="4dea7-190">Navigation Topologies Overview</span></span>](../../../../docs/framework/wpf/app-development/navigation-topologies-overview.md)
