---
title: テキストの高度な書式設定
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- formatting [WPF]
- text [WPF]
- typography [WPF], text formatting
ms.assetid: f0a7986e-f5b2-485c-a27d-f8e922022212
ms.openlocfilehash: 59ae3173eaeda6681f76ca28ef060dd963a4e1a9
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/04/2018
ms.locfileid: "33541873"
---
# <a name="advanced-text-formatting"></a><span data-ttu-id="2a97d-102">テキストの高度な書式設定</span><span class="sxs-lookup"><span data-stu-id="2a97d-102">Advanced Text Formatting</span></span>
<span data-ttu-id="2a97d-103">Windows Presentation Foundation (WPF) は、堅牢な一連の[!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)]アプリケーションにテキストを含めるためです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-103">The Windows Presentation Foundation (WPF) provides a robust set of [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] for including text in your application.</span></span> <span data-ttu-id="2a97d-104">レイアウトと[!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)][!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]など<xref:System.Windows.Controls.TextBlock>一般のテキスト表現の要素の使用を最も一般的な提供します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-104">Layout and [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)][!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], such as <xref:System.Windows.Controls.TextBlock>, provide the most common and general use elements for text presentation.</span></span> <span data-ttu-id="2a97d-105">描画[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]など<xref:System.Windows.Media.GlyphRunDrawing>と<xref:System.Windows.Media.FormattedText>図面に書式付きテキストを含めるための手段を提供します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-105">Drawing [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], such as <xref:System.Windows.Media.GlyphRunDrawing> and <xref:System.Windows.Media.FormattedText>, provide a means for including formatted text in drawings.</span></span> <span data-ttu-id="2a97d-106">高度なレベルでは、一番[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]形式設定エンジンは、テキスト ストアの管理、実行テキスト書式管理、および埋め込みオブジェクトの管理などのテキストのプレゼンテーションのすべての側面を制御する、拡張可能なテキストを提供します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-106">At the most advanced level, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] provides an extensible text formatting engine to control every aspect of text presentation, such as text store management, text run formatting management, and embedded object management.</span></span>  
  
 <span data-ttu-id="2a97d-107">このトピックを紹介[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]テキストの書式設定します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-107">This topic provides an introduction to [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] text formatting.</span></span> <span data-ttu-id="2a97d-108">クライアントの実装との使用に焦点を当てています、[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]テキスト形式設定エンジンです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-108">It focuses on client implementation and use of the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] text formatting engine.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2a97d-109">このドキュメント内のすべてのコード例は含まれて、[テキスト書式設定のサンプルの高度な](http://go.microsoft.com/fwlink/?LinkID=159965)します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-109">All code examples within this document can be found in the [Advanced Text Formatting Sample](http://go.microsoft.com/fwlink/?LinkID=159965).</span></span>  
  

  
<a name="prereq"></a>   
## <a name="prerequisites"></a><span data-ttu-id="2a97d-110">必須コンポーネント</span><span class="sxs-lookup"><span data-stu-id="2a97d-110">Prerequisites</span></span>  
 <span data-ttu-id="2a97d-111">このトピックは、上位レベルに慣れていることを前提と[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]のテキスト表現を使用します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-111">This topic assumes that you are familiar with the higher level [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] used for text presentation.</span></span> <span data-ttu-id="2a97d-112">ほとんどのユーザー シナリオでは、高度なテキストの書式設定も必要ありませんが[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]このトピックで説明します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-112">Most user scenarios will not require the advanced text formatting [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] discussed in this topic.</span></span> <span data-ttu-id="2a97d-113">概要については、さまざまなテキスト[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]を参照してください[WPF のドキュメントの](../../../../docs/framework/wpf/advanced/documents-in-wpf.md)します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-113">For an introduction to the different text [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], see [Documents in WPF](../../../../docs/framework/wpf/advanced/documents-in-wpf.md).</span></span>  
  
<a name="section1"></a>   
## <a name="advanced-text-formatting"></a><span data-ttu-id="2a97d-114">テキストの高度な書式設定</span><span class="sxs-lookup"><span data-stu-id="2a97d-114">Advanced Text Formatting</span></span>  
 <span data-ttu-id="2a97d-115">テキスト レイアウトと[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]コントロールで[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]アプリケーションに簡単に書式付きテキストを追加することは書式設定のプロパティを提供します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-115">The text layout and [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] controls in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] provide formatting properties that allow you to easily include formatted text in your application.</span></span> <span data-ttu-id="2a97d-116">これらのコントロールでは、テキストの表示を処理するさまざまなプロパティが公開されます。書体、大きさ、色などです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-116">These controls expose a number of properties to handle the presentation of text, which includes its typeface, size, and color.</span></span> <span data-ttu-id="2a97d-117">通常の状況では、これらのコントロールはアプリケーションの大半のテキスト表示を処理できます。</span><span class="sxs-lookup"><span data-stu-id="2a97d-117">Under ordinary circumstances, these controls can handle the majority of text presentation in your application.</span></span> <span data-ttu-id="2a97d-118">しかしながら、一部の高度なシナリオでは、テキスト表示と同様にテキスト保存を制御する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2a97d-118">However, some advanced scenarios require the control of text storage as well as text presentation.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="2a97d-119"> は、その目的のための拡張テキスト書式設定エンジンを提供します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-119"> provides an extensible text formatting engine for this purpose.</span></span>  
  
 <span data-ttu-id="2a97d-120">高度な書式設定機能が検出された[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]エンジン、テキスト ストア、テキスト ランを書式設定とプロパティを書式設定テキストで構成されます。</span><span class="sxs-lookup"><span data-stu-id="2a97d-120">The advanced text formatting features found in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] consist of a text formatting engine, a text store, text runs, and formatting properties.</span></span> <span data-ttu-id="2a97d-121">テキスト形式設定エンジン、<xref:System.Windows.Media.TextFormatting.TextFormatter>プレゼンテーションをするためのテキストの行を作成します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-121">The text formatting engine, <xref:System.Windows.Media.TextFormatting.TextFormatter>, creates lines of text to be used for presentation.</span></span> <span data-ttu-id="2a97d-122">これは行の書式設定プロセスを開始して、テキストのフォーマッタを呼び出すことで実現<xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>です。</span><span class="sxs-lookup"><span data-stu-id="2a97d-122">This is achieved by initiating the line formatting process and calling the text formatter's <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>.</span></span> <span data-ttu-id="2a97d-123">テキスト フォーマッタは、ストアを呼び出すことによって、テキスト ストアからテキスト ランを取得<xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A>メソッドです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-123">The text formatter retrieves text runs from your text store by calling the store's <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method.</span></span> <span data-ttu-id="2a97d-124"><xref:System.Windows.Media.TextFormatting.TextRun>オブジェクトを形成し、<xref:System.Windows.Media.TextFormatting.TextLine>テキスト フォーマッタでオブジェクトを検査または表示するため、アプリケーションを指定します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-124">The <xref:System.Windows.Media.TextFormatting.TextRun> objects are then formed into <xref:System.Windows.Media.TextFormatting.TextLine> objects by the text formatter and given to your application for inspection or display.</span></span>  
  
<a name="section2"></a>   
## <a name="using-the-text-formatter"></a><span data-ttu-id="2a97d-125">テキスト フォーマッタを使用する</span><span class="sxs-lookup"><span data-stu-id="2a97d-125">Using the Text Formatter</span></span>  
 <span data-ttu-id="2a97d-126"><xref:System.Windows.Media.TextFormatting.TextFormatter> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]テキストの書式設定エンジンし、書式設定し、テキストの行の重大なサービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-126"><xref:System.Windows.Media.TextFormatting.TextFormatter> is the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] text formatting engine and provides services for formatting and breaking text lines.</span></span> <span data-ttu-id="2a97d-127">テキスト フォーマッタは、さまざまなテキスト文字書式や段落スタイルを処理し、国際的なテキスト レイアウトに対応しています。</span><span class="sxs-lookup"><span data-stu-id="2a97d-127">The text formatter can handle different text character formats and paragraph styles, and includes support for international text layout.</span></span>  
  
 <span data-ttu-id="2a97d-128">従来のテキストとは異なり[!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)]、<xref:System.Windows.Media.TextFormatting.TextFormatter>コールバック メソッドのセットを使用して、テキスト レイアウト クライアントと対話します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-128">Unlike a traditional text [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)], the <xref:System.Windows.Media.TextFormatting.TextFormatter> interacts with a text layout client through a set of callback methods.</span></span> <span data-ttu-id="2a97d-129">実装でこれらのメソッドを提供するために必要な<xref:System.Windows.Media.TextFormatting.TextSource>クラスです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-129">It requires the client to provide these methods in an implementation of the <xref:System.Windows.Media.TextFormatting.TextSource> class.</span></span> <span data-ttu-id="2a97d-130">次の図は、クライアント アプリケーション間のテキスト レイアウトの相互作用と<xref:System.Windows.Media.TextFormatting.TextFormatter>です。</span><span class="sxs-lookup"><span data-stu-id="2a97d-130">The following diagram illustrates the text layout interaction between the client application and <xref:System.Windows.Media.TextFormatting.TextFormatter>.</span></span>  
  
 <span data-ttu-id="2a97d-131">![テキスト レイアウト クライアントと TextFormatter のダイアグラム](../../../../docs/framework/wpf/advanced/media/textformatter01.png "TextFormatter01")</span><span class="sxs-lookup"><span data-stu-id="2a97d-131">![Diagram of text layout client and TextFormatter](../../../../docs/framework/wpf/advanced/media/textformatter01.png "TextFormatter01")</span></span>  
<span data-ttu-id="2a97d-132">アプリケーションと TextFormatter の間の相互作用</span><span class="sxs-lookup"><span data-stu-id="2a97d-132">Interaction between application and TextFormatter</span></span>  
  
 <span data-ttu-id="2a97d-133">テキスト フォーマッタを使用して、テキスト ストアから書式付きテキスト行を取得するの実装は<xref:System.Windows.Media.TextFormatting.TextSource>します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-133">The text formatter is used to retrieve formatted text lines from the text store, which is an implementation of <xref:System.Windows.Media.TextFormatting.TextSource>.</span></span> <span data-ttu-id="2a97d-134">これを使用してテキスト フォーマッタのインスタンスを作成することで、<xref:System.Windows.Media.TextFormatting.TextFormatter.Create%2A>メソッドです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-134">This is done by first creating an instance of the text formatter by using the <xref:System.Windows.Media.TextFormatting.TextFormatter.Create%2A> method.</span></span> <span data-ttu-id="2a97d-135">このメソッドはテキスト フォーマッタのインスタンスを作成し、行の高さと幅の最大値を設定します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-135">This method creates an instance of the text formatter and sets the maximum line height and width values.</span></span> <span data-ttu-id="2a97d-136">呼び出して行の作成プロセスを開始するテキスト フォーマッタのインスタンスが作成されしだい、<xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>メソッドです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-136">As soon as an instance of the text formatter is created, the line creation process is started by calling the <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> method.</span></span> <span data-ttu-id="2a97d-137"><xref:System.Windows.Media.TextFormatting.TextFormatter> 返信テキストとテキストの実行のための書式設定のパラメーターを取得するテキストのソースにそのフォーム行です。</span><span class="sxs-lookup"><span data-stu-id="2a97d-137"><xref:System.Windows.Media.TextFormatting.TextFormatter> calls back to the text source to retrieve the text and formatting parameters for the runs of text that form a line.</span></span>  
  
 <span data-ttu-id="2a97d-138">次の例は、テキスト ストアを書式設定するプロセスを示しています。</span><span class="sxs-lookup"><span data-stu-id="2a97d-138">In the following example, the process of formatting a text store is shown.</span></span> <span data-ttu-id="2a97d-139"><xref:System.Windows.Media.TextFormatting.TextFormatter>テキスト ストアからテキスト行を取得しに描画テキスト行の書式を設定するオブジェクトが使用される、<xref:System.Windows.Media.DrawingContext>です。</span><span class="sxs-lookup"><span data-stu-id="2a97d-139">The <xref:System.Windows.Media.TextFormatting.TextFormatter> object is used to retrieve text lines from the text store and then format the text line for drawing into the <xref:System.Windows.Media.DrawingContext>.</span></span>  
  
 [!code-csharp[TextFormatterExample#100](../../../../samples/snippets/csharp/VS_Snippets_Wpf/TextFormatterExample/CSharp/Window1.xaml.cs#100)]
 [!code-vb[TextFormatterExample#100](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/TextFormatterExample/VisualBasic/Window1.xaml.vb#100)]  
  
<a name="section3"></a>   
## <a name="implementing-the-client-text-store"></a><span data-ttu-id="2a97d-140">クライアント テキスト ストアを実装する</span><span class="sxs-lookup"><span data-stu-id="2a97d-140">Implementing the Client Text Store</span></span>  
 <span data-ttu-id="2a97d-141">テキスト書式設定エンジンを拡張するとき、テキスト ストアのあらゆる側面を実装し、管理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2a97d-141">When you extend the text formatting engine, you are required to implement and manage all aspects of the text store.</span></span> <span data-ttu-id="2a97d-142">これは簡単な作業ではありません。</span><span class="sxs-lookup"><span data-stu-id="2a97d-142">This is not a trivial task.</span></span> <span data-ttu-id="2a97d-143">テキスト ストアは、テキスト ランのプロパティ、段落のプロパティ、埋め込みオブジェクト、その他の同様のコンテンツの追跡を担当します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-143">The text store is responsible for tracking text run properties, paragraph properties, embedded objects, and other similar content.</span></span> <span data-ttu-id="2a97d-144">個人と共にテキスト フォーマッタも用意されています<xref:System.Windows.Media.TextFormatting.TextRun>テキスト フォーマッタを使用して作成されるオブジェクト<xref:System.Windows.Media.TextFormatting.TextLine>オブジェクト。</span><span class="sxs-lookup"><span data-stu-id="2a97d-144">It also provides the text formatter with individual <xref:System.Windows.Media.TextFormatting.TextRun> objects which the text formatter uses to create <xref:System.Windows.Media.TextFormatting.TextLine> objects.</span></span>  
  
 <span data-ttu-id="2a97d-145">文字列ストアの仮想化を処理するには、テキスト ストアをから派生しなければなりません<xref:System.Windows.Media.TextFormatting.TextSource>です。</span><span class="sxs-lookup"><span data-stu-id="2a97d-145">To handle the virtualization of the text store, the text store must be derived from <xref:System.Windows.Media.TextFormatting.TextSource>.</span></span> <span data-ttu-id="2a97d-146"><xref:System.Windows.Media.TextFormatting.TextSource> テキスト フォーマッタで使用するテキスト ストアからテキスト ランを取得する方法を定義します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-146"><xref:System.Windows.Media.TextFormatting.TextSource> defines the method the text formatter uses to retrieve text runs from the text store.</span></span> <span data-ttu-id="2a97d-147"><xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> テキストを取得するテキスト フォーマッタで使用されるメソッドの実行に使用される行の書式設定には、します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-147"><xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> is the method used by the text formatter to retrieve text runs used in line formatting.</span></span> <span data-ttu-id="2a97d-148">呼び出し<xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A>次の条件のいずれかが発生するまでにテキスト フォーマッタによって繰り返し行われました。</span><span class="sxs-lookup"><span data-stu-id="2a97d-148">The call to <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> is repeatedly made by the text formatter until one of the following conditions occurs:</span></span>  
  
-   <span data-ttu-id="2a97d-149">A<xref:System.Windows.Media.TextFormatting.TextEndOfLine>またはサブクラスが返されます。</span><span class="sxs-lookup"><span data-stu-id="2a97d-149">A <xref:System.Windows.Media.TextFormatting.TextEndOfLine> or a subclass is returned.</span></span>  
  
-   <span data-ttu-id="2a97d-150">テキスト ランの蓄積された幅を超えるテキスト フォーマッタを作成するか、通話やテキスト フォーマッタへの呼び出しで指定された行の最大幅<xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>メソッドです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-150">The accumulated width of text runs exceeds the maximum line width specified in either the call to create the text formatter or the call to the text formatter's <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> method.</span></span>  
  
-   <span data-ttu-id="2a97d-151">A [!INCLUDE[TLA#tla_unicode](../../../../includes/tlasharptla-unicode-md.md)] "CF"、"LF"、"CRLF"などの改行文字のシーケンスが返されます。</span><span class="sxs-lookup"><span data-stu-id="2a97d-151">A [!INCLUDE[TLA#tla_unicode](../../../../includes/tlasharptla-unicode-md.md)] newline sequence, such as "CF", "LF", or "CRLF", is returned.</span></span>  
  
<a name="section4"></a>   
## <a name="providing-text-runs"></a><span data-ttu-id="2a97d-152">テキスト ランを提供する</span><span class="sxs-lookup"><span data-stu-id="2a97d-152">Providing Text Runs</span></span>  
 <span data-ttu-id="2a97d-153">テキスト書式設定プロセスの中心となるものは、テキスト フォーマッタとテキスト ストアの間のやりとりです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-153">The core of the text formatting process is the interaction between the text formatter and the text store.</span></span> <span data-ttu-id="2a97d-154">実装<xref:System.Windows.Media.TextFormatting.TextSource>テキスト フォーマッタの提供、<xref:System.Windows.Media.TextFormatting.TextRun>オブジェクトおよびプロパティのテキストを実行すると、書式を設定します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-154">Your implementation of <xref:System.Windows.Media.TextFormatting.TextSource> provides the text formatter with the <xref:System.Windows.Media.TextFormatting.TextRun> objects and the properties with which to format the text runs.</span></span> <span data-ttu-id="2a97d-155">この連携では、によって処理される、<xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A>テキスト フォーマッタによって呼び出されるメソッド。</span><span class="sxs-lookup"><span data-stu-id="2a97d-155">This interaction is handled by the <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method, which is called by the text formatter.</span></span>  
  
 <span data-ttu-id="2a97d-156">次の表は、定義済みのいくつか<xref:System.Windows.Media.TextFormatting.TextRun>オブジェクト。</span><span class="sxs-lookup"><span data-stu-id="2a97d-156">The following table shows some of the predefined <xref:System.Windows.Media.TextFormatting.TextRun> objects.</span></span>  
  
|<span data-ttu-id="2a97d-157">TextRun の種類</span><span class="sxs-lookup"><span data-stu-id="2a97d-157">TextRun Type</span></span>|<span data-ttu-id="2a97d-158">使用法</span><span class="sxs-lookup"><span data-stu-id="2a97d-158">Usage</span></span>|  
|------------------|-----------|  
|<xref:System.Windows.Media.TextFormatting.TextCharacters>|<span data-ttu-id="2a97d-159">文字グリフの表示をテキスト フォーマッタに返すために使用される特殊なテキスト ラン。</span><span class="sxs-lookup"><span data-stu-id="2a97d-159">The specialized text run used to pass a representation of character glyphs back to the text formatter.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEmbeddedObject>|<span data-ttu-id="2a97d-160">テキスト内のボタンやイメージなど、測定、ヒット テスト、描画が全部行われるコンテンツを提供するための特殊なテキスト ラン。</span><span class="sxs-lookup"><span data-stu-id="2a97d-160">The specialized text run used to provide content in which measuring, hit testing, and drawing is done in whole, such as a button or image within the text.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfLine>|<span data-ttu-id="2a97d-161">行の終わりをマークするための特殊なテキスト ラン。</span><span class="sxs-lookup"><span data-stu-id="2a97d-161">The specialized text run used to mark the end of a line.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>|<span data-ttu-id="2a97d-162">段落の終わりをマークするための特殊なテキスト ラン。</span><span class="sxs-lookup"><span data-stu-id="2a97d-162">The specialized text run used to mark the end of a paragraph.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfSegment>|<span data-ttu-id="2a97d-163">特殊化されたテキスト ランの使用に影響を受けた、前のスコープを終了するなど、セグメントの末尾を示す<xref:System.Windows.Media.TextFormatting.TextModifier>を実行します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-163">The specialized text run used to mark the end of a segment, such as to end the scope affected by a previous <xref:System.Windows.Media.TextFormatting.TextModifier> run.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextHidden>|<span data-ttu-id="2a97d-164">隠れ文字の範囲をマークするための特殊なテキスト ラン。</span><span class="sxs-lookup"><span data-stu-id="2a97d-164">The specialized text run used to mark a range of hidden characters.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextModifier>|<span data-ttu-id="2a97d-165">その範囲でテキスト ランのプロパティを変更するための特殊なテキスト ラン。</span><span class="sxs-lookup"><span data-stu-id="2a97d-165">The specialized text run used to modify properties of text runs in its scope.</span></span> <span data-ttu-id="2a97d-166">次の一致するまでの範囲<xref:System.Windows.Media.TextFormatting.TextEndOfSegment>テキスト ラン、または、次へ<xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>です。</span><span class="sxs-lookup"><span data-stu-id="2a97d-166">The scope extends to the next matching <xref:System.Windows.Media.TextFormatting.TextEndOfSegment> text run, or the next <xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>.</span></span>|  
  
 <span data-ttu-id="2a97d-167">定義済みの<xref:System.Windows.Media.TextFormatting.TextRun>オブジェクトをサブクラス化することができます。</span><span class="sxs-lookup"><span data-stu-id="2a97d-167">Any of the predefined <xref:System.Windows.Media.TextFormatting.TextRun> objects can be subclassed.</span></span> <span data-ttu-id="2a97d-168">それにより、テキスト ソースはテキスト フォーマッタにカスタム データを含むテキスト ランを提供できます。</span><span class="sxs-lookup"><span data-stu-id="2a97d-168">This allows your text source to provide the text formatter with text runs that include custom data.</span></span>  
  
 <span data-ttu-id="2a97d-169">次の例で、<xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A>メソッドです。</span><span class="sxs-lookup"><span data-stu-id="2a97d-169">The following example demonstrates a <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method.</span></span> <span data-ttu-id="2a97d-170">このテキスト ストア<xref:System.Windows.Media.TextFormatting.TextRun>テキスト フォーマッタにするオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="2a97d-170">This text store returns <xref:System.Windows.Media.TextFormatting.TextRun> objects to the text formatter for processing.</span></span>  
  
 [!code-csharp[TextFormatterExample#101](../../../../samples/snippets/csharp/VS_Snippets_Wpf/TextFormatterExample/CSharp/CustomTextSource.cs#101)]
 [!code-vb[TextFormatterExample#101](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/TextFormatterExample/VisualBasic/CustomTextSource.vb#101)]  
  
> [!NOTE]
>  <span data-ttu-id="2a97d-171">この例では、テキスト ストアはすべてのテキストに同じテキスト プロパティを提供します。</span><span class="sxs-lookup"><span data-stu-id="2a97d-171">In this example, the text store provides the same text properties to all of the text.</span></span> <span data-ttu-id="2a97d-172">高度なテキスト ストアでは、場合によっては、独自のスパン管理を実装し、個々の文字に異なるプロパティを与えるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="2a97d-172">Advanced text stores would need to implement their own span management to allow individual characters to have different properties.</span></span>  
  
<a name="section5"></a>   
## <a name="specifying-formatting-properties"></a><span data-ttu-id="2a97d-173">書式設定プロパティを指定する</span><span class="sxs-lookup"><span data-stu-id="2a97d-173">Specifying Formatting Properties</span></span>  
 <span data-ttu-id="2a97d-174"><xref:System.Windows.Media.TextFormatting.TextRun> オブジェクトは、テキスト ストアによって提供されるプロパティを使用して書式設定されます。</span><span class="sxs-lookup"><span data-stu-id="2a97d-174"><xref:System.Windows.Media.TextFormatting.TextRun> objects are formatted by using properties provided by the text store.</span></span> <span data-ttu-id="2a97d-175">これらのプロパティには、次の 2 つの種類で<xref:System.Windows.Media.TextFormatting.TextParagraphProperties>と<xref:System.Windows.Media.TextFormatting.TextRunProperties>です。</span><span class="sxs-lookup"><span data-stu-id="2a97d-175">These properties come in two types, <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> and <xref:System.Windows.Media.TextFormatting.TextRunProperties>.</span></span> <span data-ttu-id="2a97d-176"><xref:System.Windows.Media.TextFormatting.TextParagraphProperties> 段落の包括的なプロパティをなどに処理<xref:System.Windows.TextAlignment>と<xref:System.Windows.FlowDirection>です。</span><span class="sxs-lookup"><span data-stu-id="2a97d-176"><xref:System.Windows.Media.TextFormatting.TextParagraphProperties> handle paragraph inclusive properties such as <xref:System.Windows.TextAlignment> and <xref:System.Windows.FlowDirection>.</span></span> <span data-ttu-id="2a97d-177"><xref:System.Windows.Media.TextFormatting.TextRunProperties> 各テキスト ラン前景ブラシなど、段落内のさまざまなことができるプロパティは、 <xref:System.Windows.Media.Typeface>、およびフォント サイズ。</span><span class="sxs-lookup"><span data-stu-id="2a97d-177"><xref:System.Windows.Media.TextFormatting.TextRunProperties> are properties that can be different for each text run within a paragraph, such as foreground brush, <xref:System.Windows.Media.Typeface>, and font size.</span></span> <span data-ttu-id="2a97d-178">カスタムの段落およびカスタム テキスト プロパティの型を実装する、アプリケーションがから派生するクラスを作成する必要があります<xref:System.Windows.Media.TextFormatting.TextParagraphProperties>と<xref:System.Windows.Media.TextFormatting.TextRunProperties>それぞれします。</span><span class="sxs-lookup"><span data-stu-id="2a97d-178">To implement custom paragraph and custom text run property types, your application must create classes that derive from <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> and <xref:System.Windows.Media.TextFormatting.TextRunProperties> respectively.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2a97d-179">関連項目</span><span class="sxs-lookup"><span data-stu-id="2a97d-179">See Also</span></span>  
 [<span data-ttu-id="2a97d-180">WPF のタイポグラフィ</span><span class="sxs-lookup"><span data-stu-id="2a97d-180">Typography in WPF</span></span>](../../../../docs/framework/wpf/advanced/typography-in-wpf.md)  
 [<span data-ttu-id="2a97d-181">WPF のドキュメント</span><span class="sxs-lookup"><span data-stu-id="2a97d-181">Documents in WPF</span></span>](../../../../docs/framework/wpf/advanced/documents-in-wpf.md)
