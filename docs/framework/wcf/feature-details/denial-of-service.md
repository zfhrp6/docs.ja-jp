---
title: サービス拒否
ms.date: 03/30/2017
helpviewer_keywords:
- denial of service [WCF]
ms.assetid: dfb150f3-d598-4697-a5e6-6779e4f9b600
ms.openlocfilehash: 52a22d96e981ff10d444569465d8e74ddf890836
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/04/2018
---
# <a name="denial-of-service"></a><span data-ttu-id="73ac0-102">サービス拒否</span><span class="sxs-lookup"><span data-stu-id="73ac0-102">Denial of Service</span></span>
<span data-ttu-id="73ac0-103">サービス拒否は、メッセージを処理できなくしたり、メッセージ処理を大幅に遅延させたりするなど、システムに過大な負荷が生じた場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-103">Denial of service occurs when a system is overwhelmed in such a way that messages cannot be processed, or they are processed extremely slowly.</span></span>  
  
## <a name="excess-memory-consumption"></a><span data-ttu-id="73ac0-104">過度のメモリ消費</span><span class="sxs-lookup"><span data-stu-id="73ac0-104">Excess Memory Consumption</span></span>  
 <span data-ttu-id="73ac0-105">一意のローカル名、名前空間、またはプレフィックスを大量に含んだ XML ドキュメントを読み込むと、問題が発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-105">A problem can occur when reading an XML document with a large number of unique local names, namespaces, or prefixes.</span></span> <span data-ttu-id="73ac0-106"><xref:System.Xml.XmlReader> から派生したクラスを使用している場合、<xref:System.Xml.XmlReader.LocalName%2A>、<xref:System.Xml.XmlReader.Prefix%2A>、または <xref:System.Xml.XmlReader.NamespaceURI%2A> のいずれかのプロパティが項目ごとに呼び出され、それによって返された文字列が <xref:System.Xml.NameTable> に追加されます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-106">If you are using a class that derives from <xref:System.Xml.XmlReader>, and you call either the <xref:System.Xml.XmlReader.LocalName%2A>, <xref:System.Xml.XmlReader.Prefix%2A> or <xref:System.Xml.XmlReader.NamespaceURI%2A> property for each item, the returned string is added to a <xref:System.Xml.NameTable>.</span></span> <span data-ttu-id="73ac0-107"><xref:System.Xml.NameTable> が保持するコレクションのサイズは決して減ることがありません。その結果、文字列ハンドルの実質的な "メモリ リーク" が発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-107">The collection held by the <xref:System.Xml.NameTable> never decreases in size, creating a virtual "memory leak" of the string handles.</span></span>  
  
 <span data-ttu-id="73ac0-108">回避事項を次に示します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-108">Mitigations include:</span></span>  
  
-   <span data-ttu-id="73ac0-109"><xref:System.Xml.NameTable> からの派生クラスを作成し、最大サイズのクォータを指定します </span><span class="sxs-lookup"><span data-stu-id="73ac0-109">Derive from the <xref:System.Xml.NameTable> class and enforce a maximum size quota.</span></span> <span data-ttu-id="73ac0-110">(<xref:System.Xml.NameTable> の使用を回避したり、サイズが上限に達したときに <xref:System.Xml.NameTable> を切り替えたりすることはできません)。</span><span class="sxs-lookup"><span data-stu-id="73ac0-110">(You cannot prevent the use of a <xref:System.Xml.NameTable> or switch the <xref:System.Xml.NameTable> when it is full.)</span></span>  
  
-   <span data-ttu-id="73ac0-111">可能であれば、前述のプロパティを使用せずに、<xref:System.Xml.XmlReader.MoveToAttribute%2A> メソッドと <xref:System.Xml.XmlReader.IsStartElement%2A> メソッドを使用します。これらのメソッドでは、文字列が返されないため、<xref:System.Xml.NameTable> コレクションがあふれてしまう問題を回避できます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-111">Avoid using the properties mentioned and instead use the <xref:System.Xml.XmlReader.MoveToAttribute%2A> method with the <xref:System.Xml.XmlReader.IsStartElement%2A> method where possible; those methods do not return strings and thus avoid the problem of overfilling the <xref:System.Xml.NameTable> collection.</span></span>  
  
## <a name="malicious-client-sends-excessive-license-requests-to-service"></a><span data-ttu-id="73ac0-112">悪質なクライアントにより過度のライセンス要求がサービスに送信される</span><span class="sxs-lookup"><span data-stu-id="73ac0-112">Malicious Client Sends Excessive License Requests to Service</span></span>  
 <span data-ttu-id="73ac0-113">悪質なクライアントが過度のライセンス要求を実行してサービスを攻撃する場合、サーバーは過度のメモリを使用することになります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-113">If a malicious client bombards a service with excessive license requests, it can cause the server to use excessive memory.</span></span>  
  
 <span data-ttu-id="73ac0-114">回避方法 : <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings> クラスの次のプロパティを使用します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-114">Mitigation: Use the following properties of the <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings> class:</span></span>  
  
-   <span data-ttu-id="73ac0-115"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A> : `SecurityContextToken` または `SPNego` ネゴシエーションの後にサーバーがキャッシュする、期限付きの `SSL` の最大数を制御します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-115"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A>: controls the maximum number of time-bounded `SecurityContextToken`s that the server caches after `SPNego` or `SSL` negotiation.</span></span>  
  
-   <span data-ttu-id="73ac0-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A> : `SecurityContextTokens` または `SPNego` ネゴシエーションに続いてサーバーが発行する `SSL` の有効期限を制御します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A>: controls the lifetime of the `SecurityContextTokens` that the server issues following `SPNego` or `SSL` negotiation.</span></span> <span data-ttu-id="73ac0-117">サーバーは、この期間の `SecurityContextToken` をキャッシュします。</span><span class="sxs-lookup"><span data-stu-id="73ac0-117">The server caches the `SecurityContextToken`s for this period of time.</span></span>  
  
-   <span data-ttu-id="73ac0-118"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A>: サーバーで確立されているが、そのアプリケーション メッセージが処理されていない、セキュリティで保護されたメッセージ交換の最大数を制御します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-118"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A>: controls the maximum number of secure conversations that are established at the server but for which no application messages have been processed.</span></span> <span data-ttu-id="73ac0-119">このクォータは、クライアントが、セキュリティで保護されたメッセージ交換をサービスで確立しないようにします。それによって、サービスはクライアントごとの状態を保持できますが、それらの状態を使用することはありません。</span><span class="sxs-lookup"><span data-stu-id="73ac0-119">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
-   <span data-ttu-id="73ac0-120"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A> : サービスが、セキュリティで保護されたメッセージ交換を、その当事者のクライアントからのアプリケーション メッセージを受信しなくても確立したままにする最長時間を制御します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-120"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A>:  controls the maximum time the service keeps a secure conversation alive without receiving an application message from the client for the conversation.</span></span> <span data-ttu-id="73ac0-121">このクォータは、クライアントが、セキュリティで保護されたメッセージ交換をサービスで確立しないようにします。それによって、サービスはクライアントごとの状態を保持できますが、それらの状態を使用することはありません。</span><span class="sxs-lookup"><span data-stu-id="73ac0-121">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
## <a name="wsdualhttpbinding-or-dual-custom-bindings-require-client-authentication"></a><span data-ttu-id="73ac0-122">WSDualHttpBinding または二重カスタム バインディングにクライアント認証が必要になる</span><span class="sxs-lookup"><span data-stu-id="73ac0-122">WSDualHttpBinding or Dual Custom Bindings Require Client Authentication</span></span>  
 <span data-ttu-id="73ac0-123">既定では、<xref:System.ServiceModel.WSDualHttpBinding> のセキュリティは有効になっています。</span><span class="sxs-lookup"><span data-stu-id="73ac0-123">By default, the <xref:System.ServiceModel.WSDualHttpBinding> has security enabled.</span></span> <span data-ttu-id="73ac0-124">ただし、<xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> プロパティを <xref:System.ServiceModel.MessageCredentialType.None> に設定してクライアント認証を無効にすると、第 3 のサービスで悪質なユーザーからサービス拒否攻撃を受ける可能性があります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-124">It is possible, however, that if the client authentication is disabled by setting the <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> property to <xref:System.ServiceModel.MessageCredentialType.None>, a malicious user can cause a denial of service attack on a third service.</span></span> <span data-ttu-id="73ac0-125">これは、悪質なクライアントが、メッセージ ストリームを第 3 のサービスに送信するようサービスに指示できるためです。</span><span class="sxs-lookup"><span data-stu-id="73ac0-125">This can occur because a malicious client can direct the service to send a stream of messages to a third service.</span></span>  
  
 <span data-ttu-id="73ac0-126">これを防ぐには、このプロパティを `None` に設定しないようにします。</span><span class="sxs-lookup"><span data-stu-id="73ac0-126">To mitigate this, do not set the property to `None`.</span></span> <span data-ttu-id="73ac0-127">二重メッセージ パターンを持つカスタム バインディングを作成する場合もこの可能性があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="73ac0-127">Also be aware of this possibility when creating a custom binding that has a dual message pattern.</span></span>  
  
## <a name="auditing-event-log-can-be-filled"></a><span data-ttu-id="73ac0-128">監査イベント ログがいっぱいになる可能性がある</span><span class="sxs-lookup"><span data-stu-id="73ac0-128">Auditing Event Log Can Be Filled</span></span>  
 <span data-ttu-id="73ac0-129">悪意のあるユーザーに監査が有効になっていることを知られると、その攻撃者に監査エントリの書き込みにつながる無効なメッセージを送信される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-129">If a malicious user understands that auditing is enabled, that attacker can send invalid messages that cause audit entries to be written.</span></span> <span data-ttu-id="73ac0-130">このような方法で監査ログに書き込みが行われると、監査システムに障害が発生します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-130">If the audit log is filled in this manner, the auditing system fails.</span></span>  
  
 <span data-ttu-id="73ac0-131">これを防ぐには、<xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> プロパティを `true` に設定し、イベント ビューアーのプロパティを使用して監査動作を制御します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-131">To mitigate this, set the <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> property to `true` and use the properties of the Event Viewer to control the auditing behavior.</span></span> <span data-ttu-id="73ac0-132">イベント ビューアーを使用して表示し、イベント ログを管理する方法の詳細については、次を参照してください。[イベント ビューアー](http://go.microsoft.com/fwlink/?LinkId=186123)です。</span><span class="sxs-lookup"><span data-stu-id="73ac0-132">For more information about using the Event Viewer to view and manage event logs, see [Event Viewer](http://go.microsoft.com/fwlink/?LinkId=186123).</span></span> <span data-ttu-id="73ac0-133">詳細については、次を参照してください。[監査](../../../../docs/framework/wcf/feature-details/auditing-security-events.md)です。</span><span class="sxs-lookup"><span data-stu-id="73ac0-133">For more information, see [Auditing](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span></span>  
  
## <a name="invalid-implementations-of-iauthorizationpolicy-can-cause-service-hangs"></a><span data-ttu-id="73ac0-134">IAuthorizationPolicy の無効な実装によりサービスが停止する可能性がある</span><span class="sxs-lookup"><span data-stu-id="73ac0-134">Invalid Implementations of IAuthorizationPolicy Can Cause Service Hangs</span></span>  
 <span data-ttu-id="73ac0-135">欠陥のある <xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A> インターフェイスの実装で <xref:System.IdentityModel.Policy.IAuthorizationPolicy> メソッドを呼び出すと、サービスが停止する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-135">Calling the <xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A> method on a faulty implementation of the <xref:System.IdentityModel.Policy.IAuthorizationPolicy> interface can cause the service to hang.</span></span>  
  
 <span data-ttu-id="73ac0-136">回避方法 : 信頼されたコードのみを使用します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-136">Mitigation: Use only trusted code.</span></span> <span data-ttu-id="73ac0-137">つまり、ユーザーが記述しテストしたコード、または信頼されたプロバイダーが提供するコードのみを使用します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-137">That is, use only code that you have written and tested, or that comes from a trusted provider.</span></span> <span data-ttu-id="73ac0-138">十分な検討を行わずに、<xref:System.IdentityModel.Policy.IAuthorizationPolicy> の信頼されない拡張をユーザーのコードに接続することを許可しないでください。</span><span class="sxs-lookup"><span data-stu-id="73ac0-138">Do not allow untrusted extensions of <xref:System.IdentityModel.Policy.IAuthorizationPolicy> to be plugged into your code without due consideration.</span></span> <span data-ttu-id="73ac0-139">これは、サービスの実装で使用されるすべての拡張に当てはまります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-139">This applies to all extensions used in a service implementation.</span></span> <span data-ttu-id="73ac0-140">WCF 機能拡張ポイントを使用してアプリケーション コードと接続されている外部コードとの区別を行いません。</span><span class="sxs-lookup"><span data-stu-id="73ac0-140">WCF does not make any distinction between application code and foreign code that is plugged in using extensibility points.</span></span>  
  
## <a name="kerberos-maximum-token-size-may-need-resizing"></a><span data-ttu-id="73ac0-141">Kerberos の最大トークン サイズの変更が必要になる場合がある</span><span class="sxs-lookup"><span data-stu-id="73ac0-141">Kerberos Maximum Token Size May Need Resizing</span></span>  
 <span data-ttu-id="73ac0-142">クライアントが多数のグループ (実際の数はグループにより異なるが、約 900) に属している場合、メッセージ ヘッダーのブロックが 64 KB を超えると問題が発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-142">If a client belongs to a large number of groups (approximately 900, although the actual number varies depending on the groups), a problem may occur when a message header's block exceeds 64 kilobytes.</span></span> <span data-ttu-id="73ac0-143">その場合は、サイズを増やし、最大 Kerberos トークン、Microsoft サポート記事に説明されて"[バッファー不足が IIS に接続するために Internet Explorer Kerberos 認証が動作しない](http://go.microsoft.com/fwlink/?LinkId=89176)"。</span><span class="sxs-lookup"><span data-stu-id="73ac0-143">In that case, you can increase the maximum Kerberos token size, as described in the Microsoft Support article "[Internet Explorer Kerberos authentication does not work because of an insufficient buffer connecting to IIS](http://go.microsoft.com/fwlink/?LinkId=89176)."</span></span> <span data-ttu-id="73ac0-144">また、Kerberos トークンの増加に合わせて WCF メッセージの最大サイズを大きく必要があります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-144">You may also need to increase the maximum WCF message size to accommodate the larger Kerberos token.</span></span>  
  
## <a name="autoenrollment-results-in-multiple-certificates-with-same-subject-name-for-machine"></a><span data-ttu-id="73ac0-145">自動登録によってコンピューターに同一サブジェクト名の証明書が複数発生する</span><span class="sxs-lookup"><span data-stu-id="73ac0-145">Autoenrollment Results in Multiple Certificates with Same Subject Name for Machine</span></span>  
 <span data-ttu-id="73ac0-146">*自動登録*の機能は、[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]ユーザーとコンピューターの証明書を自動的に登録します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-146">*Autoenrollment* is the capability of [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] to automatically enroll users and computers for certificates.</span></span> <span data-ttu-id="73ac0-147">この機能が有効になっているドメイン上にコンピューターがある場合、新しいコンピューターがネットワークに参加するたびに、クライアント認証を目的とする X.509 証明書が自動的に作成されローカル コンピューターの個人用証明書のストアに自動で挿入されます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-147">When a machine is on a domain with the feature enabled, an X.509 certificate with the intended purpose of client authentication is automatically created and inserted into the local computer's Personal certificates store whenever a new machine is joined to the network.</span></span> <span data-ttu-id="73ac0-148">ただし、自動登録では、キャッシュに作成されたすべての証明書に同じサブジェクト名が使用されます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-148">However, autoenrollment uses the same subject name for all certificates it creates in the cache.</span></span>  
  
 <span data-ttu-id="73ac0-149">影響は、WCF サービスが自動登録のドメインで開くには失敗することです。</span><span class="sxs-lookup"><span data-stu-id="73ac0-149">The impact is that WCF services may fail to open on domains with autoenrollment.</span></span> <span data-ttu-id="73ac0-150">コンピューターの完全修飾ドメイン ネーム システム (DNS) 名を持つ証明書が複数あるため、既定サービスの X.509 資格情報検索の条件が不明確になり、このような問題が発生します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-150">This occurs because the default service X.509 credential search criteria might be ambiguous because multiple certificates with the machine's fully qualified Domain Name System (DNS) name exist.</span></span> <span data-ttu-id="73ac0-151">この場合、1 つは自動登録で作成された証明書、もう 1 つは自己発行された証明書です。</span><span class="sxs-lookup"><span data-stu-id="73ac0-151">One certificate originates from autoenrollment; the other might be a self-issued certificate.</span></span>  
  
 <span data-ttu-id="73ac0-152">これを軽減するために参照をより正確な検索条件を使用して使用する正確な証明書、 [ \<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md)です。</span><span class="sxs-lookup"><span data-stu-id="73ac0-152">To mitigate this, reference the exact certificate to use by using a more precise search criterion on the [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span></span> <span data-ttu-id="73ac0-153">たとえば、<xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> オプションを使用し、一意の拇印 (ハッシュ) により証明書を指定します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-153">For example, use the <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> option, and specify the certificate by its unique thumbprint (hash).</span></span>  
  
 <span data-ttu-id="73ac0-154">自動登録機能の詳細については、次を参照してください。 [Windows Server 2003 の証明書の自動登録](http://go.microsoft.com/fwlink/?LinkId=95166)です。</span><span class="sxs-lookup"><span data-stu-id="73ac0-154">For more information about the autoenrollment feature, see [Certificate Autoenrollment in Windows Server 2003](http://go.microsoft.com/fwlink/?LinkId=95166).</span></span>  
  
## <a name="last-of-multiple-alternative-subject-names-used-for-authorization"></a><span data-ttu-id="73ac0-155">複数の代替サブジェクト名の最後が承認に使用される</span><span class="sxs-lookup"><span data-stu-id="73ac0-155">Last of Multiple Alternative Subject Names Used for Authorization</span></span>  
 <span data-ttu-id="73ac0-156">まれなケースとして X.509 証明書に複数の代替サブジェクト名が含まれる場合、その代替サブジェクト名を使用して承認を行うと、承認は失敗する場合があります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-156">In the rare case when an X.509 certificate contains multiple alternative subject names, and you authorize using the alternative subject name, authorization may fail.</span></span>  
  
## <a name="protect-configuration-files-with-acls"></a><span data-ttu-id="73ac0-157">ACL を使用して構成ファイルを保護する</span><span class="sxs-lookup"><span data-stu-id="73ac0-157">Protect Configuration Files with ACLs</span></span>  
 <span data-ttu-id="73ac0-158">[!INCLUDE[infocard](../../../../includes/infocard-md.md)] で発行されたトークンについては、必須およびオプションのクレームをコードおよび構成ファイルに指定できます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-158">You can specify required and optional claims in code and configuration files for [!INCLUDE[infocard](../../../../includes/infocard-md.md)] issued tokens.</span></span> <span data-ttu-id="73ac0-159">これにより、対応する要素が、セキュリティ トークン サービスに送信される `RequestSecurityToken` メッセージに送出されます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-159">This results in corresponding elements being emitted in `RequestSecurityToken` messages that are sent to the security token service.</span></span> <span data-ttu-id="73ac0-160">攻撃者は、コードまたは構成を変更して必須またはオプションのクレームを削除でき、対象サービスへのアクセスが許可されていないトークンをセキュリティ トークン サービスに発行させることができます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-160">An attacker can modify code or configuration to remove required or optional claims, potentially getting the security token service to issue a token that does not allow access to the target service.</span></span>  
  
 <span data-ttu-id="73ac0-161">これを防ぐには、コンピューターにアクセスして構成ファイルを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="73ac0-161">To mitigate: Require access to the computer to modify the configuration file.</span></span> <span data-ttu-id="73ac0-162">アクセス制御リスト (ACL: Access Control List) を使用して構成ファイルをセキュリティで保護します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-162">Use file access control lists (ACLs) to secure configuration files.</span></span> <span data-ttu-id="73ac0-163">WCF では、コードに含まれるアプリケーションのディレクトリまたはグローバル アセンブリ キャッシュの構成から読み込まれるには、このようなコードが許可されます前に必要です。</span><span class="sxs-lookup"><span data-stu-id="73ac0-163">WCF requires that code be in the application directory or the global assembly cache before it will allow such code to be loaded from configuration.</span></span> <span data-ttu-id="73ac0-164">ディレクトリの ACL を使用してディレクトリをセキュリティで保護します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-164">Use directory ACLs to secure directories.</span></span>  
  
## <a name="maximum-number-of-secure-sessions-for-a-service-is-reached"></a><span data-ttu-id="73ac0-165">1 つのサービスに対して、セキュリティで保護されたセッションが最大数に達する</span><span class="sxs-lookup"><span data-stu-id="73ac0-165">Maximum Number of Secure Sessions for a Service Is Reached</span></span>  
 <span data-ttu-id="73ac0-166">クライアントがサービスにより正常に認証され、セキュリティで保護されたセッションがサービスと共に確立されると、クライアントがセッションをキャンセルするか、セッションの期限が切れるまで、サービスはそのセッションを追跡します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-166">When a client is successfully authenticated by a service and a secure session is established with the service, the service keeps track of the session until the client cancels it or the session expires.</span></span> <span data-ttu-id="73ac0-167">セッションが確立されるたびに、1 つのサービスで同時にアクティブにできるセッションは上限に近づいていきます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-167">Every established session counts against the limit for the maximum number of active simultaneous sessions with a service.</span></span> <span data-ttu-id="73ac0-168">この上限に達した場合、1 つ以上のアクティブなセッションが期限切れになるかまたはクライアントによりキャンセルされるまで、そのサービスで新しいセッションの作成を試みるクライアントは拒否されます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-168">When this limit is reached, clients that attempt to create a new session with that service are rejected until one or more active sessions expire or are canceled by a client.</span></span> <span data-ttu-id="73ac0-169">クライアントは 1 つのサービスで複数のセッションを保持できますが、その各セッションは上限に反映されます。</span><span class="sxs-lookup"><span data-stu-id="73ac0-169">A client can have multiple sessions with a service, and each one of those sessions counts toward the limit.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="73ac0-170">ステートフルなセッションを使用する場合、前の段落は適用されません。</span><span class="sxs-lookup"><span data-stu-id="73ac0-170">When you use stateful sessions, the previous paragraph does not apply.</span></span> <span data-ttu-id="73ac0-171">ステートフルなセッションの詳細については、次を参照してください。[する方法: セキュリティで保護されたセッションのセキュリティ コンテキスト トークンを作成](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md)です。</span><span class="sxs-lookup"><span data-stu-id="73ac0-171">For more information about stateful sessions, see [How to: Create a Security Context Token for a Secure Session](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).</span></span>  
  
 <span data-ttu-id="73ac0-172">これを防ぐには、<xref:System.ServiceModel.Channels.SecurityBindingElement> クラスの <xref:System.ServiceModel.Channels.SecurityBindingElement> プロパティを設定して、アクティブなセッションの最大数とセッションの最長有効期間の制限を設定します。</span><span class="sxs-lookup"><span data-stu-id="73ac0-172">To mitigate this, set the limit for the maximum number of active sessions and the maximum lifetime for a session by setting the <xref:System.ServiceModel.Channels.SecurityBindingElement> property of the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="73ac0-173">関連項目</span><span class="sxs-lookup"><span data-stu-id="73ac0-173">See Also</span></span>  
 [<span data-ttu-id="73ac0-174">セキュリティの考慮事項</span><span class="sxs-lookup"><span data-stu-id="73ac0-174">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)  
 [<span data-ttu-id="73ac0-175">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="73ac0-175">Information Disclosure</span></span>](../../../../docs/framework/wcf/feature-details/information-disclosure.md)  
 [<span data-ttu-id="73ac0-176">権限の昇格</span><span class="sxs-lookup"><span data-stu-id="73ac0-176">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)  
 [<span data-ttu-id="73ac0-177">サービス拒否</span><span class="sxs-lookup"><span data-stu-id="73ac0-177">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)  
 [<span data-ttu-id="73ac0-178">リプレイ攻撃</span><span class="sxs-lookup"><span data-stu-id="73ac0-178">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)  
 [<span data-ttu-id="73ac0-179">改変</span><span class="sxs-lookup"><span data-stu-id="73ac0-179">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)  
 [<span data-ttu-id="73ac0-180">サポートされていないシナリオ:</span><span class="sxs-lookup"><span data-stu-id="73ac0-180">Unsupported Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)
