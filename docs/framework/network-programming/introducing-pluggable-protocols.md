---
title: プラグ可能なプロトコルの概要
ms.date: 03/30/2017
helpviewer_keywords:
- data requests, pluggable protocols
- WebRequest class, pluggable protocols
- response to Internet request, pluggable protocols
- URI
- Windows Sockets
- request/response model
- sending data, pluggable protocols
- pluggable protocols
- WebClient class, about WebClient class
- pluggable protocols, about pluggable protocols
- Internet, pluggable protocols
- path identifiers
- Uniform Resource Identifier
- application development [.NET Framework], pluggable protocols
- requesting data from Internet, pluggable protocols
- receiving data, pluggable protocols
- protocols, pluggable
- server identifiers
- scheme identifiers
ms.assetid: 4b48e22d-e4e5-48f0-be80-d549bda97415
author: mcleblanc
ms.author: markl
manager: markl
ms.openlocfilehash: ef674855d1b9d6538e08ea2bb95f1f63e602d61d
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/04/2018
---
# <a name="introducing-pluggable-protocols"></a><span data-ttu-id="a2dc0-102">プラグ可能なプロトコルの概要</span><span class="sxs-lookup"><span data-stu-id="a2dc0-102">Introducing Pluggable Protocols</span></span>
<span data-ttu-id="a2dc0-103">Microsoft .NET Framework は、アプリケーションにすばやく簡単に統合できる、複数層の拡張可能なインターネット サービスのマネージ実装を提供します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-103">The Microsoft .NET Framework provides a layered, extensible, and managed implementation of Internet services that can be integrated quickly and easily into your applications.</span></span> <span data-ttu-id="a2dc0-104"><xref:System.Net> および <xref:System.Net.Sockets> の名前空間内のインターネット アクセス クラスは、Web ベース アプリケーションとインターネット ベース アプリケーションの両方を実装するために使用できます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-104">The Internet access classes in the <xref:System.Net> and <xref:System.Net.Sockets> namespaces can be used to implement both Web-based and Internet-based applications.</span></span>  
  
## <a name="internet-applications"></a><span data-ttu-id="a2dc0-105">インターネット アプリケーション</span><span class="sxs-lookup"><span data-stu-id="a2dc0-105">Internet Applications</span></span>  
 <span data-ttu-id="a2dc0-106">インターネット アプリケーションは、情報を要求するクライアント アプリケーションと、クライアントからの情報の要求に応答するサーバー アプリケーションの 2 種類に大別することができます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-106">Internet applications can be classified broadly into two kinds: client applications that request information and server applications that respond to information requests from clients.</span></span> <span data-ttu-id="a2dc0-107">従来のインターネット クライアント/サーバー アプリケーションは、ユーザーがブラウザーを使用して世界中の Web サーバーに格納されているドキュメントやその他のデータにアクセスする World Wide Web です。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-107">The classic Internet client-server application is the World Wide Web, where people use browsers to access documents and other data stored on Web servers worldwide.</span></span>  
  
 <span data-ttu-id="a2dc0-108">アプリケーションはこれらの役割の 1 つに限定されません。たとえば、使い慣れた中間層アプリケーション サーバーは、別のサーバーからデータを要求することでクライアントからの要求に応答します。この場合、サーバーとクライアントの両方として機能します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-108">Applications are not limited to just one of these roles; for instance, the familiar middle-tier application server responds to requests from clients by requesting data from another server, in which case it is acting as both a server and a client.</span></span>  
  
 <span data-ttu-id="a2dc0-109">クライアント アプリケーションは、要求されたインターネット リソースと、要求と応答に使用するための通信プロトコルを識別することによって、要求を実行します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-109">The client application makes a request by identifying the requested Internet resource and the communication protocol to use for the request and response.</span></span> <span data-ttu-id="a2dc0-110">必要に応じて、クライアントは要求を完了するために必要な、プロキシの場所や認証情報 (ユーザー名、パスワードなど) などの追加データも提供します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-110">If necessary, the client also provides any additional data required to complete the request, such as proxy location or authentication information (user name, password, and so on).</span></span> <span data-ttu-id="a2dc0-111">要求が作成されると、要求をサーバーに送信できます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-111">Once the request is formed, the request can be sent to the server.</span></span>  
  
## <a name="identifying-resources"></a><span data-ttu-id="a2dc0-112">リソースの識別</span><span class="sxs-lookup"><span data-stu-id="a2dc0-112">Identifying Resources</span></span>  
 <span data-ttu-id="a2dc0-113">.NET Framework は、Uniform Resource Identifier (URI) を使用して、要求されたインターネット リソースと通信プロトコルを識別します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-113">The .NET Framework uses a Uniform Resource Identifier (URI) to identify the requested Internet resource and communication protocol.</span></span> <span data-ttu-id="a2dc0-114">URI は、少なくとも 3 つ、または 4 つのフラグメントで構成されています。要求と応答の通信プロトコルを識別するスキーム識別子、ドメイン ネーム システム (DNS) ホスト名またはインターネット上のサーバーを一意に識別する TCP アドレスのいずれかで構成されるサーバー識別子、要求された情報をサーバー上で検索するパス識別子、クライアントからの情報をサーバーに渡すクエリ文字列 (省略可能) です。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-114">The URI consists of at least three, and possibly four, fragments: the scheme identifier, which identifies the communications protocol for the request and response; the server identifier, which consists of either a Domain Name System (DNS) host name or a TCP address that uniquely identifies the server on the Internet; the path identifier, which locates the requested information on the server; and an optional query string, which passes information from the client to the server.</span></span> <span data-ttu-id="a2dc0-115">たとえば、URI "http://www.contoso.com/whatsnew.aspx?date=today" は、スキーム識別子 "http"、サーバー識別子 "www.contoso.com"、パス "/whatsnew.aspx"、およびクエリ文字列 "?date=today" で構成されています。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-115">For example, the URI "http://www.contoso.com/whatsnew.aspx?date=today" consists of the scheme identifier "http", the server identifier "www.contoso.com", the path "/whatsnew.aspx", and the query string "?date=today".</span></span>  
  
 <span data-ttu-id="a2dc0-116">サーバーは要求を受信し、応答を処理すると、クライアント アプリケーションに応答を返します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-116">After the server has received the request and processed the response, it returns the response to the client application.</span></span> <span data-ttu-id="a2dc0-117">応答には、コンテンツの種類 (たとえば、生のテキストや XML データ) などの補足情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-117">The response includes supplemental information, such as the type of the content (raw text or XML data, for example).</span></span>  
  
## <a name="requests-and-responses-in-the-net-framework"></a><span data-ttu-id="a2dc0-118">.NET Framework での要求と応答</span><span class="sxs-lookup"><span data-stu-id="a2dc0-118">Requests and Responses in the .NET Framework</span></span>  
 <span data-ttu-id="a2dc0-119">.NET Framework では、特定のクラスを使用して、要求/応答モデルを通じてインターネット リソースにアクセスするために必要な 3 つの情報を提供します。求めているインターネット リソースの URI が含まれている <xref:System.Uri> クラス、リソースの要求が含まれている <xref:System.Net.WebRequest> クラス、および受信した応答のコンテナーを提供する <xref:System.Net.WebResponse> クラスです。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-119">The .NET Framework uses specific classes to provide the three pieces of information required to access Internet resources through a request/response model: the <xref:System.Uri> class, which contains the URI of the Internet resource you are seeking; the <xref:System.Net.WebRequest> class, which contains a request for the resource; and the <xref:System.Net.WebResponse> class, which provides a container for the incoming response.</span></span>  
  
 <span data-ttu-id="a2dc0-120">クライアント アプリケーションは、ネットワーク リソースの URI を <xref:System.Net.WebRequest.Create%2A> メソッドに渡すことによって、`WebRequest` インスタンスを作成します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-120">Client applications create `WebRequest` instances by passing the URI of the network resource to the <xref:System.Net.WebRequest.Create%2A> method.</span></span> <span data-ttu-id="a2dc0-121">この静的メソッドは、HTTP などの特定のプロトコルの `WebRequest` を作成します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-121">This static method creates a `WebRequest` for a specific protocol, such as HTTP.</span></span> <span data-ttu-id="a2dc0-122">返される `WebRequest` は、サーバーへの要求と、要求が行われたときに送信されるデータ ストリームへのアクセスの両方を制御するプロパティへのアクセスを提供します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-122">The `WebRequest` that is returned provides access to properties that control both the request to the server and access to the data stream that is sent when the request is made.</span></span> <span data-ttu-id="a2dc0-123">`WebRequest` の <xref:System.Net.WebRequest.GetResponse%2A> メソッドは、クライアント アプリケーションから URI で識別されたサーバーに要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-123">The <xref:System.Net.WebRequest.GetResponse%2A> method on the `WebRequest` sends the request from the client application to the server identified in the URI.</span></span> <span data-ttu-id="a2dc0-124">応答遅延が発生する場合、**WebRequest** で <xref:System.Net.WebRequest.BeginGetResponse%2A> メソッドを使用して、要求を非同期的に実行し、<xref:System.Net.WebRequest.EndGetResponse%2A> メソッドを使用して後で応答を返すことができます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-124">In cases in which the response might be delayed, the request can be made asynchronously using the <xref:System.Net.WebRequest.BeginGetResponse%2A> method on the **WebRequest**, and the response can be returned at a later time using the <xref:System.Net.WebRequest.EndGetResponse%2A> method.</span></span>  
  
 <span data-ttu-id="a2dc0-125">**GetResponse** メソッドと **EndGetResponse** メソッドは、サーバーによって返されるデータへのアクセスを提供する **WebResponse** を返します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-125">The **GetResponse** and **EndGetResponse** methods return a **WebResponse** that provides access to the data returned by the server.</span></span> <span data-ttu-id="a2dc0-126">このデータは、<xref:System.Net.WebResponse.GetResponseStream%2A> メソッドによって要求元のアプリケーションにストリームとして提供されるため、データ ストリームが使用される任意の場所で、アプリケーションで使用できます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-126">Because this data is provided to the requesting application as a stream by the <xref:System.Net.WebResponse.GetResponseStream%2A> method, it can be used in an application anywhere data streams are used.</span></span>  
  
 <span data-ttu-id="a2dc0-127">**WebRequest** クラスと **WebResponse** クラスは、プラグ可能なプロトコルの基礎です。各リソースが使用しているプロトコルの具体的な詳細を考慮しなくても、インターネット リソースを使用するアプリケーションを開発できるようにするネットワーク サービスの実装です。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-127">The **WebRequest** and **WebResponse** classes are the basis of pluggable protocols — an implementation of network services that enables you to develop applications that use Internet resources without worrying about the specific details of the protocol that each resource uses.</span></span> <span data-ttu-id="a2dc0-128">**WebRequest** の派生クラスは、インターネット リソースに実際に接続する詳細を管理するため、**WebRequest** クラスに登録されます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-128">Descendant classes of **WebRequest** are registered with the **WebRequest** class to manage the details of making the actual connections to Internet resources.</span></span>  
  
 <span data-ttu-id="a2dc0-129">例として、<xref:System.Net.HttpWebRequest> クラスは、HTTP を使用してインターネット リソースへの接続の詳細を管理します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-129">As an example, the <xref:System.Net.HttpWebRequest> class manages the details of connecting to an Internet resource using HTTP.</span></span> <span data-ttu-id="a2dc0-130">既定では、**WebRequest.Create** メソッドが "http:" または "https:" (HTTP およびセキュリティで保護された HTTP のプロトコル識別子) で始まる URI を検出すると、返された **WebRequest** をそのまま使用することができます。または、**HttpWebRequest** に型キャストしてプロトコル固有のプロパティにアクセスすることもできます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-130">By default, when the **WebRequest.Create** method encounters a URI that begins with "http:" or "https:" (the protocol identifiers for HTTP and secure HTTP), the **WebRequest** that is returned can be used as is, or it can be typecast to **HttpWebRequest** to access protocol-specific properties.</span></span> <span data-ttu-id="a2dc0-131">ほとんどの場合、**WebRequest** は要求の実行に必要なすべての情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-131">In most cases, the **WebRequest** provides all the necessary information for making a request.</span></span>  
  
 <span data-ttu-id="a2dc0-132">要求/応答のトランザクションとして表すことができるプロトコルはすべて、**WebRequest** で使用できます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-132">Any protocol that can be represented as a request/response transaction can be used in a **WebRequest**.</span></span> <span data-ttu-id="a2dc0-133">**WebRequest** および **WebResponse** からプロトコル固有のクラスを派生して、アプリケーションで使用するためにそれらを静的 <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType> メソッドに登録できます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-133">You can derive protocol-specific classes from **WebRequest** and **WebResponse** and then register them for use by the application with the static <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="a2dc0-134">インターネット要求のためにクライアントの承認が必要な場合は、**WebRequest** の <xref:System.Net.WebRequest.Credentials%2A> プロパティが必要な資格情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-134">When client authorization for Internet requests is required, the <xref:System.Net.WebRequest.Credentials%2A> property of the **WebRequest** supplies the necessary credentials.</span></span> <span data-ttu-id="a2dc0-135">これらの資格情報は、基本的な HTTP 認証またはダイジェスト認証の名前/パスワードの単純な組み合わせにすることも、NTLM 認証または Kerberos 認証の名前/パスワード/ドメインのセットにすることもできます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-135">These credentials can be a simple name/password pair for basic HTTP or digest authentication, or a name/password/domain set for NTLM or Kerberos authentication.</span></span> <span data-ttu-id="a2dc0-136">1 つの資格情報のセットは、<xref:System.Net.NetworkCredential> インスタンスに格納できます。複数のセットは、<xref:System.Net.CredentialCache> インスタンスに同時に格納できます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-136">One set of credentials can be stored in a <xref:System.Net.NetworkCredential> instance, or multiple sets can be stored simultaneously in a <xref:System.Net.CredentialCache> instance.</span></span> <span data-ttu-id="a2dc0-137">**CredentialCache** は、要求の URI と、サーバーでサポートされている認証スキームを使用して、サーバーに送信する資格情報を決定します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-137">The **CredentialCache** uses the URI of the request and the authentication scheme that the server supports to determine which credentials to send to the server.</span></span>  
  
## <a name="simple-requests-with-webclient"></a><span data-ttu-id="a2dc0-138">WebClient による単純な要求</span><span class="sxs-lookup"><span data-stu-id="a2dc0-138">Simple Requests with WebClient</span></span>  
 <span data-ttu-id="a2dc0-139">インターネット リソースに対して単純な要求を行う必要があるアプリケーションの場合、<xref:System.Net.WebClient> クラスがインターネット サーバーにデータをアップロードする、またはインターネット サーバーからデータをダウンロードするための共通のメソッドを提供します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-139">For applications that need to make simple requests for Internet resources, the <xref:System.Net.WebClient> class provides common methods for uploading data to or downloading data from an Internet server.</span></span> <span data-ttu-id="a2dc0-140">**WebClient** は **WebRequest** クラスに依存して、インターネット リソースへのアクセスを提供しています。そのため、**WebClient** クラスは登録されている任意のプラグ可能なプロトコルを使用できます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-140">**WebClient** relies on the **WebRequest** class to provide access to Internet resources; therefore, the **WebClient** class can use any registered pluggable protocol.</span></span>  
  
 <span data-ttu-id="a2dc0-141">要求/応答モデルを使用できないアプリケーションの場合、またはネットワーク上でリッスンするだけでなく、要求を送信する必要があるアプリケーションの場合、**System.Net.Sockets** 名前空間が <xref:System.Net.Sockets.TcpClient>、<xref:System.Net.Sockets.TcpListener>、および <xref:System.Net.Sockets.UdpClient> クラスを提供します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-141">For applications that cannot use the request/response model, or for applications that need to listen on the network as well as send requests, the **System.Net.Sockets** namespace provides the <xref:System.Net.Sockets.TcpClient>, <xref:System.Net.Sockets.TcpListener>, and <xref:System.Net.Sockets.UdpClient> classes.</span></span> <span data-ttu-id="a2dc0-142">これらのクラスは、さまざまなトランスポート プロトコルを使用して接続のための詳細を処理し、ネットワーク接続をストリームとしてアプリケーションに公開します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-142">These classes handle the details of making connections using different transport protocols and expose the network connection to the application as a stream.</span></span>  
  
 <span data-ttu-id="a2dc0-143">Windows ソケット インターフェイスに精通している開発者、またはソケット レベルでのプログラミングにより提供されるコントロールが必要な開発者は、**System.Net.Sockets** クラスにより自身のニーズを満たすことができます。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-143">Developers familiar with the Windows Sockets interface or those who need the control provided by programming at the socket level will find that the **System.Net.Sockets** classes meet their needs.</span></span> <span data-ttu-id="a2dc0-144">**System.Net.Sockets** クラスは、**System.Net** クラス内でのマネージ コードからネイティブ コードへの遷移ポイントです。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-144">The **System.Net.Sockets** classes are a transition point from managed to native code within the **System.Net** classes.</span></span> <span data-ttu-id="a2dc0-145">ほとんどの場合、**System.Net.Sockets** クラスは、Windows の 32 ビットに相当するものにデータをマーシャリングするだけでなく、必要なセキュリティ チェックをすべて処理します。</span><span class="sxs-lookup"><span data-stu-id="a2dc0-145">In most cases, **System.Net.Sockets** classes marshal data into their Windows 32-bit counterparts, as well as handling any necessary security checks.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a2dc0-146">参照</span><span class="sxs-lookup"><span data-stu-id="a2dc0-146">See Also</span></span>  
 [<span data-ttu-id="a2dc0-147">プラグ可能なプロトコルのプログラミング</span><span class="sxs-lookup"><span data-stu-id="a2dc0-147">Programming Pluggable Protocols</span></span>](../../../docs/framework/network-programming/programming-pluggable-protocols.md)  
 [<span data-ttu-id="a2dc0-148">.NET Framework のネットワーク プログラミング</span><span class="sxs-lookup"><span data-stu-id="a2dc0-148">Network Programming in the .NET Framework</span></span>](../../../docs/framework/network-programming/index.md)  
 [<span data-ttu-id="a2dc0-149">ネットワーク プログラミングのサンプル</span><span class="sxs-lookup"><span data-stu-id="a2dc0-149">Network Programming Samples</span></span>](../../../docs/framework/network-programming/network-programming-samples.md)  
 [<span data-ttu-id="a2dc0-150">MSDN Code Gallery 上の .NET 用のネットワークのサンプル</span><span class="sxs-lookup"><span data-stu-id="a2dc0-150">Networking Samples for .NET on MSDN Code Gallery</span></span>](http://code.msdn.microsoft.com/Wiki/View.aspx?ProjectName=nclsamples)
