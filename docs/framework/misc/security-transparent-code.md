---
title: "透過的セキュリティ コード"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- transparent code
- security-transparent code
ms.assetid: 4f3dd841-82f7-4659-aab0-6d2db2166c65
caps.latest.revision: "24"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 97db1cef60af267087e86f86ecd0a77021604642
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/22/2017
---
# <a name="security-transparent-code"></a><span data-ttu-id="2d9d9-102">透過的セキュリティ コード</span><span class="sxs-lookup"><span data-stu-id="2d9d9-102">Security-Transparent Code</span></span>
<a name="top"></a>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="2d9d9-103">セキュリティは、サンドボックス化、アクセス許可、および適用の 3 つの相互作用を伴います。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-103">Security involves three interacting pieces: sandboxing, permissions, and enforcement.</span></span> <span data-ttu-id="2d9d9-104">サンドボックス化とは、完全に信頼されるコードとして扱われるコードとサンドボックスの許可セットのアクセス許可に制限されるコードが存在する分離ドメインを作成することを示します。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-104">Sandboxing refers to the practice of creating isolated domains where some code is treated as fully trusted and other code is restricted to the permissions in the grant set for the sandbox.</span></span> <span data-ttu-id="2d9d9-105">サンドボックスの許可セット内で実行されるアプリケーション コードは、透過的と見なされます。つまり、セキュリティに影響する可能性がある操作は実行できません。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-105">The application code that runs within the grant set of the sandbox is considered to be transparent; that is, it cannot perform any operations that can affect security.</span></span> <span data-ttu-id="2d9d9-106">サンドボックスの許可セットは、証拠 (<xref:System.Security.Policy.Evidence> クラス) によって決定されます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-106">The grant set for the sandbox is determined by evidence (<xref:System.Security.Policy.Evidence> class).</span></span> <span data-ttu-id="2d9d9-107">証拠は、どのアクセス許可がサンドボックスで必要か、およびどの種類のサンドボックスを作成できるかを指定します。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-107">Evidence identifies what specific permissions are required by sandboxes, and what kinds of sandboxes can be created.</span></span> <span data-ttu-id="2d9d9-108">適用とは、透過的なコードを許可セット内でのみ実行できるようにすることを示します。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-108">Enforcement refers to allowing transparent code to execute only within its grant set.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2d9d9-109">以前のバージョンの .NET Framework では、セキュリティ ポリシーが主要な要素でした。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-109">Security policy was a key element in previous versions of the .NET Framework.</span></span> <span data-ttu-id="2d9d9-110">以降で、 [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)]、セキュリティ ポリシーは廃止されました。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-110">Starting with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], security policy is obsolete.</span></span> <span data-ttu-id="2d9d9-111">セキュリティ ポリシーの削除は、透過的セキュリティとは別の変更点です。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-111">The elimination of security policy is separate from security transparency.</span></span> <span data-ttu-id="2d9d9-112">この変更の影響については、次を参照してください。[コード アクセス セキュリティ ポリシーの互換性と移行](../../../docs/framework/misc/code-access-security-policy-compatibility-and-migration.md)です。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-112">For information about the effects of this change, see [Code Access Security Policy Compatibility and Migration](../../../docs/framework/misc/code-access-security-policy-compatibility-and-migration.md).</span></span>  
  
 <span data-ttu-id="2d9d9-113">ここでは、透過性モデルについて詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-113">This topic describes the transparency model in more detail.</span></span> <span data-ttu-id="2d9d9-114">このチュートリアルは、次のセクションで構成されています。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-114">It contains the following sections:</span></span>  
  
-   [<span data-ttu-id="2d9d9-115">透過性モデルの目的</span><span class="sxs-lookup"><span data-stu-id="2d9d9-115">Purpose of the Transparency Model</span></span>](#purpose)  
  
-   [<span data-ttu-id="2d9d9-116">透過度の指定</span><span class="sxs-lookup"><span data-stu-id="2d9d9-116">Specifying the Transparency Level</span></span>](#level)  
  
-   [<span data-ttu-id="2d9d9-117">透過性の適用</span><span class="sxs-lookup"><span data-stu-id="2d9d9-117">Transparency Enforcement</span></span>](#enforcement)  
  
<a name="purpose"></a>   
## <a name="purpose-of-the-transparency-model"></a><span data-ttu-id="2d9d9-118">透過性モデルの目的</span><span class="sxs-lookup"><span data-stu-id="2d9d9-118">Purpose of the Transparency Model</span></span>  
 <span data-ttu-id="2d9d9-119">透過性は、アプリケーションの一部として実行されるコードをインフラストラクチャの一部として実行されるコードから分離する適用機構です。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-119">Transparency is an enforcement mechanism that separates code that runs as part of the application from code that runs as part of the infrastructure.</span></span> <span data-ttu-id="2d9d9-120">透過性は、ネイティブ コードの呼び出しなどの特権的な処理を実行できるコード (クリティカル コード) と、そのような処理を実行できないコード (透過的なコード) との間に、障壁を設けます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-120">Transparency draws a barrier between code that can do privileged things (critical code), such as calling native code, and code that cannot (transparent code).</span></span> <span data-ttu-id="2d9d9-121">透過的なコードでは、コードに適用されたアクセス許可セットの範囲内のコマンドを実行できますが、クリティカル コードを実行することはできません。また、クリティカル コードから派生したりクリティカル コードを含めたりすることもできません。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-121">Transparent code can execute commands within the bounds of the permission set it is operating in, but cannot execute, derive from, or contain critical code.</span></span>  
  
 <span data-ttu-id="2d9d9-122">透過性を適用する主な目的は、特権に基づいてさまざまなコード グループを分離する簡単で効果的な機構を実現することです。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-122">The primary goal of transparency enforcement is to provide a simple, effective mechanism for isolating different groups of code based on privilege.</span></span> <span data-ttu-id="2d9d9-123">サンドボックス モデルのコンテキストでは、これらの特権グループは完全に信頼されるか (制限がありません) 部分的に信頼されます (サンドボックスに付与されたアクセス許可セットに制限されます)。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-123">Within the context of the sandboxing model, these privilege groups are either fully trusted (that is, not restricted) or partially trusted (that is, restricted to the permission set granted to the sandbox).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2d9d9-124">透過性モデルは、コード アクセス セキュリティよりも優先されます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-124">The transparency model transcends code access security.</span></span> <span data-ttu-id="2d9d9-125">透過性は JIT (Just-In-Time) コンパイラによって適用され、完全信頼を含むアセンブリの許可セットに関係なく有効になります。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-125">Transparency is enforced by the just-in-time compiler and remains in effect regardless of the grant set for an assembly, including full trust.</span></span>  
  
 <span data-ttu-id="2d9d9-126">透過性は、セキュリティ モデルを簡略化して安全なライブラリやアプリケーションを簡単に作成および配置できるようにするために、.NET Framework Version 2.0 で導入されました。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-126">Transparency was introduced in the .NET Framework version 2.0 to simplify the security model, and to make it easier to write and deploy secure libraries and applications.</span></span> <span data-ttu-id="2d9d9-127">また、透過的なコードは、部分的に信頼されたアプリケーションを簡単に開発できるようにするために Microsoft Silverlight でも使用されます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-127">Transparent code is also used in Microsoft Silverlight, to simplify the development of partially trusted applications.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2d9d9-128">部分的に信頼されたアプリケーションを開発する場合は、対象ホストで必要とされるアクセス許可に注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-128">When you develop a partially trusted application, you have to be aware of the permission requirements for your target hosts.</span></span> <span data-ttu-id="2d9d9-129">一部のホストで許可されていないリソースを使用するアプリケーションを開発できます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-129">You can develop an application that uses resources that are not allowed by some hosts.</span></span> <span data-ttu-id="2d9d9-130">このアプリケーションではコンパイル エラーは発生しませんが、ホストされた環境に読み込まれるときにエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-130">This application will compile without error, but will fail when it is loaded into the hosted environment.</span></span> <span data-ttu-id="2d9d9-131">Visual Studio を使用してアプリケーションを開発した場合は、開発環境から、部分信頼または制限されたアクセス許可セットでのデバッグを有効にできます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-131">If you have developed your application using Visual Studio, you can enable debugging in partial trust or in a restricted permission set from the development environment.</span></span> <span data-ttu-id="2d9d9-132">詳細については、次を参照してください。[する方法: アクセス許可が制限された ClickOnce アプリケーションをデバッグ](/visualstudio/deployment/how-to-debug-a-clickonce-application-with-restricted-permissions)です。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-132">For more information, see [How to: Debug a ClickOnce Application with Restricted Permissions](/visualstudio/deployment/how-to-debug-a-clickonce-application-with-restricted-permissions).</span></span> <span data-ttu-id="2d9d9-133">ClickOnce アプリケーションに対して用意されている "アクセス許可の検出" 機能は、部分的に信頼されたアプリケーションにも使用できます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-133">The Calculate Permissions feature provided for ClickOnce applications is also available for any partially trusted application.</span></span>  
  
 [<span data-ttu-id="2d9d9-134">ページのトップへ</span><span class="sxs-lookup"><span data-stu-id="2d9d9-134">Back to top</span></span>](#top)  
  
<a name="level"></a>   
## <a name="specifying-the-transparency-level"></a><span data-ttu-id="2d9d9-135">透過度の指定</span><span class="sxs-lookup"><span data-stu-id="2d9d9-135">Specifying the Transparency Level</span></span>  
 <span data-ttu-id="2d9d9-136">アセンブリ レベルの <xref:System.Security.SecurityRulesAttribute> 属性では、アセンブリが従う <xref:System.Security.SecurityRuleSet> 規則が明示的に選択されます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-136">The assembly-level <xref:System.Security.SecurityRulesAttribute> attribute explicitly selects the <xref:System.Security.SecurityRuleSet> rules that the assembly will follow.</span></span> <span data-ttu-id="2d9d9-137">規則は、レベルが高いほどセキュリティ規則の適用が厳密になる数値レベルのシステムで編成されます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-137">The rules are organized under a numeric level system, where higher levels mean tighter enforcement of security rules.</span></span>  
  
 <span data-ttu-id="2d9d9-138">レベルは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-138">The levels are as follows:</span></span>  
  
-   <span data-ttu-id="2d9d9-139">レベル 2 (<xref:System.Security.SecurityRuleSet.Level2>) – [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] の透過性規則。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-139">Level 2 (<xref:System.Security.SecurityRuleSet.Level2>) – the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] transparency rules.</span></span>  
  
-   <span data-ttu-id="2d9d9-140">レベル 1 (<xref:System.Security.SecurityRuleSet.Level1>) – .NET Framework 2.0 の透過性規則。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-140">Level 1 (<xref:System.Security.SecurityRuleSet.Level1>) – the .NET Framework 2.0 transparency rules.</span></span>  
  
 <span data-ttu-id="2d9d9-141">2 つの透過度の主な相違点は、レベル 1 はアセンブリの外部からの呼び出しに透過性規則を適用せず、互換性を確保するためにのみ使用されるという点です。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-141">The primary difference between the two transparency levels is that level 1 does not enforce transparency rules for calls from outside the assembly and is intended only for compatibility.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2d9d9-142">レベル 1 の透過性は、互換性を確保するためにのみ指定してください。つまり、<xref:System.Security.AllowPartiallyTrustedCallersAttribute> 属性を使用するか透過性モデルを使用しない .NET Framework 3.5 以前で開発されたコードに対してのみレベル 1 を指定してください。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-142">You should specify level 1 transparency for compatibility only; that is, specify level 1 only for code that was developed with the .NET Framework 3.5 or earlier that uses the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute or does not use the transparency model.</span></span> <span data-ttu-id="2d9d9-143">たとえば、部分的に信頼された呼び出し元からの呼び出しを許可する .NET Framework 2.0 アセンブリ (APTCA) にはレベル 1 の透過性を使用します。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-143">For example, use level 1 transparency for .NET Framework 2.0 assemblies that allow calls from partially trusted callers (APTCA).</span></span> <span data-ttu-id="2d9d9-144">[!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] 用に開発されたコードには、常にレベル 2 の透過性を使用します。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-144">For code that is developed for the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], always use level 2 transparency.</span></span>  
  
### <a name="level-2-transparency"></a><span data-ttu-id="2d9d9-145">レベル 2 の透過性</span><span class="sxs-lookup"><span data-stu-id="2d9d9-145">Level 2 Transparency</span></span>  
 <span data-ttu-id="2d9d9-146">レベル 2 の透過性は、[!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] で導入されました。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-146">Level 2 transparency was introduced in the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)].</span></span> <span data-ttu-id="2d9d9-147">このモデルには、透過的なコード、セキュリティ セーフ クリティカル コード、およびセキュリティ クリティカル コードの 3 つの基本思想があります。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-147">The three tenets of this model are transparent code, security-safe-critical code, and security-critical code.</span></span>  
  
-   <span data-ttu-id="2d9d9-148">透過的なコードは、付与されているアクセス許可に関係なく (完全信頼を含む)、他の透過的なコードまたはセキュリティ セーフ クリティカル コードのみを呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-148">Transparent code, regardless of the permissions it is granted (including full trust), can call only other transparent code or security-safe-critical code.</span></span> <span data-ttu-id="2d9d9-149">コードが部分的に信頼されている場合は、ドメインのアクセス許可セットで許可されるアクションのみを実行できます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-149">If the code is partially trusted, it can only perform actions that are allowed by the domain’s permission set.</span></span> <span data-ttu-id="2d9d9-150">透過的なコードでは、次のアクションは実行できません。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-150">Transparent code cannot do the following:</span></span>  
  
    -   <span data-ttu-id="2d9d9-151">特権の <xref:System.Security.CodeAccessPermission.Assert%2A> 操作または昇格を実行する。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-151">Perform an <xref:System.Security.CodeAccessPermission.Assert%2A> operation or elevation of privilege.</span></span>  
  
    -   <span data-ttu-id="2d9d9-152">アンセーフ コードまたは検証不可能なコードを含める。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-152">Contain unsafe or unverifiable code.</span></span>  
  
    -   <span data-ttu-id="2d9d9-153">クリティカル コードを直接呼び出す。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-153">Directly call critical code.</span></span>  
  
    -   <span data-ttu-id="2d9d9-154">ネイティブ コードまたは <xref:System.Security.SuppressUnmanagedCodeSecurityAttribute> 属性を持つコードを呼び出す。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-154">Call native code or code that has the <xref:System.Security.SuppressUnmanagedCodeSecurityAttribute> attribute.</span></span>  
  
    -   <span data-ttu-id="2d9d9-155"><xref:System.Security.Permissions.SecurityAction.LinkDemand> によって保護されているメンバーを呼び出す。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-155">Call a member that is protected by a <xref:System.Security.Permissions.SecurityAction.LinkDemand>.</span></span>  
  
    -   <span data-ttu-id="2d9d9-156">クリティカルな型を継承する。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-156">Inherit from critical types.</span></span>  
  
     <span data-ttu-id="2d9d9-157">また、透過的メソッドでは、クリティカルな仮想メソッドをオーバーライドしたりクリティカルなインターフェイス メソッドを実装したりすることはできません。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-157">In addition, transparent methods cannot override critical virtual methods or implement critical interface methods.</span></span>  
  
-   <span data-ttu-id="2d9d9-158">セキュリティ セーフ クリティカル コードは完全に信頼されていますが、透過的なコードから呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-158">Security-safe-critical code is fully trusted but is callable by transparent code.</span></span> <span data-ttu-id="2d9d9-159">完全に信頼されているコードの限られた領域しか外部に公開されないようにします。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-159">It exposes a limited surface area of full-trust code.</span></span> <span data-ttu-id="2d9d9-160">正確性とセキュリティの検証はセーフ クリティカル コードで実行されます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-160">Correctness and security verifications happen in safe-critical code.</span></span>  
  
-   <span data-ttu-id="2d9d9-161">セキュリティ クリティカル コードは任意のコードを呼び出すことができ、完全に信頼されていますが、透過的なコードから呼び出すことはできません。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-161">Security-critical code can call any code and is fully trusted, but it cannot be called by transparent code.</span></span>  
  
### <a name="level-1-transparency"></a><span data-ttu-id="2d9d9-162">レベル 1 の透過性</span><span class="sxs-lookup"><span data-stu-id="2d9d9-162">Level 1 Transparency</span></span>  
 <span data-ttu-id="2d9d9-163">レベル 1 の透過性モデルは、開発者がセキュリティ監査の対象になるコードの量を減らすことができるようにするために、.NET Framework Version 2.0 で導入されました。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-163">The level 1 transparency model was introduced in the .NET Framework version 2.0 to enable developers to reduce the amount of code that is subject to a security audit.</span></span> <span data-ttu-id="2d9d9-164">レベル 1 の透過性は Version 2.0 で一般に公開されましたが、主に Microsoft 内でのみセキュリティ監査を目的として使用されていました。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-164">Although level 1 transparency was publicly available in version 2.0, it was primarily used only within Microsoft for security auditing purposes.</span></span> <span data-ttu-id="2d9d9-165">注釈を付けることで、セキュリティ昇格やその他の信頼されたアクションを実行できる型およびメンバー (セキュリティ クリティカル) と、実行できない型およびメンバー (透過的セキュリティ) を宣言できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-165">Through annotations, developers are able to declare which types and members can perform security elevations and other trusted actions (security-critical) and which cannot (security-transparent).</span></span> <span data-ttu-id="2d9d9-166">透過的なコードでは、高度なセキュリティ監査は不要です。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-166">Code that is identified as transparent does not require a high degree of security auditing.</span></span> <span data-ttu-id="2d9d9-167">レベル 1 の透過性は、透過性の適用がアセンブリ内に限定されることを示します。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-167">Level 1 transparency states that the transparency enforcement is limited to within the assembly.</span></span> <span data-ttu-id="2d9d9-168">つまり、セキュリティ クリティカルなパブリック型またはメンバーは、アセンブリ内でのみセキュリティ クリティカルです。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-168">In other words, any public types or members that are identified as security-critical are security-critical only within the assembly.</span></span> <span data-ttu-id="2d9d9-169">アセンブリの外部から呼び出される場合にこのような型およびメンバーにセキュリティを適用するには、完全な信頼のためのリンク確認要求を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-169">If you want to enforce security for those types and members when they are called from outside the assembly, you must use link demands for full trust.</span></span> <span data-ttu-id="2d9d9-170">使用しないと、パブリックに参照できるセキュリティ クリティカルな型およびメンバーは、セキュリティ セーフ クリティカルとして扱われ、部分的に信頼されているコードによってアセンブリの外部から呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-170">If you do not, publicly visible security-critical types and members are treated as security-safe-critical and can be called by partially trusted code outside the assembly.</span></span>  
  
 <span data-ttu-id="2d9d9-171">レベル 1 の透過性モデルには次の制限があります。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-171">The level 1 transparency model has the following limitations:</span></span>  
  
-   <span data-ttu-id="2d9d9-172">セキュリティ クリティカルなパブリック型およびパブリック メンバーは、透過的セキュリティ コードからアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-172">Security-critical types and members that are public are accessible from security-transparent code.</span></span>  
  
-   <span data-ttu-id="2d9d9-173">透過性注釈はアセンブリ内でのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-173">The transparency annotations are enforced only within an assembly.</span></span>  
  
-   <span data-ttu-id="2d9d9-174">セキュリティ クリティカルな型およびメンバーでは、アセンブリの外部から呼び出される場合にセキュリティを適用するには、リンク確認要求を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-174">Security-critical types and members must use link demands to enforce security for calls from outside the assembly.</span></span>  
  
-   <span data-ttu-id="2d9d9-175">継承規則は適用されません。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-175">Inheritance rules are not enforced.</span></span>  
  
-   <span data-ttu-id="2d9d9-176">透過的なコードは、完全に信頼して実行されると危険性をもたらす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-176">The potential exists for transparent code to do harmful things when run in full trust.</span></span>  
  
 [<span data-ttu-id="2d9d9-177">ページのトップへ</span><span class="sxs-lookup"><span data-stu-id="2d9d9-177">Back to top</span></span>](#top)  
  
<a name="enforcement"></a>   
## <a name="transparency-enforcement"></a><span data-ttu-id="2d9d9-178">透過性の適用</span><span class="sxs-lookup"><span data-stu-id="2d9d9-178">Transparency Enforcement</span></span>  
 <span data-ttu-id="2d9d9-179">透過性規則は、透過性が計算されるまで適用されません。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-179">Transparency rules are not enforced until transparency is calculated.</span></span> <span data-ttu-id="2d9d9-180">このとき、透過性規則に違反すると、<xref:System.InvalidOperationException> がスローされます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-180">At that time, an <xref:System.InvalidOperationException> is thrown if a transparency rule is violated.</span></span> <span data-ttu-id="2d9d9-181">透過性が計算されるタイミングは、複数の要因によって左右されるので予測できません。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-181">The time that transparency is calculated depends on multiple factors and cannot be predicted.</span></span> <span data-ttu-id="2d9d9-182">できる限り遅く計算されます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-182">It is calculated as late as possible.</span></span> <span data-ttu-id="2d9d9-183">[!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] では、アセンブリ レベルの透過性の計算は、.NET Framework 2.0 よりも早く実行されます。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-183">In the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], assembly-level transparency calculation occurs sooner than it does in the .NET Framework 2.0.</span></span> <span data-ttu-id="2d9d9-184">保証されるのは、必要になるまでに透過性の計算が行われるということだけです。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-184">The only guarantee is that transparency calculation will occur by the time it is needed.</span></span> <span data-ttu-id="2d9d9-185">これは、メソッドがコンパイルされてメソッドのエラーが検出される時点が JIT コンパイラで変更される方法に似ています。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-185">This is similar to how the just-in-time (JIT) compiler can change the point when a method is compiled and any errors in that method are detected.</span></span> <span data-ttu-id="2d9d9-186">透過性の計算は、コードに透過性エラーがない場合は目に見えません。</span><span class="sxs-lookup"><span data-stu-id="2d9d9-186">Transparency calculation is invisible if your code does not have any transparency errors.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2d9d9-187">参照</span><span class="sxs-lookup"><span data-stu-id="2d9d9-187">See Also</span></span>  
 [<span data-ttu-id="2d9d9-188">セキュリティ透過的なコード、レベル 1</span><span class="sxs-lookup"><span data-stu-id="2d9d9-188">Security-Transparent Code, Level 1</span></span>](../../../docs/framework/misc/security-transparent-code-level-1.md)  
 [<span data-ttu-id="2d9d9-189">透過的セキュリティ コード、レベル 2</span><span class="sxs-lookup"><span data-stu-id="2d9d9-189">Security-Transparent Code, Level 2</span></span>](../../../docs/framework/misc/security-transparent-code-level-2.md)
