---
title: "データ サービス コンテキストの管理 (WCF Data Services)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 15b19d09-7de7-4638-9556-6ef396cc45ec
caps.latest.revision: "6"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 50d523fdd0498aef7e662af5f4dc41b2394dcf42
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/02/2017
---
# <a name="managing-the-data-service-context-wcf-data-services"></a><span data-ttu-id="9f134-102">データ サービス コンテキストの管理 (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="9f134-102">Managing the Data Service Context (WCF Data Services)</span></span>
<span data-ttu-id="9f134-103"><xref:System.Data.Services.Client.DataServiceContext> クラスは、特定のデータ サービスに対してサポートされている操作をカプセル化します。</span><span class="sxs-lookup"><span data-stu-id="9f134-103">The <xref:System.Data.Services.Client.DataServiceContext> class encapsulates operations that are supported against a specified data service.</span></span> <span data-ttu-id="9f134-104">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] サービスはステートレスですが、コンテキストはステートレスではありません。</span><span class="sxs-lookup"><span data-stu-id="9f134-104">Although [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] services are stateless, the context is not.</span></span> <span data-ttu-id="9f134-105">したがって、使用することができます、<xref:System.Data.Services.Client.DataServiceContext>変更管理などの機能をサポートするために、データ サービスとのやり取りの間でクライアントの状態を維持するクラス。</span><span class="sxs-lookup"><span data-stu-id="9f134-105">Therefore, you can use the <xref:System.Data.Services.Client.DataServiceContext> class to maintain state on the client between interactions with the data service in order to support features such as change management.</span></span> <span data-ttu-id="9f134-106">このクラスは、ID の管理と変更の追跡も行います。</span><span class="sxs-lookup"><span data-stu-id="9f134-106">This class also manages identities and tracks changes.</span></span>  
  
## <a name="merge-options-and-identity-resolution"></a><span data-ttu-id="9f134-107">マージ オプションおよび ID 解決</span><span class="sxs-lookup"><span data-stu-id="9f134-107">Merge Options and Identity Resolution</span></span>  
 <span data-ttu-id="9f134-108"><xref:System.Data.Services.Client.DataServiceQuery%601> が実行されると、応答フィードのエンティティはオブジェクトに具体化されます。</span><span class="sxs-lookup"><span data-stu-id="9f134-108">When a <xref:System.Data.Services.Client.DataServiceQuery%601> is executed, the entities in the response feed are materialized into objects.</span></span> <span data-ttu-id="9f134-109">詳細については、次を参照してください。[オブジェクトの具体化](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md)です。</span><span class="sxs-lookup"><span data-stu-id="9f134-109">For more information, see [Object Materialization](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="9f134-110">応答メッセージのエントリがオブジェクトに具体化される方法は、ID 解決に基づいて実行され、クエリが実行された際のマージ オプションによって決まります。</span><span class="sxs-lookup"><span data-stu-id="9f134-110">The way in which entries in a response message are materialized into objects is performed based on identity resolution and depends on the merge option under which the query was executed.</span></span> <span data-ttu-id="9f134-111">複数のクエリまたは読み込み要求が単一の <xref:System.Data.Services.Client.DataServiceContext> のスコープで実行される場合、[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] クライアントは特定のキー値を持つオブジェクトの単一のインスタンスのみを追跡します。</span><span class="sxs-lookup"><span data-stu-id="9f134-111">When multiple queries or load requests are executed in the scope of a single <xref:System.Data.Services.Client.DataServiceContext>, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client only tracks a single instance of an object that has a specific key value.</span></span> <span data-ttu-id="9f134-112">このキーは、ID 解決の実行に使用され、エンティティを一意に識別します。</span><span class="sxs-lookup"><span data-stu-id="9f134-112">This key, which is used to perform identity resolution, uniquely identifies an entity.</span></span>  
  
 <span data-ttu-id="9f134-113">既定では、クライアントは <xref:System.Data.Services.Client.DataServiceContext> によってまだ追跡されていないエンティティのオブジェクトに応答フィードのエントリを具体化するだけです。</span><span class="sxs-lookup"><span data-stu-id="9f134-113">By default, the client only materializes an entry in the response feed into an object for entities that are not already being tracked by the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="9f134-114">これは、既にキャッシュ内にあるオブジェクトに対する変更は上書きされないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="9f134-114">This means that changes to objects already in the cache are not overwritten.</span></span> <span data-ttu-id="9f134-115">この動作は、クエリおよび読み込み操作に <xref:System.Data.Services.Client.MergeOption> 値を指定することによって制御されます。</span><span class="sxs-lookup"><span data-stu-id="9f134-115">This behavior is controlled by specifying a <xref:System.Data.Services.Client.MergeOption> value for queries and load operations.</span></span> <span data-ttu-id="9f134-116">このオプションを指定するには、<xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> の <xref:System.Data.Services.Client.DataServiceContext> プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="9f134-116">This option is specified by setting the <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> property on the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="9f134-117">既定のマージ オプションの値は <xref:System.Data.Services.Client.MergeOption.AppendOnly> です。</span><span class="sxs-lookup"><span data-stu-id="9f134-117">The default merge option value is <xref:System.Data.Services.Client.MergeOption.AppendOnly>.</span></span> <span data-ttu-id="9f134-118">この既定値を設定した場合、まだ追跡されていないエンティティのオブジェクトのみが具体化されます。これは、既存のオブジェクトが上書きされないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="9f134-118">This only materializes objects for entities that are not already being tracked, which means that existing objects are not overwritten.</span></span> <span data-ttu-id="9f134-119">クライアントのオブジェクトに対する変更がデータ サービスからの更新によって上書きされないようにするもう 1 つの方法は、<xref:System.Data.Services.Client.MergeOption.PreserveChanges> を指定する方法です。</span><span class="sxs-lookup"><span data-stu-id="9f134-119">Another way to prevent changes to objects on the client from being overwritten by updates from the data service is to specify <xref:System.Data.Services.Client.MergeOption.PreserveChanges>.</span></span> <span data-ttu-id="9f134-120"><xref:System.Data.Services.Client.MergeOption.OverwriteChanges> を指定した場合、クライアントのオブジェクトの値は、既に変更が加えられていても、応答フィードのエントリの最新の値によって置換されます。</span><span class="sxs-lookup"><span data-stu-id="9f134-120">When you specify <xref:System.Data.Services.Client.MergeOption.OverwriteChanges>, values of objects on the client are replaced by the latest values from the entries in the response feed, even if changes have already been made to these objects.</span></span> <span data-ttu-id="9f134-121"><xref:System.Data.Services.Client.MergeOption.NoTracking> マージ オプションを使用する場合、<xref:System.Data.Services.Client.DataServiceContext> はクライアント オブジェクトに加えられた変更をデータ サービスに送信できません。</span><span class="sxs-lookup"><span data-stu-id="9f134-121">When a <xref:System.Data.Services.Client.MergeOption.NoTracking> merge option is used, the <xref:System.Data.Services.Client.DataServiceContext> cannot send changes made on client objects to the data service.</span></span> <span data-ttu-id="9f134-122">このオプションを使用すると、変更は常にデータ サービスの値によって上書きされます。</span><span class="sxs-lookup"><span data-stu-id="9f134-122">With this option, changes are always overwritten with values from the data service.</span></span>  
  
## <a name="managing-concurrency"></a><span data-ttu-id="9f134-123">同時実行の管理</span><span class="sxs-lookup"><span data-stu-id="9f134-123">Managing Concurrency</span></span>  
 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="9f134-124">により更新の競合を検出するためにデータ サービスでは、オプティミスティック同時実行制御をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="9f134-124"> supports optimistic concurrency that enables the data service to detect update conflicts.</span></span> <span data-ttu-id="9f134-125">データ サービス プロバイダーは、データ サービスで同時実行トークンを使用してエンティティへの変更をチェックするように構成できます。</span><span class="sxs-lookup"><span data-stu-id="9f134-125">The data service provider can be configured in such a way that the data service checks for changes to entities by using a concurrency token.</span></span> <span data-ttu-id="9f134-126">このトークンには、リソースが変更されているかどうかを決定するためにデータ サービスによって検証されるエンティティ型の 1 つ以上のプロパティが含まれています。</span><span class="sxs-lookup"><span data-stu-id="9f134-126">This token includes one or more properties of an entity type that are validated by the data service to determine whether a resource has changed.</span></span> <span data-ttu-id="9f134-127">要求と、データ サービスからの応答の eTag ヘッダーに含まれている、同時実行トークンはによって管理されている、[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]クライアント。</span><span class="sxs-lookup"><span data-stu-id="9f134-127">Concurrency tokens, which are included in the eTag header of requests to and responses from the data service, are managed for you by the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client.</span></span> <span data-ttu-id="9f134-128">詳細については、次を参照してください。[データ サービスの更新](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md)です。</span><span class="sxs-lookup"><span data-stu-id="9f134-128">For more information, see [Updating the Data Service](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="9f134-129"><xref:System.Data.Services.Client.DataServiceContext> は、<xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>、<xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A>、および <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> を使用して手動で報告しているか、または <xref:System.Data.Services.Client.DataServiceCollection%601> によって報告されているオブジェクトへの変更を追跡します。</span><span class="sxs-lookup"><span data-stu-id="9f134-129">The <xref:System.Data.Services.Client.DataServiceContext> tracks changes made to objects that have been reported manually by using <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A>, and <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A>, or by a <xref:System.Data.Services.Client.DataServiceCollection%601>.</span></span> <span data-ttu-id="9f134-130"><xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> メソッドを呼び出すと、クライアントはデータ サービスに変更を送り返します。</span><span class="sxs-lookup"><span data-stu-id="9f134-130">When the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called, the client sends changes back to the data service.</span></span> <span data-ttu-id="9f134-131"><xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> は、クライアントでのデータ変更がデータ サービスでの変更と競合する場合に失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9f134-131"><xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> can fail when data changes in the client conflict with changes in the data service.</span></span> <span data-ttu-id="9f134-132">このような状況が発生した場合、エンティティ リソースに対してクエリを再度実行し、更新データを受信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f134-132">When this occurs, you must query for the entity resource again to receive the update data.</span></span> <span data-ttu-id="9f134-133">データ サービスの変更を上書きするには、<xref:System.Data.Services.Client.MergeOption.PreserveChanges> マージ オプションを使用してクエリを実行します。</span><span class="sxs-lookup"><span data-stu-id="9f134-133">To overwrite changes in the data service, execute the query using the <xref:System.Data.Services.Client.MergeOption.PreserveChanges> merge option.</span></span> <span data-ttu-id="9f134-134"><xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> を再度呼び出すと、データ サービスのリソースに対してその他の変更がまだ行われていない場合に限り、クライアントに保存されている変更がデータ サービスに永続化されます。</span><span class="sxs-lookup"><span data-stu-id="9f134-134">When you call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> again, the changes preserved on the client are persisted to the data service, as long as other changes have not already been made to the resource in the data service.</span></span>  
  
## <a name="saving-changes"></a><span data-ttu-id="9f134-135">変更の保存</span><span class="sxs-lookup"><span data-stu-id="9f134-135">Saving Changes</span></span>  
 <span data-ttu-id="9f134-136">変更は、<xref:System.Data.Services.Client.DataServiceContext> インスタンスで追跡されますが、サーバーには直ちに送信されません。</span><span class="sxs-lookup"><span data-stu-id="9f134-136">Changes are tracked in the <xref:System.Data.Services.Client.DataServiceContext> instance but not sent to the server immediately.</span></span> <span data-ttu-id="9f134-137">指定されたアクティビティに対して必要な変更が完了した後、<xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> を呼び出して、すべての変更をデータ サービスに送信します。</span><span class="sxs-lookup"><span data-stu-id="9f134-137">After you are finished with the required changes for a specified activity, call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> to submit all the changes to the data service.</span></span> <span data-ttu-id="9f134-138"><xref:System.Data.Services.Client.DataServiceResponse> 操作が完了した後、<xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> オブジェクトが返されます。</span><span class="sxs-lookup"><span data-stu-id="9f134-138">A <xref:System.Data.Services.Client.DataServiceResponse> object is returned after the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> operation is complete.</span></span> <span data-ttu-id="9f134-139"><xref:System.Data.Services.Client.DataServiceResponse> オブジェクトには、<xref:System.Data.Services.Client.OperationResponse> オブジェクトのシーケンスが含まれます。さらに、これらの各オブジェクトには、永続化または試行された変更を表す、<xref:System.Data.Services.Client.EntityDescriptor> インスタンスまたは <xref:System.Data.Services.Client.LinkDescriptor> インスタンスのシーケンスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="9f134-139">The <xref:System.Data.Services.Client.DataServiceResponse> object includes a sequence of <xref:System.Data.Services.Client.OperationResponse> objects that, in turn, contain a sequence of <xref:System.Data.Services.Client.EntityDescriptor> or <xref:System.Data.Services.Client.LinkDescriptor> instances that represent the changes persisted or attempted.</span></span> <span data-ttu-id="9f134-140">データ サービス内でエンティティが作成または変更されると、前の例で生成された <xref:System.Data.Services.Client.EntityDescriptor> 値のようなサーバー生成のプロパティ値も含めて、更新されたエンティティへの参照が `ProductID` に含められます。</span><span class="sxs-lookup"><span data-stu-id="9f134-140">When an entity is created or modified in the data service, the <xref:System.Data.Services.Client.EntityDescriptor> includes a reference to the updated entity, including any server-generated property values, such as the generated `ProductID` value in the previous example.</span></span> <span data-ttu-id="9f134-141">クライアント ライブラリは、これらの新しい値を持つように [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] オブジェクトを自動的に更新します。</span><span class="sxs-lookup"><span data-stu-id="9f134-141">The client library automatically updates the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] object to have these new values.</span></span>  
  
 <span data-ttu-id="9f134-142">挿入操作と更新操作を適切に実行するため、その操作に関連付けられている <xref:System.Data.Services.Client.EntityDescriptor> オブジェクトまたは <xref:System.Data.Services.Client.LinkDescriptor> オブジェクトの状態プロパティが <xref:System.Data.Services.Client.EntityStates.Unchanged> に設定され、新しい値は <xref:System.Data.Services.Client.MergeOption.OverwriteChanges> を使用してマージされます。</span><span class="sxs-lookup"><span data-stu-id="9f134-142">For successful insert and update operations, the state property of the <xref:System.Data.Services.Client.EntityDescriptor> or <xref:System.Data.Services.Client.LinkDescriptor> object associated with the operation is set to <xref:System.Data.Services.Client.EntityStates.Unchanged> and the new values are merged by using <xref:System.Data.Services.Client.MergeOption.OverwriteChanges>.</span></span> <span data-ttu-id="9f134-143">データ サービス内で挿入、更新、または削除操作が失敗した場合、エンティティ状態は、<xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> が呼び出される前と同じままになり、<xref:System.Data.Services.Client.OperationResponse.Error%2A> の <xref:System.Data.Services.Client.OperationResponse> プロパティは、エラーに関する情報を含む <xref:System.Data.Services.Client.DataServiceRequestException> に設定されます。</span><span class="sxs-lookup"><span data-stu-id="9f134-143">When an insert, update, or delete operation fails in the data service, the entity state remains the same as it was before <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> was called, and the <xref:System.Data.Services.Client.OperationResponse.Error%2A> property of the <xref:System.Data.Services.Client.OperationResponse> is set to an <xref:System.Data.Services.Client.DataServiceRequestException> that contains information about the error.</span></span> <span data-ttu-id="9f134-144">詳細については、次を参照してください。[データ サービスの更新](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md)です。</span><span class="sxs-lookup"><span data-stu-id="9f134-144">For more information, see [Updating the Data Service](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).</span></span>  
  
### <a name="setting-the-http-method-for-updates"></a><span data-ttu-id="9f134-145">更新用の HTTP メソッドの設定</span><span class="sxs-lookup"><span data-stu-id="9f134-145">Setting the HTTP Method for Updates</span></span>  
 <span data-ttu-id="9f134-146">既定では、更新は、.NET Framework クライアント ライブラリから既存のエンティティに MERGE 要求として送信されます。</span><span class="sxs-lookup"><span data-stu-id="9f134-146">By default, the .NET Framework client library sends updates to existing entities as MERGE requests.</span></span> <span data-ttu-id="9f134-147">MERGE 要求では、エンティティの選択されたプロパティが更新されますが、クライアントは、常に、変更されていないプロパティを含むすべてのプロパティを MERGE 要求に含めます。</span><span class="sxs-lookup"><span data-stu-id="9f134-147">A MERGE request updates selected properties of the entity; however the client always includes all properties in the MERGE request, even properties that have not changed.</span></span> <span data-ttu-id="9f134-148">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] プロトコルは、エンティティを更新する PUT 要求の送信もサポートしています。</span><span class="sxs-lookup"><span data-stu-id="9f134-148">The [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol also supports sending PUT requests to update entities.</span></span> <span data-ttu-id="9f134-149">PUT 要求では、既存のエンティティが、クライアントからのプロパティ値を含むエンティティの新しいインスタンスによって本質的に置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="9f134-149">In a PUT request, an existing entity is essentially replaced with a new instance of the entity with property values from the client.</span></span> <span data-ttu-id="9f134-150">PUT 要求を使用するには、<xref:System.Data.Services.Client.SaveChangesOptions.ReplaceOnUpdate> を呼び出すときに <xref:System.Data.Services.Client.SaveChangesOptions> フラグを <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> 列挙体に設定します。</span><span class="sxs-lookup"><span data-stu-id="9f134-150">To use PUT requests, set the <xref:System.Data.Services.Client.SaveChangesOptions.ReplaceOnUpdate> flag on the <xref:System.Data.Services.Client.SaveChangesOptions> enumeration when calling <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="9f134-151">クライアントがエンティティの一部のプロパティを認識していない場合、PUT 要求は MERGE 要求とは異なる動作になります。</span><span class="sxs-lookup"><span data-stu-id="9f134-151">A PUT request will behave differently than a MERGE request when the client does not know about all properties of the entity.</span></span> <span data-ttu-id="9f134-152">この状況は、クライアントでエンティティ型を新しい型に射影する場合に発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="9f134-152">This might occur when projecting an entity type into a new type on the client.</span></span> <span data-ttu-id="9f134-153">また、新しいプロパティがサービス データ モデルのエンティティに追加されており、このようなクライアントのマッピング エラーを無視するように <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> の <xref:System.Data.Services.Client.DataServiceContext> プロパティが `true` に設定されている場合にも発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="9f134-153">It might also occur when new properties have been added to the entity in the service data model and the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property on the <xref:System.Data.Services.Client.DataServiceContext> is set to `true` to ignore such client mapping errors.</span></span> <span data-ttu-id="9f134-154">この場合、PUT 要求では、クライアントが認識していないすべてのプロパティが既定値にリセットされます。</span><span class="sxs-lookup"><span data-stu-id="9f134-154">In these cases, a PUT request will reset any properties that are unknown to the client to their default values.</span></span>  
  
### <a name="post-tunneling"></a><span data-ttu-id="9f134-155">POST トンネリング</span><span class="sxs-lookup"><span data-stu-id="9f134-155">POST Tunneling</span></span>  
 <span data-ttu-id="9f134-156">既定では、クライアント ライブラリは、作成、読み取り、更新、および削除要求を、POST、GET、PUT/MERGE/PATCH、および DELETE の対応する HTTP メソッドを使用して、[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] サービスに送信します。</span><span class="sxs-lookup"><span data-stu-id="9f134-156">By default, the client library sends create, read, update, and delete requests to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service by using the corresponding HTTP methods of POST, GET, PUT/MERGE/PATCH, and DELETE.</span></span> <span data-ttu-id="9f134-157">これは、Representational State Transfer (REST) の基本原則に沿った動作です。</span><span class="sxs-lookup"><span data-stu-id="9f134-157">This upholds the basic principles of Representational State Transfer (REST).</span></span> <span data-ttu-id="9f134-158">ただし、すべての Web サーバー実装で HTTP メソッドの完全なセットがサポートされるとは限りません。</span><span class="sxs-lookup"><span data-stu-id="9f134-158">However, not every Web server implementation supports the full set of HTTP methods.</span></span> <span data-ttu-id="9f134-159">場合によっては、サポートされているメソッドが GET と POST のみに制限されていることもあります。</span><span class="sxs-lookup"><span data-stu-id="9f134-159">In some cases, the supported methods might be restricted to just GET and POST.</span></span> <span data-ttu-id="9f134-160">このような状況は、ファイアウォールのような仲介物が特定のメソッドの要求をブロックしている場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="9f134-160">This can happen when an intermediary, like a firewall, blocks requests with certain methods.</span></span> <span data-ttu-id="9f134-161">GET メソッドと POST メソッドは一般的にサポートされているメソッドであるため、[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] では、サポートされていない HTTP メソッドを POST 要求を使用して実行する方法を規定しています。</span><span class="sxs-lookup"><span data-stu-id="9f134-161">Because the GET and POST methods are most often supported, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] prescribes a way to execute any unsupported HTTP methods by using a POST request.</span></span> <span data-ttu-id="9f134-162">呼ばれる*メソッド トンネリング*または*POST トンネリング*、これにより、クライアント ユーザー設定で指定された実際のメソッドを POST 要求を送信する`X-HTTP-Method`ヘッダー。</span><span class="sxs-lookup"><span data-stu-id="9f134-162">Known as *method tunneling* or *POST tunneling*, this enables a client to send a POST request with the actual method specified in the custom `X-HTTP-Method` header.</span></span> <span data-ttu-id="9f134-163">要求の POST トンネリングを有効にするには、<xref:System.Data.Services.Client.DataServiceContext.UsePostTunneling%2A> インスタンスの <xref:System.Data.Services.Client.DataServiceContext> プロパティを `true` に設定します。</span><span class="sxs-lookup"><span data-stu-id="9f134-163">To enable POST tunneling for requests, set the <xref:System.Data.Services.Client.DataServiceContext.UsePostTunneling%2A> property on the <xref:System.Data.Services.Client.DataServiceContext> instance to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9f134-164">関連項目</span><span class="sxs-lookup"><span data-stu-id="9f134-164">See Also</span></span>  
 [<span data-ttu-id="9f134-165">WCF Data Services クライアント ライブラリ</span><span class="sxs-lookup"><span data-stu-id="9f134-165">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)  
 [<span data-ttu-id="9f134-166">データ サービスの更新</span><span class="sxs-lookup"><span data-stu-id="9f134-166">Updating the Data Service</span></span>](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md)  
 [<span data-ttu-id="9f134-167">非同期操作</span><span class="sxs-lookup"><span data-stu-id="9f134-167">Asynchronous Operations</span></span>](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)  
 [<span data-ttu-id="9f134-168">操作のバッチ処理</span><span class="sxs-lookup"><span data-stu-id="9f134-168">Batching Operations</span></span>](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md)
