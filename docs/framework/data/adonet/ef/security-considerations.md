---
title: "セキュリティに関する注意事項 (Entity Framework)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 84758642-9b72-4447-86f9-f831fef46962
caps.latest.revision: "4"
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.workload: dotnet
ms.openlocfilehash: 1c68fc09ca1ca50ec544e79ec6fb8bf00a1b09ee
ms.sourcegitcommit: ed26cfef4e18f6d93ab822d8c29f902cff3519d1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/17/2018
---
# <a name="security-considerations-entity-framework"></a><span data-ttu-id="6c4f0-102">セキュリティに関する注意事項 (Entity Framework)</span><span class="sxs-lookup"><span data-stu-id="6c4f0-102">Security Considerations (Entity Framework)</span></span>
<span data-ttu-id="6c4f0-103">このトピックでは、[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] アプリケーションの開発、配置、および実行に特有のセキュリティの注意点について説明します。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-103">This topic describes security considerations that are specific to developing, deploying, and running [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] applications.</span></span> <span data-ttu-id="6c4f0-104">このほかに、安全な [!INCLUDE[dnprdnshort](../../../../../includes/dnprdnshort-md.md)] アプリケーションを作成するための推奨事項にも従うようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-104">You should also follow recommendations for creating secure [!INCLUDE[dnprdnshort](../../../../../includes/dnprdnshort-md.md)] applications.</span></span> <span data-ttu-id="6c4f0-105">詳細については、次を参照してください。[セキュリティの概要](../../../../../docs/framework/data/adonet/security-overview.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-105">For more information, see [Security Overview](../../../../../docs/framework/data/adonet/security-overview.md).</span></span>  
  
## <a name="general-security-considerations"></a><span data-ttu-id="6c4f0-106">セキュリティについての全般的な考慮事項</span><span class="sxs-lookup"><span data-stu-id="6c4f0-106">General Security Considerations</span></span>  
 <span data-ttu-id="6c4f0-107">以下のセキュリティの注意点は、[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] を使用するすべてのアプリケーションに当てはまります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-107">The following security considerations apply to all applications that use the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span></span>  
  
#### <a name="use-only-trusted-data-source-providers"></a><span data-ttu-id="6c4f0-108">信頼できるデータ ソース プロバイダーのみを使用する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-108">Use only trusted data source providers.</span></span>  
 <span data-ttu-id="6c4f0-109">データ ソースと通信するためにはプロバイダーで次の処理が行われる必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-109">To communicate with the data source, a provider must do the following:</span></span>  
  
-   <span data-ttu-id="6c4f0-110">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] から接続文字列を取得する。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-110">Receive the connection string from the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span></span>  
  
-   <span data-ttu-id="6c4f0-111">コマンド ツリーをデータ ソースのネイティブ クエリ言語に変換する。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-111">Translate the command tree to the data source's native query language.</span></span>  
  
-   <span data-ttu-id="6c4f0-112">結果セットを組み立てて返す。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-112">Assemble and return result sets.</span></span>  
  
 <span data-ttu-id="6c4f0-113">ログオン操作の際には、ユーザーのパスワードに基づく情報が、基になるデータ ソースのネットワーク ライブラリを通じてサーバーに渡されます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-113">During the logon operation, information that is based on the user password is passed to the server through the network libraries of the underlying data source.</span></span> <span data-ttu-id="6c4f0-114">悪質なプロバイダーを使用すると、ユーザーの資格情報を盗まれたり、悪質なクエリを生成されたり、結果セットを改ざんされたりする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-114">A malicious provider can steal user credentials, generate malicious queries, or tamper with the result set.</span></span>  
  
#### <a name="encrypt-your-connection-to-protect-sensitive-data"></a><span data-ttu-id="6c4f0-115">接続を暗号化して機密データを保護する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-115">Encrypt your connection to protect sensitive data.</span></span>  
 <span data-ttu-id="6c4f0-116">データの暗号化は [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] では直接処理されません。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-116">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] does not directly handle data encryption.</span></span> <span data-ttu-id="6c4f0-117">ユーザーがパブリック ネットワーク経由でデータにアクセスする場合は、セキュリティを強化するためにアプリケーションでデータ ソースへの暗号化接続を確立する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-117">If users access data over a public network, your application should establish an encrypted connection to the data source to increase security.</span></span> <span data-ttu-id="6c4f0-118">詳細については、データ ソースのセキュリティ関連のドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-118">For more information, see the security-related documentation for your data source.</span></span> <span data-ttu-id="6c4f0-119">SQL Server データ ソースでは、次を参照してください。 [SQL Server への接続の暗号化](http://go.microsoft.com/fwlink/?LinkId=119544)です。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-119">For a SQL Server data source, see [Encrypting Connections to SQL Server](http://go.microsoft.com/fwlink/?LinkId=119544).</span></span>  
  
#### <a name="secure-the-connection-string"></a><span data-ttu-id="6c4f0-120">接続文字列を保護する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-120">Secure the connection string.</span></span>  
 <span data-ttu-id="6c4f0-121">アプリケーションのセキュリティを実現するうえで、データ ソースへのアクセスを保護することは、最も重要な目標の 1 つです。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-121">Protecting access to your data source is one of the most important goals when securing an application.</span></span> <span data-ttu-id="6c4f0-122">保護されていない接続文字列や適切に作成されていない接続文字列は脆弱性を招く原因になります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-122">A connection string presents a potential vulnerability if it is not secured or if it is improperly constructed.</span></span> <span data-ttu-id="6c4f0-123">接続情報をテキスト形式で保存したり、メモリ内に保持したりすると、システム全体のセキュリティが損なわれる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-123">When you store connection information in plain text or persist it in memory, you risk compromising your entire system.</span></span> <span data-ttu-id="6c4f0-124">接続文字列を保護するための推奨事項を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-124">The following are the recommended methods for securing connection strings:</span></span>  
  
-   <span data-ttu-id="6c4f0-125">SQL Server データ ソースで Windows 認証を使用する。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-125">Use Windows Authentication with a SQL Server data source.</span></span>  
  
     <span data-ttu-id="6c4f0-126">Windows 認証を使用して SQL Server データ ソースに接続する場合、接続文字列にログオンやパスワードの情報が含まれません。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-126">When you use Windows Authentication to connect to a SQL Server data source, the connection string does not contain logon and password information.</span></span>  
  
-   <span data-ttu-id="6c4f0-127">保護構成を使用して構成ファイル セクションを暗号化する。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-127">Encrypt configuration file sections using protected configuration.</span></span>  
  
     <span data-ttu-id="6c4f0-128">ASP.NET には、保護構成と呼ばれる、構成ファイルの機密情報を暗号化するための機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-128">ASP.NET provides a feature called protected configuration that enables you to encrypt sensitive information in a configuration file.</span></span> <span data-ttu-id="6c4f0-129">保護構成は、主に ASP.NET を想定して設計されたものですが、Windows アプリケーションの構成ファイル セクションを暗号化する目的でも使用できます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-129">Although primarily designed for ASP.NET, you can also use protected configuration to encrypt sections of configuration files in Windows applications.</span></span> <span data-ttu-id="6c4f0-130">新しい保護の構成機能の詳細については、次を参照してください。[暗号化の構成情報を使用して保護された構成](http://msdn.microsoft.com/library/51cdfe5b-9d82-458c-94ff-c551c4f38ed1)です。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-130">For a detailed description of the new protected configuration capabilities, see [Encrypting Configuration Information Using Protected Configuration](http://msdn.microsoft.com/library/51cdfe5b-9d82-458c-94ff-c551c4f38ed1).</span></span>  
  
-   <span data-ttu-id="6c4f0-131">セキュリティで保護された構成ファイルに接続文字列を格納する。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-131">Store connection strings in secured configuration files.</span></span>  
  
     <span data-ttu-id="6c4f0-132">接続文字列はソース コードに埋め込まないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-132">You should never embed connection strings in your source code.</span></span> <span data-ttu-id="6c4f0-133">接続文字列は構成ファイルに保存でき、そうすることで、アプリケーションのコードに接続文字列を組み込むことを避けられます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-133">You can store connection strings in configuration files, which eliminates the need to embed them in your application's code.</span></span> <span data-ttu-id="6c4f0-134">Entity Data Model ウィザードでは、接続文字列が既定でアプリケーション構成ファイルに保存されます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-134">By default, the Entity Data Model Wizard stores connection strings in the application configuration file.</span></span> <span data-ttu-id="6c4f0-135">不正なアクセスが行われないようにそのファイルをセキュリティで保護してください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-135">You must secure this file to prevent unauthorized access.</span></span>  
  
-   <span data-ttu-id="6c4f0-136">接続を動的に作成する場合は接続文字列ビルダーを使用する。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-136">Use connection string builders when dynamically creating connections.</span></span>  
  
     <span data-ttu-id="6c4f0-137">接続文字列を実行時に作成する必要がある場合は <xref:System.Data.EntityClient.EntityConnectionStringBuilder> クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-137">If you must construct connection strings at runtime, use the <xref:System.Data.EntityClient.EntityConnectionStringBuilder> class.</span></span> <span data-ttu-id="6c4f0-138">この文字列ビルダー クラスは、入力情報を検証して無効な入力情報をエスケープする処理により、接続文字列インジェクション攻撃の防止に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-138">This string builder class helps prevent connection string injection attacks by validating and escaping invalid input information.</span></span> <span data-ttu-id="6c4f0-139">詳細については、次を参照してください。[する方法: EntityConnection の接続文字列を構築](../../../../../docs/framework/data/adonet/ef/how-to-build-an-entityconnection-connection-string.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-139">For more information, see [How to: Build an EntityConnection Connection String](../../../../../docs/framework/data/adonet/ef/how-to-build-an-entityconnection-connection-string.md).</span></span> <span data-ttu-id="6c4f0-140">一部であるデータ ソース接続文字列を構築するために、適切な文字列ビルダー クラスを使用しても、[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]接続文字列。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-140">Also use the appropriate string builder class to construct the data source connection string that is part of the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] connection string.</span></span> <span data-ttu-id="6c4f0-141">ADO.NET プロバイダー用接続文字列ビルダーの詳細については、次を参照してください。[接続文字列ビルダー](../../../../../docs/framework/data/adonet/connection-string-builders.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-141">For information about connection string builders for ADO.NET providers, see [Connection String Builders](../../../../../docs/framework/data/adonet/connection-string-builders.md).</span></span>  
  
 <span data-ttu-id="6c4f0-142">詳細については、「[接続情報の保護](../../../../../docs/framework/data/adonet/protecting-connection-information.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-142">For more information, see [Protecting Connection Information](../../../../../docs/framework/data/adonet/protecting-connection-information.md).</span></span>  
  
#### <a name="do-not-expose-an-entityconnection-to-untrusted-users"></a><span data-ttu-id="6c4f0-143">信頼できないユーザーに EntityConnection を公開しない</span><span class="sxs-lookup"><span data-stu-id="6c4f0-143">Do not expose an EntityConnection to untrusted users.</span></span>  
 <span data-ttu-id="6c4f0-144"><xref:System.Data.EntityClient.EntityConnection> オブジェクトは、基になる接続の接続文字列を公開します。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-144">An <xref:System.Data.EntityClient.EntityConnection> object exposes the connection string of the underlying connection.</span></span> <span data-ttu-id="6c4f0-145"><xref:System.Data.EntityClient.EntityConnection> オブジェクトにアクセスできるユーザーは、基になる接続の <xref:System.Data.ConnectionState> を変更することもできます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-145">A user with access to an <xref:System.Data.EntityClient.EntityConnection> object can also change the <xref:System.Data.ConnectionState> of the underlying connection.</span></span> <span data-ttu-id="6c4f0-146"><xref:System.Data.EntityClient.EntityConnection> クラスはスレッド セーフではありません。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-146">The <xref:System.Data.EntityClient.EntityConnection> class is not thread safe.</span></span>  
  
#### <a name="do-not-pass-connections-outside-the-security-context"></a><span data-ttu-id="6c4f0-147">接続をセキュリティ コンテキストの外で渡さない</span><span class="sxs-lookup"><span data-stu-id="6c4f0-147">Do not pass connections outside the security context.</span></span>  
 <span data-ttu-id="6c4f0-148">接続が確立された後にその接続をセキュリティ コンテキストの外で渡さないでください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-148">After a connection has been established, you must not pass it outside the security context.</span></span> <span data-ttu-id="6c4f0-149">たとえば、接続を開くためのアクセス許可を持つスレッドが、接続をグローバルな場所に格納することは避けてください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-149">For example, one thread with permission to open a connection should not store the connection in a global location.</span></span> <span data-ttu-id="6c4f0-150">接続がグローバルな場所にあると、アクセス許可を明示的に与えられていない他の悪質なスレッドであっても、この開いている接続を使用することが可能になってしまいます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-150">If the connection is available in a global location, then another malicious thread can use the open connection without having that permission explicitly granted to it.</span></span>  
  
#### <a name="be-aware-that-logon-information-and-passwords-may-be-visible-in-a-memory-dump"></a><span data-ttu-id="6c4f0-151">メモリ ダンプからログオン情報やパスワードが漏洩する可能性がある</span><span class="sxs-lookup"><span data-stu-id="6c4f0-151">Be aware that logon information and passwords may be visible in a memory dump.</span></span>  
 <span data-ttu-id="6c4f0-152">データ ソースのログオンとパスワードの情報が接続文字列で渡されると、その情報はガベージ コレクションが行われるまでメモリに保持されます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-152">When data source logon and password information is supplied in the connection string, this information is maintained in memory until garbage collection reclaims the resources.</span></span> <span data-ttu-id="6c4f0-153">その結果、パスワードの文字列がいつメモリからなくなるのか判定できなくなります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-153">This makes it impossible to determine when a password string is no longer in memory.</span></span> <span data-ttu-id="6c4f0-154">アプリケーションがクラッシュした場合、重要なセキュリティ情報がメモリ ダンプ ファイルに含まれている可能性があります。メモリ ダンプ ファイルは、アプリケーションを実行しているユーザーと、コンピューターに対する管理アクセス権を持つすべてのユーザーが表示できます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-154">If an application crashes, a memory dump file may contain sensitive security information, and the user running the application and any user with administrative access to the computer can view the memory dump file.</span></span> <span data-ttu-id="6c4f0-155">Microsoft SQL Server への接続には Windows 認証を使用してください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-155">Use Windows Authentication for connections to Microsoft SQL Server.</span></span>  
  
#### <a name="grant-users-only-the-necessary-permissions-in-the-data-source"></a><span data-ttu-id="6c4f0-156">データ ソースでは必要なアクセス許可のみをユーザーに与える</span><span class="sxs-lookup"><span data-stu-id="6c4f0-156">Grant users only the necessary permissions in the data source.</span></span>  
 <span data-ttu-id="6c4f0-157">データ ソースの管理者は、必要なアクセス許可のみをユーザーに与えるようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-157">A data source administrator should grant only the necessary permissions to users.</span></span> <span data-ttu-id="6c4f0-158">[!INCLUDE[esql](../../../../../includes/esql-md.md)] では、データを変更する DML ステートメント (INSERT、UPDATE、DELETE など) はサポートされていませんが、データ ソースへの接続にアクセスすることはできます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-158">Even though [!INCLUDE[esql](../../../../../includes/esql-md.md)] does not support DML statements that modify data, such as INSERT, UPDATE, or DELETE, users can still access the connection to the data source.</span></span> <span data-ttu-id="6c4f0-159">悪質なユーザーによって、その接続を使用してデータ ソースのネイティブ言語で DML ステートメントを実行される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-159">A malicious user could use this connection to execute DML statements in the native language of the data source.</span></span>  
  
#### <a name="run-applications-with-the-minimum-permissions"></a><span data-ttu-id="6c4f0-160">最小限のアクセス許可でアプリケーションを実行する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-160">Run applications with the minimum permissions.</span></span>  
 <span data-ttu-id="6c4f0-161">マネージ アプリケーションを完全信頼のアクセス許可で実行できるようにすると、[!INCLUDE[dnprdnshort](../../../../../includes/dnprdnshort-md.md)] でアプリケーションのコンピューターへのアクセスが制限されなくなります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-161">When you allow a managed application to run with full-trust permission, the [!INCLUDE[dnprdnshort](../../../../../includes/dnprdnshort-md.md)] does not limit the application's access to your computer.</span></span> <span data-ttu-id="6c4f0-162">これは、システム全体を危険にさらすセキュリティの脆弱性の原因になります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-162">This may enable a security vulnerability in your application to compromise the entire system.</span></span> <span data-ttu-id="6c4f0-163">[!INCLUDE[dnprdnshort](../../../../../includes/dnprdnshort-md.md)] のコード アクセス セキュリティやその他のセキュリティ メカニズムを使用するには、部分信頼のアクセス許可を使用して、アプリケーションが機能するために必要な最小限のアクセス許可でアプリケーションを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-163">To use code access security and other security mechanisms in the [!INCLUDE[dnprdnshort](../../../../../includes/dnprdnshort-md.md)], you should run applications by using partial-trust permissions and with the minimum set of permissions that are needed to enable the application to function.</span></span> <span data-ttu-id="6c4f0-164">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] アプリケーションに必要な最小限のアクセス許可を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-164">The following code access permissions are the minimum permissions your [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] application needs:</span></span>  
  
-   <span data-ttu-id="6c4f0-165"><xref:System.Security.Permissions.FileIOPermission>: <xref:System.Security.Permissions.FileIOPermissionAccess.Write> (指定されたメタデータ ファイルを開くため) または <xref:System.Security.Permissions.FileIOPermissionAccess.PathDiscovery> (メタデータ ファイルのディレクトリを検索するため)。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-165"><xref:System.Security.Permissions.FileIOPermission>: <xref:System.Security.Permissions.FileIOPermissionAccess.Write> to open the specified metadata files or <xref:System.Security.Permissions.FileIOPermissionAccess.PathDiscovery> to search a directory for metadata files.</span></span>  
  
-   <span data-ttu-id="6c4f0-166"><xref:System.Security.Permissions.ReflectionPermission>: <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess> (LINQ to Entities クエリをサポートするため)。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-166"><xref:System.Security.Permissions.ReflectionPermission>: <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess> to support LINQ to Entities queries.</span></span>  
  
-   <span data-ttu-id="6c4f0-167"><xref:System.Transactions.DistributedTransactionPermission>: <xref:System.Security.Permissions.PermissionState.Unrestricted> (<xref:System.Transactions> の <xref:System.Transactions.Transaction> に参加するため)。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-167"><xref:System.Transactions.DistributedTransactionPermission>: <xref:System.Security.Permissions.PermissionState.Unrestricted> to enlist in a <xref:System.Transactions><xref:System.Transactions.Transaction>.</span></span>  
  
-   <span data-ttu-id="6c4f0-168"><xref:System.Security.Permissions.SecurityPermission>: <xref:System.Security.Permissions.SecurityPermissionFlag.SerializationFormatter> (<xref:System.Runtime.Serialization.ISerializable> インターフェイスを使用して例外をシリアル化するため)。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-168"><xref:System.Security.Permissions.SecurityPermission>: <xref:System.Security.Permissions.SecurityPermissionFlag.SerializationFormatter> to serialize exceptions by using the <xref:System.Runtime.Serialization.ISerializable> interface.</span></span>  
  
-   <span data-ttu-id="6c4f0-169">データベース接続を開くし、など、データベースに対するコマンドを実行するアクセス許可<xref:System.Data.SqlClient.SqlClientPermission>の[!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)]データベース。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-169">Permission to open a database connection and execute commands against the database, such as <xref:System.Data.SqlClient.SqlClientPermission> for a [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] database.</span></span>  
  
 <span data-ttu-id="6c4f0-170">詳細については、「[コード アクセス セキュリティと ADO.NET](../../../../../docs/framework/data/adonet/code-access-security.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-170">For more information, see [Code Access Security and ADO.NET](../../../../../docs/framework/data/adonet/code-access-security.md).</span></span>  
  
#### <a name="do-not-install-untrusted-applications"></a><span data-ttu-id="6c4f0-171">信頼できないアプリケーションをインストールしない</span><span class="sxs-lookup"><span data-stu-id="6c4f0-171">Do not install untrusted applications.</span></span>  
 <span data-ttu-id="6c4f0-172">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] ではセキュリティのアクセス許可が適用されません。ユーザーが指定したデータ オブジェクト コードは、信頼されているかどうかに関係なくインプロセスで呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-172">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] does not enforce any security permissions and will invoke any user-supplied data object code in process regardless of whether it is trusted or not.</span></span> <span data-ttu-id="6c4f0-173">データ ストアとアプリケーションでクライアントの認証および承認が行われるようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-173">Ensure that authentication and authorization of the client is performed by the data store and by your application.</span></span>  
  
#### <a name="restrict-access-to-all-configuration-files"></a><span data-ttu-id="6c4f0-174">すべての構成ファイルへのアクセスを制限する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-174">Restrict access to all configuration files.</span></span>  
 <span data-ttu-id="6c4f0-175">管理者が enterprisesec.config、security.config、machine.conf、するなど、アプリケーションの構成を指定するすべてのファイルおよびアプリケーション構成ファイルへの書き込みアクセスを制限する必要があります\<*アプリケーション*>..exe.config に変更します。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-175">An administrator must restrict write access to all files that specify configuration for an application, including to enterprisesec.config, security.config, machine.conf, and the application configuration file \<*application*>.exe.config.</span></span>  
  
 <span data-ttu-id="6c4f0-176">app.config ではプロバイダーの不変名を変更できます。クライアント アプリケーションは、強力な名前を使用して標準のプロバイダー ファクトリ モデルを通じて基になるプロバイダーにアクセスする責任を負う必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-176">The provider invariant name is modifiable in the app.config. The client application must take responsibility for accessing the underlying provider through the standard provider factory model by using a strong name.</span></span>  
  
#### <a name="restrict-permissions-to-the-model-and-mapping-files"></a><span data-ttu-id="6c4f0-177">モデル ファイルとマッピング ファイルへのアクセス許可を制限する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-177">Restrict permissions to the model and mapping files.</span></span>  
 <span data-ttu-id="6c4f0-178">管理者は、モデル ファイルとマッピング ファイル (.edmx、.csdl、.ssdl、および .msl) への書き込みアクセスを、モデルやマッピングを変更するユーザーのみに制限する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-178">An administrator must restrict write access to the model and mapping files (.edmx, .csdl, .ssdl, and .msl) to only users who modify the model or mappings.</span></span> <span data-ttu-id="6c4f0-179">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]実行時にのみこれらのファイルへの読み取りアクセスが必要です。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-179">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] only requires read access to these files at run time.</span></span> <span data-ttu-id="6c4f0-180">そのほか、[!INCLUDE[adonet_edm](../../../../../includes/adonet-edm-md.md)] ツールによって生成されるオブジェクト レイヤーとプリコンパイル ビューのソース コード ファイルへのアクセスを制限する必要もあります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-180">An administrator should also restrict access to object layer and pre-compiled view source code files that are generated by the [!INCLUDE[adonet_edm](../../../../../includes/adonet-edm-md.md)] tools.</span></span>  
  
## <a name="security-considerations-for-queries"></a><span data-ttu-id="6c4f0-181">クエリのセキュリティに関する注意点</span><span class="sxs-lookup"><span data-stu-id="6c4f0-181">Security Considerations for Queries</span></span>  
 <span data-ttu-id="6c4f0-182">概念モデルのクエリを実行する際は、セキュリティに関して次の点に注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-182">The following security considerations apply when querying a conceptual model.</span></span> <span data-ttu-id="6c4f0-183">これらの注意点は、EntityClient を使用する [!INCLUDE[esql](../../../../../includes/esql-md.md)] クエリと、LINQ、[!INCLUDE[esql](../../../../../includes/esql-md.md)]、およびクエリ ビルダー メソッドを使用するオブジェクト クエリに当てはまります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-183">These considerations apply to [!INCLUDE[esql](../../../../../includes/esql-md.md)] queries using EntityClient and to object queries using LINQ, [!INCLUDE[esql](../../../../../includes/esql-md.md)], and query builder methods.</span></span>  
  
#### <a name="prevent-sql-injection-attacks"></a><span data-ttu-id="6c4f0-184">SQL インジェクション攻撃を防止する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-184">Prevent SQL injection attacks.</span></span>  
 <span data-ttu-id="6c4f0-185">アプリケーションによっては (ユーザーや他の外部エージェントからの) 外部入力を受け取り、その入力内容に応じた処理を実行する場合があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-185">Applications frequently take external input (from a user or another external agent) and perform actions based on that input.</span></span> <span data-ttu-id="6c4f0-186">直接、間接を問わず、ユーザーまたは外部エージェントから受け取った入力には、対象言語の構文を巧みに利用して不正なアクションを実行する内容が含まれている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-186">Any input that is directly or indirectly derived from the user or an external agent might have content that uses the syntax of the target language in order to perform unauthorized actions.</span></span> <span data-ttu-id="6c4f0-187">対象言語が [!INCLUDE[tsql](../../../../../includes/tsql-md.md)] などの構造化照会言語 (SQL) である場合、この操作は SQL インジェクション攻撃と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-187">When the target language is a Structured Query Language (SQL), such as [!INCLUDE[tsql](../../../../../includes/tsql-md.md)], this manipulation is known as a SQL injection attack.</span></span> <span data-ttu-id="6c4f0-188">悪質なユーザーによって、クエリに直接コマンドを挿入してデータベースのテーブルを削除されたり、サービス拒否の状態を引き起こされたり、本来実行されるべき操作を改変されたりする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-188">A malicious user can inject commands directly into the query and drop a database table, cause a denial of service, or otherwise change the nature of the operation being performed.</span></span>  
  
-   [!INCLUDE[esql](../../../../../includes/esql-md.md)]<span data-ttu-id="6c4f0-189"> インジェクション攻撃:</span><span class="sxs-lookup"><span data-stu-id="6c4f0-189"> injection attacks:</span></span>  
  
     <span data-ttu-id="6c4f0-190">[!INCLUDE[esql](../../../../../includes/esql-md.md)] では、クエリ述語やパラメーター名で使用される値に悪質な入力を渡すことによって SQL インジェクション攻撃が行われる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-190">SQL injection attacks can be performed in [!INCLUDE[esql](../../../../../includes/esql-md.md)] by supplying malicious input to values that are used in a query predicate and in parameter names.</span></span> <span data-ttu-id="6c4f0-191">SQL インジェクションが行われないようにするため、ユーザー入力を [!INCLUDE[esql](../../../../../includes/esql-md.md)] コマンド テキストと組み合わせないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-191">To avoid the risk of SQL injection, you should never combine user input with [!INCLUDE[esql](../../../../../includes/esql-md.md)] command text.</span></span>  
  
     [!INCLUDE[esql](../../../../../includes/esql-md.md)]<span data-ttu-id="6c4f0-192"> クエリでは、リテラルを渡すことのできる場所であればどこででもパラメーターを渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-192"> queries accept parameters everywhere that literals are accepted.</span></span> <span data-ttu-id="6c4f0-193">外部エージェントから受け取ったリテラルを直接クエリに挿入することは避け、パラメーター化クエリを使用するようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-193">You should use parameterized queries instead of injecting literals from an external agent directly into the query.</span></span> <span data-ttu-id="6c4f0-194">クエリ ビルダー メソッドを安全に構築するために使用を検討する必要がありますも[Entity SQL](http://msdn.microsoft.com/en-us/05685434-05e6-41c2-8d5e-8933b88a40b0)です。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-194">You should also consider using query builder methods to safely construct [Entity SQL](http://msdn.microsoft.com/en-us/05685434-05e6-41c2-8d5e-8933b88a40b0).</span></span>  
  
-   [!INCLUDE[linq_entities](../../../../../includes/linq-entities-md.md)]<span data-ttu-id="6c4f0-195"> インジェクション攻撃:</span><span class="sxs-lookup"><span data-stu-id="6c4f0-195"> injection attacks:</span></span>  
  
     <span data-ttu-id="6c4f0-196">[!INCLUDE[linq_entities](../../../../../includes/linq-entities-md.md)] 内でクエリを構築することは可能ですが、オブジェクト モデルの API を介して構築します。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-196">Although query composition is possible in [!INCLUDE[linq_entities](../../../../../includes/linq-entities-md.md)], it is performed through the object model API.</span></span> <span data-ttu-id="6c4f0-197">[!INCLUDE[esql](../../../../../includes/esql-md.md)] クエリとは異なり、[!INCLUDE[linq_entities](../../../../../includes/linq-entities-md.md)] クエリは、構築に文字列操作や文字列連結は使用されません。このため、通常の SQL インジェクション攻撃に十分な抵抗力を持っていると言えます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-197">Unlike [!INCLUDE[esql](../../../../../includes/esql-md.md)] queries, [!INCLUDE[linq_entities](../../../../../includes/linq-entities-md.md)] queries are not composed by using string manipulation or concatenation, and they are not susceptible to traditional SQL injection attacks.</span></span>  
  
#### <a name="prevent-very-large-result-sets"></a><span data-ttu-id="6c4f0-198">非常に大きな結果セットを使用しないようにする</span><span class="sxs-lookup"><span data-stu-id="6c4f0-198">Prevent very large result sets.</span></span>  
 <span data-ttu-id="6c4f0-199">非常に大きな結果セットを使用すると、消費されるリソースが結果セットのサイズに比例して増加する操作を実行する場合にクライアント システムがシャットダウンする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-199">A very large result set could cause the client system to shut down if the client is performing operations that consume resources proportional to the size of the result set.</span></span> <span data-ttu-id="6c4f0-200">次のような状況では、予想外に大きな結果セットが生成されることがあります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-200">Unexpectedly large result sets can occur under the following conditions:</span></span>  
  
-   <span data-ttu-id="6c4f0-201">適切なフィルター条件が含まれていない、大きなデータベースに対するクエリ。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-201">In queries against a large database that do not include appropriate filter conditions.</span></span>  
  
-   <span data-ttu-id="6c4f0-202">サーバーで Cartesian Join を作成するクエリ。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-202">In queries that create Cartesian joins on the server.</span></span>  
  
-   <span data-ttu-id="6c4f0-203">入れ子になった [!INCLUDE[esql](../../../../../includes/esql-md.md)] クエリ。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-203">In nested [!INCLUDE[esql](../../../../../includes/esql-md.md)] queries.</span></span>  
  
 <span data-ttu-id="6c4f0-204">ユーザー入力を受け取るときには、その入力によって結果セットがシステムで処理しきれないほど大きくならないことを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-204">When accepting user input, you must make sure that the input cannot cause result sets to become larger than what the system can handle.</span></span> <span data-ttu-id="6c4f0-205">使用することも、<xref:System.Linq.Queryable.Take%2A>メソッド[!INCLUDE[linq_entities](../../../../../includes/linq-entities-md.md)]または[制限](../../../../../docs/framework/data/adonet/ef/language-reference/limit-entity-sql.md)で演算子[!INCLUDE[esql](../../../../../includes/esql-md.md)]結果セットのサイズを制限します。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-205">You can also use the <xref:System.Linq.Queryable.Take%2A> method in [!INCLUDE[linq_entities](../../../../../includes/linq-entities-md.md)] or the [LIMIT](../../../../../docs/framework/data/adonet/ef/language-reference/limit-entity-sql.md) operator in [!INCLUDE[esql](../../../../../includes/esql-md.md)] to limit the size of the result set.</span></span>  
  
#### <a name="avoid-returning-iqueryable-results-when-exposing-methods-to-potentially-untrusted-callers"></a><span data-ttu-id="6c4f0-206">信頼できない可能性のある呼び出し元にメソッドを公開するときに IQueryable 結果を返さないようにする</span><span class="sxs-lookup"><span data-stu-id="6c4f0-206">Avoid Returning IQueryable Results When Exposing Methods to Potentially Untrusted Callers.</span></span>  
 <span data-ttu-id="6c4f0-207">次の理由で、信頼できない可能性のある呼び出し元に公開されたメソッドから <xref:System.Linq.IQueryable%601> 型を返さないようにします。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-207">Avoid returning <xref:System.Linq.IQueryable%601> types from methods that are exposed to potentially untrusted callers for the following reasons:</span></span>  
  
-   <span data-ttu-id="6c4f0-208"><xref:System.Linq.IQueryable%601> 型を公開するクエリのコンシューマーが、セキュリティ保護されたデータを公開したり結果セットのサイズを増やしたりする結果に関するメソッドを呼び出す可能性があるため。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-208">A consumer of a query that exposes an <xref:System.Linq.IQueryable%601> type could call methods on the result that expose secure data or increase the size of the result set.</span></span> <span data-ttu-id="6c4f0-209">たとえば、次のようなメソッド シグネチャについて考えてみます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-209">For example, consider the following method signature:</span></span>  
  
    ```  
    public IQueryable<Customer> GetCustomer(int customerId)  
    ```  
  
     <span data-ttu-id="6c4f0-210">このクエリのコンシューマーは返された `.Include("Orders")` の `IQueryable<Customer>` を呼び出し、クエリが公開を意図していないデータを取得する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-210">A consumer of this query could call `.Include("Orders")` on the returned `IQueryable<Customer>` to retrieve data that the query did not intend to expose.</span></span> <span data-ttu-id="6c4f0-211">これを回避するには、メソッドの戻り値の型を <xref:System.Collections.Generic.IEnumerable%601> に変更し、結果を具体化するメソッド (`.ToList()` など) を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-211">This can be avoided by changing the return type of the method to <xref:System.Collections.Generic.IEnumerable%601> and calling a method (such as `.ToList()`) that materializes the results.</span></span>  
  
-   <span data-ttu-id="6c4f0-212">結果が反復されると <xref:System.Linq.IQueryable%601> クエリが実行されるため、<xref:System.Linq.IQueryable%601> 型を公開するクエリのコンシューマーがスローされた例外をキャッチする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-212">Because <xref:System.Linq.IQueryable%601> queries are executed when the results are iterated over, a consumer of a query that exposes an <xref:System.Linq.IQueryable%601> type could catch exceptions that are thrown.</span></span> <span data-ttu-id="6c4f0-213">例外にコンシューマーを対象としていない情報が含まれている場合があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-213">Exceptions could contain information not intended for the consumer.</span></span>  
  
## <a name="security-considerations-for-entities"></a><span data-ttu-id="6c4f0-214">エンティティのセキュリティに関する注意点</span><span class="sxs-lookup"><span data-stu-id="6c4f0-214">Security Considerations for Entities</span></span>  
 <span data-ttu-id="6c4f0-215">エンティティ型を生成したり操作したりする際には次の点に注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-215">The following security considerations apply when generating and working with entity types.</span></span>  
  
#### <a name="do-not-share-an-objectcontext-across-application-domains"></a><span data-ttu-id="6c4f0-216">ObjectContext を複数のアプリケーション ドメインで共有しない</span><span class="sxs-lookup"><span data-stu-id="6c4f0-216">Do not share an ObjectContext across application domains.</span></span>  
 <span data-ttu-id="6c4f0-217"><xref:System.Data.Objects.ObjectContext> を複数のアプリケーション ドメインで共有すると接続文字列の情報が漏洩する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-217">Sharing an <xref:System.Data.Objects.ObjectContext> with more than one application domain may expose information in the connection string.</span></span> <span data-ttu-id="6c4f0-218">代わりに、シリアル化したオブジェクトやオブジェクト グラフをもう一方のアプリケーション ドメインに転送して、そのアプリケーション ドメインでそれらのオブジェクトを <xref:System.Data.Objects.ObjectContext> にアタッチするようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-218">Instead, you should transfer serialized objects or object graphs to the other application domain and then attach those objects to an <xref:System.Data.Objects.ObjectContext> in that application domain.</span></span> <span data-ttu-id="6c4f0-219">詳細については、次を参照してください。[オブジェクトのシリアル化](http://msdn.microsoft.com/en-us/06c77f9b-5b2e-4c78-b3e3-8c148ba0ea99)です。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-219">For more information, see [Serializing Objects](http://msdn.microsoft.com/en-us/06c77f9b-5b2e-4c78-b3e3-8c148ba0ea99).</span></span>  
  
#### <a name="prevent-type-safety-violations"></a><span data-ttu-id="6c4f0-220">型の安全性違反を防止する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-220">Prevent type safety violations.</span></span>  
 <span data-ttu-id="6c4f0-221">型の安全性違反が発生すると、[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] でオブジェクトのデータの整合性が保証されなくなります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-221">If type safety is violated, the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] cannot guarantee the integrity of data in objects.</span></span> <span data-ttu-id="6c4f0-222">型の安全性違反は、信頼できないアプリケーションを完全信頼のコード アクセス セキュリティで実行できるようにすると発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-222">Type safety violations could occur if you allow untrusted applications to run with full-trust code access security.</span></span>  
  
#### <a name="handle-exceptions"></a><span data-ttu-id="6c4f0-223">例外を処理する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-223">Handle exceptions.</span></span>  
 <span data-ttu-id="6c4f0-224">try/catch ブロック内の <xref:System.Data.Objects.ObjectContext> のメソッドとプロパティにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-224">Access methods and properties of an <xref:System.Data.Objects.ObjectContext> within a try-catch block.</span></span> <span data-ttu-id="6c4f0-225">例外をキャッチすると、未処理の例外によって <xref:System.Data.Objects.ObjectStateManager> のエントリまたはモデル情報 (テーブル名など) がアプリケーションのユーザーに公開されることはありません。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-225">Catching exceptions prevents unhandled exceptions from exposing entries in the <xref:System.Data.Objects.ObjectStateManager> or model information (such as table names) to users of your application.</span></span>  
  
## <a name="security-considerations-for-aspnet-applications"></a><span data-ttu-id="6c4f0-226">ASP.NET アプリケーションのセキュリティに関する注意点</span><span class="sxs-lookup"><span data-stu-id="6c4f0-226">Security Considerations for ASP.NET Applications</span></span>  
 <span data-ttu-id="6c4f0-227">[!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)] アプリケーションでパスを操作する際には次の点に注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-227">The following should be considered when you work with paths in [!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)] applications.</span></span>  
  
#### <a name="verify-whether-your-host-performs-path-checks"></a><span data-ttu-id="6c4f0-228">ホストでパスがチェックされるかどうかを確認する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-228">Verify whether your host performs path checks.</span></span>  
 <span data-ttu-id="6c4f0-229">`|DataDirectory|` という (パイプ記号で囲まれた) 置換文字列を使用すると、解決されたパスがサポートされているかどうかが [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] によって確認されます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-229">When the `|DataDirectory|` (enclosed in pipe symbols) substitution string is used, [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] verifies that the resolved path is supported.</span></span> <span data-ttu-id="6c4f0-230">たとえば、`DataDirectory` の後に ".." を使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-230">For example, ".." is not allowed behind `DataDirectory`.</span></span> <span data-ttu-id="6c4f0-231">Web アプリケーション ルート演算子 (`~`) の解決では、[!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)] をホストするプロセスによってこれと同じチェックが行われます。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-231">That same check for resolving the Web application root operator (`~`) is performed by the process hosting [!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)].</span></span> <span data-ttu-id="6c4f0-232">IIS ではこのチェックが行われますが、IIS 以外のホストでは、解決されたパスがサポートされているかどうかが確認されない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-232">IIS performs this check; however, hosts other than IIS may not verify that the resolved path is supported.</span></span> <span data-ttu-id="6c4f0-233">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] アプリケーションを配置するホストの動作を把握しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-233">You should know the behavior of the host on which you deploy an [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] application.</span></span>  
  
#### <a name="do-not-make-assumptions-about-resolved-path-names"></a><span data-ttu-id="6c4f0-234">解決されるパス名を想定しない</span><span class="sxs-lookup"><span data-stu-id="6c4f0-234">Do not make assumptions about resolved path names.</span></span>  
 <span data-ttu-id="6c4f0-235">ルート演算子 (`~`) と `DataDirectory` 置換文字列が解決される値は、アプリケーションの実行中に変化しない状態で維持される必要がありますが、ホストでそれらの値の変更が [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] によって制限されるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-235">Although the values to which the root operator (`~`) and the `DataDirectory` substitution string resolve should remain constant during the application's runtime, the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] does not restrict the host from modifying these values.</span></span>  
  
#### <a name="verify-the-path-length-before-deployment"></a><span data-ttu-id="6c4f0-236">配置の前にパスの長さを確認する</span><span class="sxs-lookup"><span data-stu-id="6c4f0-236">Verify the path length before deployment.</span></span>  
 <span data-ttu-id="6c4f0-237">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] アプリケーションを配置する前に、ルート演算子 (~) と `DataDirectory` 置換文字列の値がオペレーティング システムのパスの長さの制限を超えないことを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-237">Before deploying an [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] application, you should ensure that the values of the root operator (~) and `DataDirectory` substitution string do not exceed the limits of the path length in the operating system.</span></span> [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)]<span data-ttu-id="6c4f0-238"> データ プロバイダーでは、パスの長さが有効な制限内であるかどうかの確認が行われません。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-238"> data providers do not ensure that the path length is within valid limits.</span></span>  
  
## <a name="security-considerations-for-adonet-metadata"></a><span data-ttu-id="6c4f0-239">ADO.NET メタデータのセキュリティに関する注意点</span><span class="sxs-lookup"><span data-stu-id="6c4f0-239">Security Considerations for ADO.NET Metadata</span></span>  
 <span data-ttu-id="6c4f0-240">モデル ファイルとマッピング ファイルの生成と操作を行う際は、セキュリティに関して次の点に注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-240">The following security considerations apply when generating and working with model and mapping files.</span></span>  
  
#### <a name="do-not-expose-sensitive-information-through-logging"></a><span data-ttu-id="6c4f0-241">機密情報がログによって公開されないようにする。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-241">Do not expose sensitive information through logging.</span></span>  
 [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)]<span data-ttu-id="6c4f0-242"> メタデータ サービス コンポーネントでは個人情報はログに記録されません。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-242"> metadata service components do not log any private information.</span></span> <span data-ttu-id="6c4f0-243">アクセス制限のために返すことのできない結果があった場合は、データベース管理システムやファイル システムで例外を生成する代わりに 0 個の結果を返す必要があります。例外には機密情報が含まれる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-243">If there are results that cannot be returned because of access restrictions, database management systems and file systems should return zero results instead of raising an exception that could contain sensitive information.</span></span>  
  
#### <a name="do-not-accept-metadataworkspace-objects-from-untrusted-sources"></a><span data-ttu-id="6c4f0-244">信頼されていないソースから MetadataWorkspace オブジェクトを受け取らない</span><span class="sxs-lookup"><span data-stu-id="6c4f0-244">Do not accept MetadataWorkspace objects from untrusted sources.</span></span>  
 <span data-ttu-id="6c4f0-245">信頼されていないソースから <xref:System.Data.Metadata.Edm.MetadataWorkspace> クラスのインスタンスをアプリケーションで受け取らないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-245">Applications should not accept instances of the <xref:System.Data.Metadata.Edm.MetadataWorkspace> class from untrusted sources.</span></span> <span data-ttu-id="6c4f0-246">代わりに、それらのソースから明示的にワークスペースを作成および設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c4f0-246">Instead, you should explicitly construct and populate a workspace from such a source.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6c4f0-247">参照</span><span class="sxs-lookup"><span data-stu-id="6c4f0-247">See Also</span></span>  
 [<span data-ttu-id="6c4f0-248">ADO.NET アプリケーションのセキュリティ保護</span><span class="sxs-lookup"><span data-stu-id="6c4f0-248">Securing ADO.NET Applications</span></span>](../../../../../docs/framework/data/adonet/securing-ado-net-applications.md)  
 [<span data-ttu-id="6c4f0-249">配置に関する注意事項</span><span class="sxs-lookup"><span data-stu-id="6c4f0-249">Deployment Considerations</span></span>](../../../../../docs/framework/data/adonet/ef/deployment-considerations.md)  
 [<span data-ttu-id="6c4f0-250">移行に関する注意事項</span><span class="sxs-lookup"><span data-stu-id="6c4f0-250">Migration Considerations</span></span>](../../../../../docs/framework/data/adonet/ef/migration-considerations.md)
