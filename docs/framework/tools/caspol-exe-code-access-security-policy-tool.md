---
title: "Caspol.exe (コード アクセス セキュリティ ポリシー ツール)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- permission sets, modifying security policy
- security policy [.NET Framework], Code Access Security Policy tool
- enterprise security policy
- referencing code groups and permission sets
- user security policy
- Caspol.exe
- Code Access Security Policy tool
- code groups, modifying security policy
- application development [.NET Framework], security
- machine security policy
- security policy [.NET Framework], modifying
- manually editing security configuration files
ms.assetid: d2bf6123-7b0c-4e60-87ad-a39a1c3eb2e0
caps.latest.revision: "44"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 0054e77138218e83693c13727866e8e6841170f9
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/22/2017
---
# <a name="caspolexe-code-access-security-policy-tool"></a><span data-ttu-id="e0aac-102">Caspol.exe (コード アクセス セキュリティ ポリシー ツール)</span><span class="sxs-lookup"><span data-stu-id="e0aac-102">Caspol.exe (Code Access Security Policy Tool)</span></span>
<span data-ttu-id="e0aac-103">ユーザーと管理者は、コード アクセス セキュリティ (CAS) ポリシー ツール (Caspol.exe) を使用して、コンピューター ポリシー レベル、ユーザー ポリシー レベル、およびエンタープライズ ポリシー レベルのセキュリティ ポリシーを変更できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-103">The Code Access Security (CAS) Policy tool (Caspol.exe) enables users and administrators to modify security policy for the machine policy level, the user policy level, and the enterprise policy level.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e0aac-104">[!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] 以降では、[\<legacyCasPolicy> 要素](../../../docs/framework/configure-apps/file-schema/runtime/netfx40-legacysecuritypolicy-element.md)が `true` に設定されていない限り、Caspol.exe は CAS ポリシーに影響を与えません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-104">Starting with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], Caspol.exe does not affect CAS policy unless the [\<legacyCasPolicy> element](../../../docs/framework/configure-apps/file-schema/runtime/netfx40-legacysecuritypolicy-element.md) is set to `true`.</span></span> <span data-ttu-id="e0aac-105">CasPol.exe によって表示または変更された設定は、CAS ポリシーの使用が選択されているアプリケーションにのみ影響します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-105">Any settings shown or modified by CasPol.exe will only affect applications that opt into using CAS policy.</span></span> <span data-ttu-id="e0aac-106">詳細については、「[セキュリティの変更点](../../../docs/framework/security/security-changes.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-106">For more information, see [Security Changes](../../../docs/framework/security/security-changes.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e0aac-107">64 ビット コンピューターには、64 ビット バージョンと 32 ビット バージョンの両方のセキュリティ ポリシーが含まれます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-107">64-bit computers include both 64-bit and 32-bit versions of security policy.</span></span> <span data-ttu-id="e0aac-108">32 ビット アプリケーションと 64 ビット アプリケーションの両方にポリシーの変更を適用するには、Caspol.exe の 32 ビット バージョンと 64 ビット バージョンの両方を実行します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-108">To ensure that your policy changes apply to both 32-bit and 64-bit applications, run both the 32-bit and 64-bit versions of Caspol.exe.</span></span>  
  
 <span data-ttu-id="e0aac-109">コード アクセス セキュリティ ポリシー ツールは、.NET Framework および Visual Studio と共に自動的にインストールされます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-109">The Code Access Security Policy tool is automatically installed with the .NET Framework and with Visual Studio.</span></span> <span data-ttu-id="e0aac-110">Caspol.exe は、32 ビット システムでは %windir%\Microsoft.NET\Framework\\*version* に、64 ビット システムでは %windir%\Microsoft.NET\Framework64\\*version* にあります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-110">You can find Caspol.exe in %windir%\Microsoft.NET\Framework\\*version* on 32-bit systems or %windir%\Microsoft.NET\Framework64\\*version* on 64-bit systems.</span></span> <span data-ttu-id="e0aac-111">(たとえば、場所は、64 ビット システムの .NET Framework 4 では %windir%\Microsoft.NET\Framework64\v4.030319\caspol.exe)。コンピューターで複数のバージョンの .NET Framework を side-by-side で実行している場合は、複数のバージョンのツールがインストールされると考えられます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-111">(For example, the location is %windir%\Microsoft.NET\Framework64\v4.030319\caspol.exe for the .NET Framework 4 on a 64-bit system.) Multiple versions of the tool might be installed if your computer is running multiple versions of the .NET Framework side by side.</span></span> <span data-ttu-id="e0aac-112">インストール ディレクトリからツールを実行できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-112">You can run the tool from the installation directory.</span></span> <span data-ttu-id="e0aac-113">ただし、インストール フォルダーに移動する必要のない[コマンド プロンプト](../../../docs/framework/tools/developer-command-prompt-for-vs.md)を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="e0aac-113">However, we recommend that you use the [Command Prompts](../../../docs/framework/tools/developer-command-prompt-for-vs.md), which does not require you to navigate to the installation folder.</span></span>  
  
 <span data-ttu-id="e0aac-114">コマンド プロンプトに次のように入力します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-114">At the command prompt, type the following:</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="e0aac-115">構文</span><span class="sxs-lookup"><span data-stu-id="e0aac-115">Syntax</span></span>  
  
```  
caspol [options]  
```  
  
#### <a name="parameters"></a><span data-ttu-id="e0aac-116">パラメーター</span><span class="sxs-lookup"><span data-stu-id="e0aac-116">Parameters</span></span>  
  
|<span data-ttu-id="e0aac-117">オプション</span><span class="sxs-lookup"><span data-stu-id="e0aac-117">Option</span></span>|<span data-ttu-id="e0aac-118">説明</span><span class="sxs-lookup"><span data-stu-id="e0aac-118">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="e0aac-119">**-addfulltrust** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="e0aac-119">**-addfulltrust** *assembly_file*</span></span><br /><br /> <span data-ttu-id="e0aac-120">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-120">or</span></span><br /><br /> <span data-ttu-id="e0aac-121">**-af** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="e0aac-121">**-af** *assembly_file*</span></span>|<span data-ttu-id="e0aac-122">カスタム セキュリティ オブジェクト (カスタム アクセス許可またはカスタム メンバーシップ条件) を実装するアセンブリを、特定のポリシー レベルの完全信頼アセンブリの一覧に追加します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-122">Adds an assembly that implements a custom security object (such as a custom permission or a custom membership condition) to the full trust assembly list for a specific policy level.</span></span> <span data-ttu-id="e0aac-123">引数 *assembly_file* は、追加するアセンブリを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-123">The *assembly_file* argument specifies the assembly to add.</span></span> <span data-ttu-id="e0aac-124">このファイルは、[厳密な名前](../../../docs/framework/app-domains/strong-named-assemblies.md)で署名する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-124">This file must be signed with a [strong name](../../../docs/framework/app-domains/strong-named-assemblies.md).</span></span> <span data-ttu-id="e0aac-125">アセンブリに厳密な名前で署名するには、[厳密名ツール (Sn.exe)](../../../docs/framework/tools/sn-exe-strong-name-tool.md) を使用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-125">You can sign an assembly with a strong name using the [Strong Name Tool (Sn.exe)](../../../docs/framework/tools/sn-exe-strong-name-tool.md).</span></span><br /><br /> <span data-ttu-id="e0aac-126">カスタム アクセス許可を含むアクセス許可セットをポリシーに追加するたびに、そのカスタム アクセス許可を実装するアセンブリを、該当するポリシー レベルの完全信頼一覧に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-126">Whenever a permission set containing a custom permission is added to policy, the assembly implementing the custom permission must be added to the full trust list for that policy level.</span></span> <span data-ttu-id="e0aac-127">セキュリティ ポリシー (コンピューター ポリシーなど) の中で使用されるカスタム セキュリティ オブジェクト (カスタム コード グループやメンバーシップ条件など) を実装するすべてのアセンブリを、完全信頼アセンブリの一覧に常に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-127">Assemblies that implement custom security objects (such as custom code groups or membership conditions) used in a security policy (such as the machine policy) should always be added to the full trust assembly list.</span></span> <span data-ttu-id="e0aac-128">**注意:** カスタム セキュリティ オブジェクトを実装するアセンブリが他のアセンブリを参照している場合は、参照先アセンブリを最初に完全信頼アセンブリの一覧に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-128">**Caution:**  If the assembly implementing the custom security object references other assemblies, you must first add the referenced assemblies to the full trust assembly list.</span></span> <span data-ttu-id="e0aac-129">Visual Basic、C++、および JScript を使用して作成されたカスタム セキュリティ オブジェクトは、それぞれ Microsoft.VisualBasic.dll、Microsoft.VisualC.dll、Microsoft.JScript.dll をこの順で参照します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-129">Custom security objects created using Visual Basic, C++, and JScript reference either Microsoft.VisualBasic.dll, Microsoft.VisualC.dll, or Microsoft.JScript.dll, respectively.</span></span> <span data-ttu-id="e0aac-130">これらのアセンブリは、既定では、完全な信頼を持つアセンブリのリストには含まれていません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-130">These assemblies are not in the full trust assembly list by default.</span></span> <span data-ttu-id="e0aac-131">カスタム セキュリティ オブジェクトを追加する前に、適切なアセンブリを完全な信頼のリストに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-131">You must add the appropriate assembly to the full trust list before you add a custom security object.</span></span> <span data-ttu-id="e0aac-132">これができない場合は、セキュリティ システムが壊れ、すべてのアセンブリの読み込みに失敗します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-132">Failure to do so will break the security system, causing all assemblies to fail to load.</span></span> <span data-ttu-id="e0aac-133">この状況では、Caspol.exe **-all -reset** オプションを使用してもセキュリティを修復できません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-133">In this situation, the Caspol.exe **-all -reset** option will not repair security.</span></span> <span data-ttu-id="e0aac-134">セキュリティを修復するには、セキュリティ ファイルを手動で編集し、カスタム セキュリティ オブジェクトを削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-134">To repair security, you must manually edit the security files to remove the custom security object.</span></span>|  
|<span data-ttu-id="e0aac-135">**-addgroup** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span><span class="sxs-lookup"><span data-stu-id="e0aac-135">**-addgroup** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span></span><br /><br /> <span data-ttu-id="e0aac-136">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-136">or</span></span><br /><br /> <span data-ttu-id="e0aac-137">**-ag** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span><span class="sxs-lookup"><span data-stu-id="e0aac-137">**-ag** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span></span>|<span data-ttu-id="e0aac-138">新しいコード グループをコード グループ階層に追加します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-138">Adds a new code group to the code group hierarchy.</span></span> <span data-ttu-id="e0aac-139">*parent_label* または *parent_name* を指定できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-139">You can specify either the *parent_label* or *parent_name*.</span></span> <span data-ttu-id="e0aac-140">*parent_label* 引数は、追加されているコード グループの親である、コード グループのラベル (1 や</span><span class="sxs-lookup"><span data-stu-id="e0aac-140">The *parent_label* argument specifies the label (such as 1.</span></span> <span data-ttu-id="e0aac-141">1.1 など) を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-141">or 1.1.) of the code group that is the parent of the code group being added.</span></span> <span data-ttu-id="e0aac-142">引数 *parent_name* は、追加するコード グループの親となるコード グループの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-142">The *parent_name* argument specifies the name of the code group that is the parent of the code group being added.</span></span> <span data-ttu-id="e0aac-143">*parent_label* と *parent_name* は交換して使用できるため、Caspol.exe がこの 2 つを区別できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-143">Because *parent_label* and *parent_name* can be used interchangeably, Caspol.exe must be able to distinguish between them.</span></span> <span data-ttu-id="e0aac-144">したがって、*parent_name* の先頭を数字にすることはできません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-144">Therefore, *parent_name* cannot begin with a number.</span></span> <span data-ttu-id="e0aac-145">また、*parent_name* に含めることができるのは、A-Z、0-9、およびアンダースコア文字だけです。</span><span class="sxs-lookup"><span data-stu-id="e0aac-145">Additionally, *parent_name* can only contain A-Z, 0-9 and the underscore character.</span></span><br /><br /> <span data-ttu-id="e0aac-146">引数 *mship* は、新しいコード グループのメンバーシップ条件を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-146">The *mship* argument specifies the membership condition for the new code group.</span></span> <span data-ttu-id="e0aac-147">詳細については、このセクションの *mship* 引数の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-147">For more information, see the table of *mship* arguments later in this section.</span></span><br /><br /> <span data-ttu-id="e0aac-148">引数 *pset_name* は、新しいコード グループと関連付けられるアクセス許可セットの名前です。</span><span class="sxs-lookup"><span data-stu-id="e0aac-148">The *pset_name* argument is the name of the permission set that will be associated with the new code group.</span></span> <span data-ttu-id="e0aac-149">新しいグループに 1 つ以上の *flags* を設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-149">You can also set one or more *flags* for the new group.</span></span> <span data-ttu-id="e0aac-150">詳細については、このセクションの *flags* 引数の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-150">For more information, see the table of *flags* arguments later in this section.</span></span>|  
|<span data-ttu-id="e0aac-151">**-addpset** {*psfile* &#124; *psfile* p*set_name*}</span><span class="sxs-lookup"><span data-stu-id="e0aac-151">**-addpset** {*psfile* &#124; *psfile* p*set_name*}</span></span><br /><br /> <span data-ttu-id="e0aac-152">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-152">or</span></span><br /><br /> <span data-ttu-id="e0aac-153">**-ap** {*named*_*psfile* &#124; *psfile* *pset_name*}</span><span class="sxs-lookup"><span data-stu-id="e0aac-153">**-ap** {*named*_*psfile* &#124; *psfile* *pset_name*}</span></span>|<span data-ttu-id="e0aac-154">新しい名前付きアクセス許可セットをポリシーに追加します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-154">Adds a new named permission set to policy.</span></span> <span data-ttu-id="e0aac-155">アクセス許可セットは XML で編集し、.xml ファイルとして格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-155">The permission set must be authored in XML and stored in an .xml file.</span></span> <span data-ttu-id="e0aac-156">XML ファイルにアクセス許可セットの名前が含まれる場合は、そのファイル (*psfile*) だけが指定されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-156">If the XML file contains the name of the permission set, only that file (*psfile*) is specified.</span></span> <span data-ttu-id="e0aac-157">XML ファイルにアクセス許可セットの名前が含まれない場合は、XML ファイルの名前 (*psfile*) とアクセス許可セットの名前 (*pset_name*) の両方を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-157">If the XML file does not contain the permission set name, you must specify both the XML file name (*psfile*) and the permission set name (*pset_name*).</span></span><br /><br /> <span data-ttu-id="e0aac-158">アクセス許可セットで使用するすべてのアクセス許可を、グローバル アセンブリ キャッシュ内にあるアセンブリに定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-158">Note that all permissions used in a permission set must be defined in assemblies contained in the global assembly cache.</span></span>|  
|<span data-ttu-id="e0aac-159">**-a****[ll]**</span><span class="sxs-lookup"><span data-stu-id="e0aac-159">**-a**[**ll**]</span></span>|<span data-ttu-id="e0aac-160">このオプションの後に続くすべてのオプションを、コンピューター、ユーザー、エンタープライズの各ポリシーに適用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-160">Indicates that all options following this one apply to the machine, user, and enterprise policies.</span></span> <span data-ttu-id="e0aac-161">**-all** オプションは、常に現在ログオンしているユーザーのポリシーを参照します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-161">The **-all** option always refers to the policy of the currently logged-on user.</span></span> <span data-ttu-id="e0aac-162">現在のユーザー以外のユーザーのポリシーの参照方法については **-customall** オプションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-162">See the **-customall** option to refer to the user policy of a user other than the current user.</span></span>|  
|<span data-ttu-id="e0aac-163">**-chggroup** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span><span class="sxs-lookup"><span data-stu-id="e0aac-163">**-chggroup** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span></span><br /><br /> <span data-ttu-id="e0aac-164">*flags* `}`</span><span class="sxs-lookup"><span data-stu-id="e0aac-164">*flags* `}`</span></span><br /><br /> <span data-ttu-id="e0aac-165">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-165">or</span></span><br /><br /> <span data-ttu-id="e0aac-166">**-cg** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span><span class="sxs-lookup"><span data-stu-id="e0aac-166">**-cg** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span></span><br /><br /> <span data-ttu-id="e0aac-167">*flags* `}`</span><span class="sxs-lookup"><span data-stu-id="e0aac-167">*flags* `}`</span></span>|<span data-ttu-id="e0aac-168">コード グループのメンバーシップ条件、アクセス許可セット、**exclusive**、**levelfinal**、**name**、**description** の各フラグの設定を変更します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-168">Changes a code group's membership condition, permission set, or the settings of the **exclusive**, **levelfinal**, **name**, or **description** flags.</span></span> <span data-ttu-id="e0aac-169">*label* または *name* を指定できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-169">You can specify either the *label* or *name*.</span></span> <span data-ttu-id="e0aac-170">*label* 引数は、コード グループのラベル (1 や</span><span class="sxs-lookup"><span data-stu-id="e0aac-170">The *label* argument specifies the label (such as 1.</span></span> <span data-ttu-id="e0aac-171">1.1 など) を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-171">or 1.1.) of the code group.</span></span> <span data-ttu-id="e0aac-172">*name* 引数は、変更するコード グループの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-172">The *name* argument specifies the name of the code group to change.</span></span> <span data-ttu-id="e0aac-173">*label* と *name* は交換して使用できるため、Caspol.exe がこの 2 つを区別できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-173">Because *label* and *name* can be used interchangeably, Caspol.exe must be able to distinguish between them.</span></span> <span data-ttu-id="e0aac-174">したがって、*name* の先頭を数字にすることはできません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-174">Therefore, *name* cannot begin with a number.</span></span> <span data-ttu-id="e0aac-175">また、*name* に含めることができるのは、A-Z、0-9、およびアンダースコア文字だけです。</span><span class="sxs-lookup"><span data-stu-id="e0aac-175">Additionally, *name* can only contain A-Z, 0-9 and the underscore character.</span></span><br /><br /> <span data-ttu-id="e0aac-176">引数 *pset_name* は、コード グループと関連付けるアクセス許可セットの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-176">The *pset_name* argument specifies the name of the permission set to associate with the code group.</span></span> <span data-ttu-id="e0aac-177">引数 *mship* および *flags* については、このセクションで後述する表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-177">See the tables later in this section for information on the *mship* and *flags* arguments.</span></span>|  
|<span data-ttu-id="e0aac-178">**-chgpset**  *psfile pset_name*</span><span class="sxs-lookup"><span data-stu-id="e0aac-178">**-chgpset**  *psfile pset_name*</span></span><br /><br /> <span data-ttu-id="e0aac-179">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-179">or</span></span><br /><br /> <span data-ttu-id="e0aac-180">**-cp** *psfile pset_name*</span><span class="sxs-lookup"><span data-stu-id="e0aac-180">**-cp** *psfile pset_name*</span></span>|<span data-ttu-id="e0aac-181">名前付きアクセス許可セットを変更します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-181">Changes a named permission set.</span></span> <span data-ttu-id="e0aac-182">引数 *psfile* は、アクセス許可セットの新しい定義を指定します。この定義はシリアル化された XML 形式のアクセス許可セット ファイルです。</span><span class="sxs-lookup"><span data-stu-id="e0aac-182">The *psfile* argument supplies the new definition for the permission set; it is a serialized permission set file in XML format.</span></span> <span data-ttu-id="e0aac-183">引数 *pset_name* は、変更するアクセス許可セットの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-183">The *pset_name* argument specifies the name of the permission set you want to change.</span></span>|  
|<span data-ttu-id="e0aac-184">**-customall**  *path*</span><span class="sxs-lookup"><span data-stu-id="e0aac-184">**-customall**  *path*</span></span><br /><br /> <span data-ttu-id="e0aac-185">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-185">or</span></span><br /><br /> <span data-ttu-id="e0aac-186">**-ca**  *path*</span><span class="sxs-lookup"><span data-stu-id="e0aac-186">**-ca**  *path*</span></span>|<span data-ttu-id="e0aac-187">このオプションの後に続くすべてのオプションを、コンピューター、エンタープライズ、指定したカスタム ユーザーの各ポリシーに適用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-187">Indicates that all options following this one apply to the machine, enterprise, and the specified custom user policies.</span></span> <span data-ttu-id="e0aac-188">カスタム ユーザーのセキュリティ構成ファイルの位置を引数 *path* で指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-188">You must specify the location of the custom user's security configuration file with the *path* argument.</span></span>|  
|<span data-ttu-id="e0aac-189">**-cu****[stomuser]** *path*</span><span class="sxs-lookup"><span data-stu-id="e0aac-189">**-cu**[**stomuser**] *path*</span></span>|<span data-ttu-id="e0aac-190">現在実行中の Caspol.exe を実行したユーザーに属さないカスタム ユーザー ポリシーを管理できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-190">Allows the administration of a custom user policy that does not belong to the user on whose behalf Caspol.exe is currently running.</span></span> <span data-ttu-id="e0aac-191">カスタム ユーザーのセキュリティ構成ファイルの位置を引数 *path* で指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-191">You must specify the location of the custom user's security configuration file with the *path* argument.</span></span>|  
|<span data-ttu-id="e0aac-192">**-enterprise**</span><span class="sxs-lookup"><span data-stu-id="e0aac-192">**-enterprise**</span></span><br /><br /> <span data-ttu-id="e0aac-193">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-193">or</span></span><br /><br /> <span data-ttu-id="e0aac-194">**-en**</span><span class="sxs-lookup"><span data-stu-id="e0aac-194">**-en**</span></span>|<span data-ttu-id="e0aac-195">このオプションの後に続くすべてのオプションを、エンタープライズ レベル ポリシーに適用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-195">Indicates that all options following this one apply to the enterprise level policy.</span></span> <span data-ttu-id="e0aac-196">エンタープライズ管理者ではないユーザーは、エンタープライズ ポリシーを変更するための十分な権限を持ちませんが、参照はできます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-196">Users who are not enterprise administrators do not have sufficient rights to modify the enterprise policy, although they can view it.</span></span> <span data-ttu-id="e0aac-197">エンタープライズ以外の場合、既定では、このポリシーがコンピューター ポリシーやユーザー ポリシーに干渉することはありません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-197">In nonenterprise scenarios, this policy, by default, does not interfere with machine and user policy.</span></span>|  
|<span data-ttu-id="e0aac-198">**-e****[xecution]** {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="e0aac-198">**-e**[**xecution**] {**on** &#124; **off**}</span></span>|<span data-ttu-id="e0aac-199">コードの実行が開始される前に実行許可を確認する機構のオンとオフを切り替えます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-199">Turns on or off the mechanism that checks for the permission to run before code starts to execute.</span></span> <span data-ttu-id="e0aac-200">**メモ:** このスイッチは、[!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] 以降のバージョンでは削除されています。</span><span class="sxs-lookup"><span data-stu-id="e0aac-200">**Note:**  This switch is removed in the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] and later versions.</span></span> <span data-ttu-id="e0aac-201">詳細については、「[セキュリティの変更点](../../../docs/framework/security/security-changes.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-201">For more information, see [Security Changes](../../../docs/framework/security/security-changes.md).</span></span>|  
|<span data-ttu-id="e0aac-202">**-f****[orce]**</span><span class="sxs-lookup"><span data-stu-id="e0aac-202">**-f**[**orce**]</span></span>|<span data-ttu-id="e0aac-203">ツールの自己破棄テストを行わず、ユーザーに指定されたとおりにポリシーを変更します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-203">Suppresses the tool's self-destruct test and changes the policy as specified by the user.</span></span> <span data-ttu-id="e0aac-204">通常、Caspol.exe は、ポリシーを変更した結果 Caspol.exe 自体の適切な動作が妨げられることにならないかどうかをチェックします。妨げられる場合は、Caspol.exe は変更されたポリシーを保存せず、エラー メッセージを表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-204">Normally, Caspol.exe checks whether any policy changes would prevent Caspol.exe itself from running properly; if so, Caspol.exe does not save the policy change and prints an error message.</span></span> <span data-ttu-id="e0aac-205">Caspol.exe の動作を妨げることになっても強制的に Caspol.exe にポリシーを変更する場合は、**–force** オプションを使用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-205">To force Caspol.exe to change policy even if this prevents Caspol.exe itself from running, use the **–force** option.</span></span>|  
|<span data-ttu-id="e0aac-206">**-h****[elp]**</span><span class="sxs-lookup"><span data-stu-id="e0aac-206">**-h**[**elp**]</span></span>|<span data-ttu-id="e0aac-207">Caspol.exe のコマンド構文とオプションを表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-207">Displays command syntax and options for Caspol.exe.</span></span>|  
|<span data-ttu-id="e0aac-208">**-l****[ist]**</span><span class="sxs-lookup"><span data-stu-id="e0aac-208">**-l**[**ist**]</span></span>|<span data-ttu-id="e0aac-209">指定されたコンピューター、ユーザー、エンタープライズ、またはすべてのポリシー レベルにかかわる、コード グループの階層とアクセス許可セットの一覧を表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-209">Lists the code group hierarchy and the permission sets for the specified machine, user, enterprise, or all policy levels.</span></span> <span data-ttu-id="e0aac-210">Caspol.exe は、最初にコード グループのラベルを、次に (null でない場合) 名前を表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-210">Caspol.exe displays the code group's label first, followed by the name, if it is not null.</span></span>|  
|<span data-ttu-id="e0aac-211">**-listdescription**</span><span class="sxs-lookup"><span data-stu-id="e0aac-211">**-listdescription**</span></span><br /><br /> <span data-ttu-id="e0aac-212">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-212">or</span></span><br /><br /> <span data-ttu-id="e0aac-213">**-ld**</span><span class="sxs-lookup"><span data-stu-id="e0aac-213">**-ld**</span></span>|<span data-ttu-id="e0aac-214">指定されたポリシー レベルのすべてのコード グループの説明を一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-214">Lists all code group descriptions for the specified policy level.</span></span>|  
|<span data-ttu-id="e0aac-215">**-listfulltrust**</span><span class="sxs-lookup"><span data-stu-id="e0aac-215">**-listfulltrust**</span></span><br /><br /> <span data-ttu-id="e0aac-216">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-216">or</span></span><br /><br /> <span data-ttu-id="e0aac-217">**-lf**</span><span class="sxs-lookup"><span data-stu-id="e0aac-217">**-lf**</span></span>|<span data-ttu-id="e0aac-218">指定されたポリシー レベルの完全信頼アセンブリ一覧の内容を一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-218">Lists the contents of the full trust assembly list for the specified policy level.</span></span>|  
|<span data-ttu-id="e0aac-219">**-listgroups**</span><span class="sxs-lookup"><span data-stu-id="e0aac-219">**-listgroups**</span></span><br /><br /> <span data-ttu-id="e0aac-220">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-220">or</span></span><br /><br /> <span data-ttu-id="e0aac-221">**-lg**</span><span class="sxs-lookup"><span data-stu-id="e0aac-221">**-lg**</span></span>|<span data-ttu-id="e0aac-222">指定されたポリシー レベルまたはすべてのポリシー レベルのコード グループを表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-222">Displays the code groups of the specified policy level or all policy levels.</span></span> <span data-ttu-id="e0aac-223">Caspol.exe は、最初にコード グループのラベルを、次に (null でない場合) 名前を表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-223">Caspol.exe displays the code group's label first, followed by the name, if it is not null.</span></span>|  
|<span data-ttu-id="e0aac-224">**-listpset** または **-lp**</span><span class="sxs-lookup"><span data-stu-id="e0aac-224">**-listpset** or **-lp**</span></span>|<span data-ttu-id="e0aac-225">指定されたポリシー レベルまたはすべてのポリシー レベルのアクセス許可セットを表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-225">Displays the permission sets for the specified policy level or all policy levels.</span></span>|  
|<span data-ttu-id="e0aac-226">**-m****[achine]**</span><span class="sxs-lookup"><span data-stu-id="e0aac-226">**-m**[**achine**]</span></span>|<span data-ttu-id="e0aac-227">このオプションの後に続くすべてのオプションをコンピューター レベル ポリシーに適用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-227">Indicates that all options following this one apply to the machine level policy.</span></span> <span data-ttu-id="e0aac-228">管理者ではないユーザーは、コンピューター ポリシーを変更するための十分な権限を持ちませんが、参照はできます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-228">Users who are not administrators do not have sufficient rights to modify the machine policy, although they can view it.</span></span> <span data-ttu-id="e0aac-229">管理者の場合は、**-machine** が既定値です。</span><span class="sxs-lookup"><span data-stu-id="e0aac-229">For administrators, **-machine** is the default.</span></span>|  
|<span data-ttu-id="e0aac-230">**-polchgprompt** {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="e0aac-230">**-polchgprompt** {**on** &#124; **off**}</span></span><br /><br /> <span data-ttu-id="e0aac-231">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-231">or</span></span><br /><br /> <span data-ttu-id="e0aac-232">**-pp** {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="e0aac-232">**-pp** {**on** &#124; **off**}</span></span>|<span data-ttu-id="e0aac-233">ポリシーを変更するオプションを使用して、Caspol.exe が実行されるたびに表示されるプロンプトを有効または無効にします。</span><span class="sxs-lookup"><span data-stu-id="e0aac-233">Enables or disables the prompt that is displayed whenever Caspol.exe is run using an option that would cause policy changes.</span></span>|  
|<span data-ttu-id="e0aac-234">**-quiet**</span><span class="sxs-lookup"><span data-stu-id="e0aac-234">**-quiet**</span></span><br /><br /> <span data-ttu-id="e0aac-235">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-235">or</span></span><br /><br /> <span data-ttu-id="e0aac-236">**-q**</span><span class="sxs-lookup"><span data-stu-id="e0aac-236">**-q**</span></span>|<span data-ttu-id="e0aac-237">ポリシーを変更するオプションに対して通常表示されるプロンプトを一時的に無効にします。</span><span class="sxs-lookup"><span data-stu-id="e0aac-237">Temporarily disables the prompt that is normally displayed for an option that causes policy changes.</span></span> <span data-ttu-id="e0aac-238">グローバル変更プロンプトの設定は変更されません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-238">The global change prompt setting does not change.</span></span> <span data-ttu-id="e0aac-239">このオプションは、すべての Caspol.exe コマンドに対してプロンプトを無効にすることを避けるため、単一のコマンドに対してだけ使用してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-239">Use the option only on a single command basis to avoid disabling the prompt for all Caspol.exe commands.</span></span>|  
|<span data-ttu-id="e0aac-240">**-r****[ecover]**</span><span class="sxs-lookup"><span data-stu-id="e0aac-240">**-r**[**ecover**]</span></span>|<span data-ttu-id="e0aac-241">バックアップ ファイルからポリシーを復元します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-241">Recovers policy from a backup file.</span></span> <span data-ttu-id="e0aac-242">ポリシーが変更されるたびに、古いポリシーが Caspol.exe によってバックアップ ファイルの中に格納されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-242">Whenever a policy change is made, Caspol.exe stores the old policy in a backup file.</span></span>|  
|<span data-ttu-id="e0aac-243">**-remfulltrust** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="e0aac-243">**-remfulltrust** *assembly_file*</span></span><br /><br /> <span data-ttu-id="e0aac-244">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-244">or</span></span><br /><br /> <span data-ttu-id="e0aac-245">**-rf**  *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="e0aac-245">**-rf**  *assembly_file*</span></span>|<span data-ttu-id="e0aac-246">ポリシー レベルの完全信頼一覧からアセンブリを削除します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-246">Removes an assembly from the full trust list of a policy level.</span></span> <span data-ttu-id="e0aac-247">この操作を実行する必要があるのは、カスタム アクセス許可を含むアクセス許可セットがポリシーによって使用されなくなった場合です。</span><span class="sxs-lookup"><span data-stu-id="e0aac-247">This operation should be performed if a permission set that contains a custom permission is no longer used by policy.</span></span> <span data-ttu-id="e0aac-248">ただし、カスタム アクセス許可を実装するアセンブリを完全信頼一覧から削除するのは、そのアセンブリが、まだ使用されている他のカスタム アクセス許可を実装していない場合に限ります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-248">However, you should remove an assembly that implements a custom permission from the full trust list only if the assembly does not implement any other custom permissions that are still being used.</span></span> <span data-ttu-id="e0aac-249">一覧からアセンブリを削除するときは、そのアセンブリが依存している他のすべてのアセンブリも削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-249">When you remove an assembly from the list, you should also remove any other assemblies that it depends on.</span></span>|  
|<span data-ttu-id="e0aac-250">**-remgroup** {*label &#124;name*}</span><span class="sxs-lookup"><span data-stu-id="e0aac-250">**-remgroup** {*label &#124;name*}</span></span><br /><br /> <span data-ttu-id="e0aac-251">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-251">or</span></span><br /><br /> <span data-ttu-id="e0aac-252">**-rg** {l*abel &#124; name*}</span><span class="sxs-lookup"><span data-stu-id="e0aac-252">**-rg** {l*abel &#124; name*}</span></span>|<span data-ttu-id="e0aac-253">ラベルまたは名前で指定したコード グループを削除します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-253">Removes the code group specified by either its label or name.</span></span> <span data-ttu-id="e0aac-254">指定したコード グループが子コード グループを持つ場合は、Caspol.exe によってすべての子コード グループも削除されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-254">If the specified code group has child code groups, Caspol.exe also removes all the child code groups.</span></span>|  
|<span data-ttu-id="e0aac-255">**-rempset** *pset_name*</span><span class="sxs-lookup"><span data-stu-id="e0aac-255">**-rempset** *pset_name*</span></span><br /><br /> <span data-ttu-id="e0aac-256">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-256">or</span></span><br /><br /> <span data-ttu-id="e0aac-257">**-rp** *pset_name*</span><span class="sxs-lookup"><span data-stu-id="e0aac-257">**-rp** *pset_name*</span></span>|<span data-ttu-id="e0aac-258">指定したアクセス許可セットをポリシーから削除します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-258">Removes the specified permission set from policy.</span></span> <span data-ttu-id="e0aac-259">引数 *pset_name* は、削除するアクセス許可セットを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-259">The *pset_name* argument indicates which permission set to remove.</span></span> <span data-ttu-id="e0aac-260">Caspol.exe がアクセス許可セットを削除するのは、そのアクセス許可セットがどのコード グループにも関連付けられていない場合だけです。</span><span class="sxs-lookup"><span data-stu-id="e0aac-260">Caspol.exe removes the permission set only if it is not associated with any code group.</span></span> <span data-ttu-id="e0aac-261">既定の (組み込み) アクセス許可セットは削除できません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-261">The default (built-in) permission sets cannot be removed.</span></span>|  
|<span data-ttu-id="e0aac-262">**-reset**</span><span class="sxs-lookup"><span data-stu-id="e0aac-262">**-reset**</span></span><br /><br /> <span data-ttu-id="e0aac-263">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-263">or</span></span><br /><br /> <span data-ttu-id="e0aac-264">**-rs**</span><span class="sxs-lookup"><span data-stu-id="e0aac-264">**-rs**</span></span>|<span data-ttu-id="e0aac-265">ポリシーを既定のステータスに戻し、ディスクに永続化します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-265">Returns policy to its default state and persists it to disk.</span></span> <span data-ttu-id="e0aac-266">このオプションは、変更後のポリシーが修復できそうになく、インストール時点の既定値からやり直す場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="e0aac-266">This is useful whenever a changed policy seems to be beyond repair and you want to start over with the installation defaults.</span></span> <span data-ttu-id="e0aac-267">特定のセキュリティ構成ファイルに対する変更の開始点として既定のポリシーを使用する場合にも、リセット オプションは便利です。</span><span class="sxs-lookup"><span data-stu-id="e0aac-267">Resetting can also be convenient when you want to use the default policy as a starting point for modifications to specific security configuration files.</span></span> <span data-ttu-id="e0aac-268">詳細については、「[手動によるセキュリティ構成ファイルの編集](#cpgrfcodeaccesssecuritypolicyutilitycaspolexeanchor1)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-268">For more information, see [Manually Editing the Security Configuration Files](#cpgrfcodeaccesssecuritypolicyutilitycaspolexeanchor1).</span></span>|  
|<span data-ttu-id="e0aac-269">**-resetlockdown**</span><span class="sxs-lookup"><span data-stu-id="e0aac-269">**-resetlockdown**</span></span><br /><br /> <span data-ttu-id="e0aac-270">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-270">or</span></span><br /><br /> <span data-ttu-id="e0aac-271">**-rsld**</span><span class="sxs-lookup"><span data-stu-id="e0aac-271">**-rsld**</span></span>|<span data-ttu-id="e0aac-272">ポリシーを既定の状態のより制限されたバージョンに戻してディスクに永続化します。前のコンピューター ポリシーのバックアップを作成し、`security.config.bac` というファイルに永続化します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-272">Returns policy to a more restrictive version of the default state and persists it to disk; creates a backup of the previous machine policy and persists it to a file called `security.config.bac`.</span></span>  <span data-ttu-id="e0aac-273">ロック ダウンされているポリシーは、`Local Intranet`、`Trusted Sites`、および `Internet` の各ゾーンに属し、対応するコード グループに子コード グループがないコードにアクセスを許可しないことを除いて、既定のポリシーと同じです。</span><span class="sxs-lookup"><span data-stu-id="e0aac-273">The locked down policy is similar to the default policy, except that the policy grants no permission to code from the `Local Intranet`, `Trusted Sites`, and `Internet` zones and the corresponding code groups have no child code groups.</span></span>|  
|<span data-ttu-id="e0aac-274">**-resolvegroup** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="e0aac-274">**-resolvegroup** *assembly_file*</span></span><br /><br /> <span data-ttu-id="e0aac-275">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-275">or</span></span><br /><br /> <span data-ttu-id="e0aac-276">**-rsg**  *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="e0aac-276">**-rsg**  *assembly_file*</span></span>|<span data-ttu-id="e0aac-277">特定のアセンブリ (*assembly_file*) が属するコード グループを表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-277">Shows the code groups that a specific assembly (*assembly_file*) belongs to.</span></span> <span data-ttu-id="e0aac-278">既定では、このオプションは、アセンブリが属するコンピューター、ユーザー、エンタープライズの各ポリシー レベルを表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-278">By default, this option displays the machine, user, and enterprise policy levels to which the assembly belongs.</span></span> <span data-ttu-id="e0aac-279">1 つのポリシー レベルだけを参照するには、このオプションと共に **-machine**、**-user**、または **-enterprise** のいずれかのオプションを使用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-279">To view only one policy level, use this option with either the **-machine**, **-user**, or **-enterprise** option.</span></span>|  
|<span data-ttu-id="e0aac-280">**-resolveperm** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="e0aac-280">**-resolveperm** *assembly_file*</span></span><br /><br /> <span data-ttu-id="e0aac-281">または</span><span class="sxs-lookup"><span data-stu-id="e0aac-281">or</span></span><br /><br /> <span data-ttu-id="e0aac-282">**-rsp** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="e0aac-282">**-rsp** *assembly_file*</span></span>|<span data-ttu-id="e0aac-283">アセンブリの実行が許可されていた場合は、指定した (または既定の) レベルのセキュリティ ポリシーによってそのアセンブリに与えられるすべてのアクセス許可を表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-283">Displays all permissions that the specified (or default) level of security policy would grant the assembly if the assembly were allowed to run.</span></span> <span data-ttu-id="e0aac-284">引数 *assembly_file* はアセンブリを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-284">The *assembly_file* argument specifies the assembly.</span></span> <span data-ttu-id="e0aac-285">**-all** オプションを指定すると、Caspol.exe は、ユーザー ポリシー、コンピューター ポリシー、およびエンタープライズ ポリシーに基づいて、アセンブリに与えられるアクセス許可を計算します。それ以外の場合は、既定の動作規則が適用されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-285">If you specify the **-all** option, Caspol.exe calculates the permissions for the assembly based on user, machine, and enterprise policy; otherwise, default behavior rules apply.</span></span>|  
|<span data-ttu-id="e0aac-286">**-s****[ecurity]** {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="e0aac-286">**-s**[**ecurity**] {**on** &#124; **off**}</span></span>|<span data-ttu-id="e0aac-287">コード アクセス セキュリティのオンとオフを切り替えます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-287">Turns code access security on or off.</span></span> <span data-ttu-id="e0aac-288">**-s off** オプションを指定しても、ロール ベース セキュリティは無効になりません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-288">Specifying the **-s off** option does not disable role-based security.</span></span> <span data-ttu-id="e0aac-289">**メモ:** このスイッチは、[!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] 以降のバージョンでは削除されています。</span><span class="sxs-lookup"><span data-stu-id="e0aac-289">**Note:**  This switch is removed in the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] and later versions.</span></span> <span data-ttu-id="e0aac-290">詳細については、「[セキュリティの変更点](../../../docs/framework/security/security-changes.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-290">For more information, see [Security Changes](../../../docs/framework/security/security-changes.md).</span></span> <span data-ttu-id="e0aac-291">**注意:** コード アクセス セキュリティを無効にすると、すべてのコード アクセス要求が成功します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-291">**Caution:**  When code access security is disabled, all code access demands succeed.</span></span> <span data-ttu-id="e0aac-292">コード アクセス セキュリティを無効にすると、システムは、ウイルスやワームなどの悪意のあるコードの攻撃を受けやすくなります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-292">Disabling code access security makes the system vulnerable to attacks by malicious code such as viruses and worms.</span></span> <span data-ttu-id="e0aac-293">セキュリティをオフにすると、パフォーマンスは多少向上しますが、他のセキュリティ対策を講じて、システム セキュリティ全体が損なわれていないことを確認した場合にだけ、オフにしてください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-293">Turning off security gains some extra performance but should only be done when other security measures have been taken to help make sure overall system security is not breached.</span></span> <span data-ttu-id="e0aac-294">その他のセキュリティ対策の例としては、公衆ネットワークからの切断、コンピューターの物理的な保護などがあります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-294">Examples of other security precautions include disconnecting from public networks, physically securing computers, and so on.</span></span>|  
|<span data-ttu-id="e0aac-295">**-u****[ser]**</span><span class="sxs-lookup"><span data-stu-id="e0aac-295">**-u**[**ser**]</span></span>|<span data-ttu-id="e0aac-296">このオプションの後に続くすべてのオプションを、Caspol.exe を実行したユーザーにかかわるユーザー レベル ポリシーに適用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-296">Indicates that all options following this one apply to the user level policy for the user on whose behalf Caspol.exe is running.</span></span> <span data-ttu-id="e0aac-297">管理者以外のユーザーの場合は、**-user** が既定値です。</span><span class="sxs-lookup"><span data-stu-id="e0aac-297">For nonadministrative users, **-user** is the default.</span></span>|  
|<span data-ttu-id="e0aac-298">**-?**</span><span class="sxs-lookup"><span data-stu-id="e0aac-298">**-?**</span></span>|<span data-ttu-id="e0aac-299">Caspol.exe のコマンド構文とオプションを表示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-299">Displays command syntax and options for Caspol.exe.</span></span>|  
  
 <span data-ttu-id="e0aac-300">コード グループのメンバーシップ条件を指定する引数 *mship* は、**-addgroup** オプションおよび **-chggroup** オプションと併用できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-300">The *mship* argument, which specifies the membership condition for a code group, can be used with the **-addgroup** and **-chggroup** options.</span></span> <span data-ttu-id="e0aac-301">各引数 *mship* は .NET Framework クラスとして実装されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-301">Each *mship* argument is implemented as a .NET Framework class.</span></span> <span data-ttu-id="e0aac-302">*mship* を指定するには、次のいずれかを使用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-302">To specify *mship,* use one of the following.</span></span>  
  
|<span data-ttu-id="e0aac-303">引数</span><span class="sxs-lookup"><span data-stu-id="e0aac-303">Argument</span></span>|<span data-ttu-id="e0aac-304">説明</span><span class="sxs-lookup"><span data-stu-id="e0aac-304">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="e0aac-305">**-allcode**</span><span class="sxs-lookup"><span data-stu-id="e0aac-305">**-allcode**</span></span>|<span data-ttu-id="e0aac-306">すべてのコードを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-306">Specifies all code.</span></span> <span data-ttu-id="e0aac-307">このメンバーシップ条件の詳細については、「<xref:System.Security.Policy.AllMembershipCondition>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-307">For more information about this membership condition, see the <xref:System.Security.Policy.AllMembershipCondition>.</span></span>|  
|<span data-ttu-id="e0aac-308">**-appdir**</span><span class="sxs-lookup"><span data-stu-id="e0aac-308">**-appdir**</span></span>|<span data-ttu-id="e0aac-309">アプリケーション ディレクトリを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-309">Specifies the application directory.</span></span> <span data-ttu-id="e0aac-310">メンバーシップ条件として **–appdir** を指定する場合は、コードの URL 証拠が、そのコードのアプリケーション ディレクトリ証拠と比較されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-310">If you specify **–appdir** as the membership condition, the URL evidence of code is compared with the application directory evidence of that code.</span></span> <span data-ttu-id="e0aac-311">両方の証拠の値が同じである場合は、このメンバーシップ条件が成立します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-311">If both evidence values are the same, this membership condition is satisfied.</span></span> <span data-ttu-id="e0aac-312">このメンバーシップ条件の詳細については、「<xref:System.Security.Policy.ApplicationDirectoryMembershipCondition>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-312">For more information about this membership condition, see the <xref:System.Security.Policy.ApplicationDirectoryMembershipCondition>.</span></span>|  
|<span data-ttu-id="e0aac-313">**-custom**  *xmlfile*</span><span class="sxs-lookup"><span data-stu-id="e0aac-313">**-custom**  *xmlfile*</span></span>|<span data-ttu-id="e0aac-314">カスタム メンバーシップ条件を追加します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-314">Adds a custom membership condition.</span></span> <span data-ttu-id="e0aac-315">必須引数の *xmlfile* は、XML シリアル化したカスタム メンバーシップ条件を含む .xml ファイルを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-315">The mandatory *xmlfile* argument specifies the .xml file that contains XML serialization of the custom membership condition.</span></span>|  
|<span data-ttu-id="e0aac-316">**-hash** *hashAlg* {**-hex** *hashValue* &#124; **-file** *assembly_file*}</span><span class="sxs-lookup"><span data-stu-id="e0aac-316">**-hash** *hashAlg* {**-hex** *hashValue* &#124; **-file** *assembly_file* }</span></span>|<span data-ttu-id="e0aac-317">指定されたアセンブリ ハッシュを持つコードを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-317">Specifies code that has the given assembly hash.</span></span> <span data-ttu-id="e0aac-318">コード グループのメンバーシップ条件としてハッシュを使用するには、ハッシュ値またはアセンブリ ファイルを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-318">To use a hash as a code group membership condition, you must specify either the hash value or the assembly file.</span></span> <span data-ttu-id="e0aac-319">このメンバーシップ条件の詳細については、「<xref:System.Security.Policy.HashMembershipCondition>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-319">For more information about this membership condition, see the <xref:System.Security.Policy.HashMembershipCondition>.</span></span>|  
|<span data-ttu-id="e0aac-320">**-pub** {**-cert** *cert_file_name* &#124;</span><span class="sxs-lookup"><span data-stu-id="e0aac-320">**-pub** { **-cert** *cert_file_name* &#124;</span></span><br /><br /> <span data-ttu-id="e0aac-321">**-file** *signed_file_name* &#124; **-hex**  *hex_string*}</span><span class="sxs-lookup"><span data-stu-id="e0aac-321">**-file** *signed_file_name* &#124; **-hex**  *hex_string* }</span></span>|<span data-ttu-id="e0aac-322">指定されたソフトウェア発行者を持つコードを、証明書ファイル、ファイル上の署名、または X509 証明書の 16 進表示で指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-322">Specifies code that has the given software publisher, as denoted by a certificate file, a signature on a file, or the hexadecimal representation of an X509 certificate.</span></span> <span data-ttu-id="e0aac-323">このメンバーシップ条件の詳細については、「<xref:System.Security.Policy.PublisherMembershipCondition>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-323">For more information about this membership condition, see the <xref:System.Security.Policy.PublisherMembershipCondition>.</span></span>|  
|<span data-ttu-id="e0aac-324">**-site** *website*</span><span class="sxs-lookup"><span data-stu-id="e0aac-324">**-site** *website*</span></span>|<span data-ttu-id="e0aac-325">指定されたサイトがソースであるコードを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-325">Specifies code that has the given site of origin.</span></span> <span data-ttu-id="e0aac-326">例:</span><span class="sxs-lookup"><span data-stu-id="e0aac-326">For example:</span></span><br /><br /> <span data-ttu-id="e0aac-327">**-site** www.proseware.com</span><span class="sxs-lookup"><span data-stu-id="e0aac-327">**-site** www.proseware.com</span></span><br /><br /> <span data-ttu-id="e0aac-328">このメンバーシップ条件の詳細については、「<xref:System.Security.Policy.SiteMembershipCondition>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-328">For more information about this membership condition, see the <xref:System.Security.Policy.SiteMembershipCondition>.</span></span>|  
|<span data-ttu-id="e0aac-329">**-strong -file** *file_name* {*name* &#124; **-noname**} {*version* &#124; **-noversion**}</span><span class="sxs-lookup"><span data-stu-id="e0aac-329">**-strong -file** *file_name* {*name* &#124; **-noname**} {*version* &#124; **-noversion**}</span></span>|<span data-ttu-id="e0aac-330">特定の厳密な名前を持つコードを、ファイル名、文字列としてのアセンブリ名、および *major*.*minor*.*build*.*revision* 形式のアセンブリ バージョンで指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-330">Specifies code that has a specific strong name, as designated by the file name, the assembly name as a string, and the assembly version in the format *major*.*minor*.*build*.*revision*.</span></span> <span data-ttu-id="e0aac-331">例:</span><span class="sxs-lookup"><span data-stu-id="e0aac-331">For example:</span></span><br /><br /> <span data-ttu-id="e0aac-332">**-strong -file** myAssembly.exe myAssembly 1.2.3.4</span><span class="sxs-lookup"><span data-stu-id="e0aac-332">**-strong -file** myAssembly.exe myAssembly 1.2.3.4</span></span><br /><br /> <span data-ttu-id="e0aac-333">このメンバーシップ条件の詳細については、「<xref:System.Security.Policy.StrongNameMembershipCondition>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-333">For more information about this membership condition, see the <xref:System.Security.Policy.StrongNameMembershipCondition>.</span></span>|  
|<span data-ttu-id="e0aac-334">**-url** *URL*</span><span class="sxs-lookup"><span data-stu-id="e0aac-334">**-url** *URL*</span></span>|<span data-ttu-id="e0aac-335">指定された URL をソースとするコードを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-335">Specifies code that originates from the given URL.</span></span> <span data-ttu-id="e0aac-336">URL には、http:// や ftp:// などのプロトコルを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-336">The URL must include a protocol, such as http:// or ftp://.</span></span> <span data-ttu-id="e0aac-337">さらに、ワイルドカード文字 (\*) を使用して、特定の URL から複数のアセンブリを指定できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-337">Additionally, a wildcard character (\*) can be used to specify multiple assemblies from a particular URL.</span></span> <span data-ttu-id="e0aac-338">**メモ:** 複数の名前を使用して 1 つの URL を識別できるため、URL をメンバーシップ条件として使用する方法は、コードの識別情報を安全に確認できる方法ではありません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-338">**Note:**  Because a URL can be identified using multiple names, using a URL as a membership condition is not a safe way to ascertain the identity of code.</span></span> <span data-ttu-id="e0aac-339">できるだけ厳密な名前メンバーシップ条件、発行元メンバーシップ条件、またはハッシュ メンバーシップ条件を使用してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-339">Where possible, use a strong name membership condition, a publisher membership condition, or the hash membership condition.</span></span> <br /><br /> <span data-ttu-id="e0aac-340">このメンバーシップ条件の詳細については、「<xref:System.Security.Policy.UrlMembershipCondition>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-340">For more information about this membership condition, see the <xref:System.Security.Policy.UrlMembershipCondition>.</span></span>|  
|<span data-ttu-id="e0aac-341">**-zone** *zonename*</span><span class="sxs-lookup"><span data-stu-id="e0aac-341">**-zone** *zonename*</span></span>|<span data-ttu-id="e0aac-342">指定されたゾーンがソースであるコードを指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-342">Specifies code with the given zone of origin.</span></span> <span data-ttu-id="e0aac-343">引数 *zonename* として、**MyComputer**、**Intranet**、**Trusted**、**Internet**、または **Untrusted** のいずれかの値を指定できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-343">The *zonename* argument can be one of the following values: **MyComputer**, **Intranet**, **Trusted**, **Internet**, or **Untrusted**.</span></span> <span data-ttu-id="e0aac-344">このメンバーシップ条件の詳細については、「<xref:System.Security.Policy.ZoneMembershipCondition> クラス」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-344">For more information about this membership condition, see the <xref:System.Security.Policy.ZoneMembershipCondition> Class.</span></span>|  
  
 <span data-ttu-id="e0aac-345">**–addgroup** オプションまたは **–chggroup** オプションと併用できる引数 *flags* は、次のいずれかの方法で指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-345">The *flags* argument, which can be used with the **–addgroup** and **–chggroup** options, is specified using one of the following.</span></span>  
  
|<span data-ttu-id="e0aac-346">引数</span><span class="sxs-lookup"><span data-stu-id="e0aac-346">Argument</span></span>|<span data-ttu-id="e0aac-347">説明</span><span class="sxs-lookup"><span data-stu-id="e0aac-347">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="e0aac-348">**-description "** *description* **"**</span><span class="sxs-lookup"><span data-stu-id="e0aac-348">**-description "** *description* **"**</span></span>|<span data-ttu-id="e0aac-349">**–addgroup** オプションと共に使用した場合、追加するコード グループの説明を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-349">If used with the **–addgroup** option, specifies the description for a code group to add.</span></span> <span data-ttu-id="e0aac-350">**–chggroup** オプションと共に使用した場合、編集するコード グループの説明を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-350">If used with the **–chggroup** option, specifies the description for a code group to edit.</span></span> <span data-ttu-id="e0aac-351">引数 *description* を二重引用符で囲む必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-351">The *description* argument must be enclosed in double quotes.</span></span>|  
|<span data-ttu-id="e0aac-352">**-exclusive** {**on**&#124;**off**}</span><span class="sxs-lookup"><span data-stu-id="e0aac-352">**-exclusive** {**on**&#124;**off**}</span></span>|<span data-ttu-id="e0aac-353">**on** に設定すると、コード グループのメンバーシップ条件に適合するコードがある場合、追加または修正しているコード グループと関連付けられたアクセス許可セットだけが考慮されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-353">When set to **on**, indicates that only the permission set associated with the code group you are adding or modifying is considered when some code fits the membership condition of the code group.</span></span> <span data-ttu-id="e0aac-354">このオプションを **off** に設定すると、ポリシー レベルの中で適合するすべてのコード グループのアクセス許可セットが Caspol.exe で考慮されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-354">When this option is set to **off**, Caspol.exe considers the permission sets of all matching code groups in the policy level.</span></span>|  
|<span data-ttu-id="e0aac-355">**-levelfinal** {**on**&#124;**off**}</span><span class="sxs-lookup"><span data-stu-id="e0aac-355">**-levelfinal** {**on**&#124;**off**}</span></span>|<span data-ttu-id="e0aac-356">**on** に設定すると、追加または変更するコード グループが出現するレベルよりも下にあるポリシー レベルは考慮されなくなります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-356">When set to **on**, indicates that no policy level below the level in which the added or modified code group occurs is considered.</span></span> <span data-ttu-id="e0aac-357">通常、このオプションはコンピューター ポリシー レベルで使用されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-357">This option is typically used at the machine policy level.</span></span> <span data-ttu-id="e0aac-358">たとえば、このフラグをコンピューター レベルでコード グループに設定し、なんらかのコードがこのコード グループのメンバーシップ条件に適合した場合、Caspol.exe はそのコードのユーザー レベル ポリシーの計算または適用を行いません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-358">For example, if you set this flag for a code group at the machine level and some code matches this code group's membership condition, Caspol.exe does not calculate or apply the user level policy for this code.</span></span>|  
|<span data-ttu-id="e0aac-359">**-name "** *name* **"**</span><span class="sxs-lookup"><span data-stu-id="e0aac-359">**-name "** *name* **"**</span></span>|<span data-ttu-id="e0aac-360">**–addgroup** オプションと共に使用した場合、追加するコード グループのスクリプト名を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-360">If used with the **–addgroup** option, specifies the scripting name for a code group to add.</span></span> <span data-ttu-id="e0aac-361">**-chggroup** オプションと共に使用した場合、編集するコード グループのスクリプト名を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-361">If used with the **-chggroup** option, specifies the scripting name for a code group to edit.</span></span> <span data-ttu-id="e0aac-362">引数 *name* を二重引用符で囲む必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-362">The *name* argument must be enclosed in double quotes.</span></span> <span data-ttu-id="e0aac-363">引数 *name* には A-Z、0-9、およびアンダースコア文字だけを含めることができます。また、先頭には数字を使用できません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-363">The *name* argument cannot begin with a number, and can only contain A-Z, 0-9, and the underscore character.</span></span> <span data-ttu-id="e0aac-364">コード グループは、数値のラベルではなくこの *name* によって参照できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-364">Code groups can be referred to by this *name* instead of by their numeric label.</span></span> <span data-ttu-id="e0aac-365">*name* は、スクリプト目的で使用する場合にも便利です。</span><span class="sxs-lookup"><span data-stu-id="e0aac-365">The *name* is also highly useful for scripting purposes.</span></span>|  
  
## <a name="remarks"></a><span data-ttu-id="e0aac-366">コメント</span><span class="sxs-lookup"><span data-stu-id="e0aac-366">Remarks</span></span>  
 <span data-ttu-id="e0aac-367">セキュリティ ポリシーは 3 種類のポリシー レベル、つまりコンピューター ポリシー、ユーザー ポリシー、エンタープライズ ポリシーによって表現されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-367">Security policy is expressed using three policy levels: machine policy, user policy, and enterprise policy.</span></span> <span data-ttu-id="e0aac-368">アセンブリが受信するアクセス許可のセットは、これらの 3 種類のポリシー レベルで許可されるアクセス許可セットの積集合によって決定されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-368">The set of permissions that an assembly receives is determined by the intersection of the permission sets allowed by these three policy levels.</span></span> <span data-ttu-id="e0aac-369">それぞれのポリシー レベルは、コード グループの階層で表現されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-369">Each policy level is represented by a hierarchical structure of code groups.</span></span> <span data-ttu-id="e0aac-370">すべてのコード グループは、どのコードをそのグループのメンバーとするのかを決定するためのメンバーシップ条件を持ちます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-370">Every code group has a membership condition that determines which code is a member of that group.</span></span> <span data-ttu-id="e0aac-371">名前付きアクセス許可セットも、各コード グループと関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-371">A named permission set is also associated with each code group.</span></span> <span data-ttu-id="e0aac-372">このアクセス許可セットは、メンバーシップ条件を満たすコードに対してランタイムから与えられるアクセス許可を指定します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-372">This permission set specifies the permissions the runtime allows code that satisfies the membership condition to have.</span></span> <span data-ttu-id="e0aac-373">コード グループの階層、および関連する名前付きアクセス許可セットによって、各レベルのセキュリティ ポリシーの定義と保守が行われます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-373">A code group hierarchy, along with its associated named permission sets, defines and maintains each level of security policy.</span></span> <span data-ttu-id="e0aac-374">**–user**、**-customuser**、**–machine**、**-enterprise** の各オプションを使用して、セキュリティ ポリシーのレベルを設定できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-374">You can use the**–user**, **-customuser**, **–machine** and **-enterprise** options to set the level of security policy.</span></span>  
  
 <span data-ttu-id="e0aac-375">セキュリティ ポリシーの詳細、およびランタイムがコードに与えるアクセス許可を決定する方法については、「[セキュリティ ポリシーの管理](http://msdn.microsoft.com/en-us/d754e05d-29dc-4d3a-a2c2-95eaaf1b82b9)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0aac-375">For more information about security policy and how the runtime determines which permissions to grant to code, see [Security Policy Management](http://msdn.microsoft.com/en-us/d754e05d-29dc-4d3a-a2c2-95eaaf1b82b9).</span></span>  
  
## <a name="referencing-code-groups-and-permission-sets"></a><span data-ttu-id="e0aac-376">コード グループとアクセス許可セットの参照</span><span class="sxs-lookup"><span data-stu-id="e0aac-376">Referencing Code Groups and Permission Sets</span></span>  
 <span data-ttu-id="e0aac-377">**-list** オプションを使用すると、階層に属するコード グループを簡単に参照できるように、インデントされたコード グループの一覧とその数値ラベル (1、1.1、1.1.1 など) が表示されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-377">To facilitate references to code groups in a hierarchy, the **-list** option displays an indented list of code groups along with their numerical labels (1, 1.1, 1.1.1, and so on).</span></span> <span data-ttu-id="e0aac-378">コード グループを対象とするその他のコマンド ライン操作でも、特定のコード グループを参照するために数値ラベルが使用されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-378">The other command-line operations that target code groups also use the numerical labels to refer to specific code groups.</span></span>  
  
 <span data-ttu-id="e0aac-379">名前付きアクセス許可セットを参照する場合は、名前を使用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-379">Named permission sets are referenced by their names.</span></span> <span data-ttu-id="e0aac-380">**–list** オプションでは、最初にコード グループの一覧、次にそのポリシーの中で利用できる名前付きアクセス許可セットの一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-380">The **–list** option displays the list of code groups followed by a list of named permission sets available in that policy.</span></span>  
  
## <a name="caspolexe-behavior"></a><span data-ttu-id="e0aac-381">Caspol.exe の動作</span><span class="sxs-lookup"><span data-stu-id="e0aac-381">Caspol.exe Behavior</span></span>  
 <span data-ttu-id="e0aac-382">**-s****[ecurity]** {**on** &#124; **off**} を除くすべてのオプションが、Caspol.exe と共にインストールされたバージョンの .NET Framework を使用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-382">All options except **-s**[**ecurity**] {**on** &#124; **off**} use the version of the .NET Framework that Caspol.exe was installed with.</span></span> <span data-ttu-id="e0aac-383">あるバージョンのランタイムと共にインストールされた Caspol.exe を実行する場合、変更内容はそのバージョンだけに適用されます*。*</span><span class="sxs-lookup"><span data-stu-id="e0aac-383">If you run the Caspol.exe that was installed with version *X* of the runtime, the changes apply only to that version.</span></span> <span data-ttu-id="e0aac-384">その他のランタイムが共存する場合、それらのランタイムは影響を受けません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-384">Other side-by-side installations of the runtime, if any, are not affected.</span></span> <span data-ttu-id="e0aac-385">特定のランタイム バージョンのディレクトリに切り替えずに Caspol.exe をコマンド ラインで実行する場合、Caspol.exe はパスに含まれる最初のランタイム バージョン (通常は最後にインストールされたランタイム バージョン) のディレクトリから実行されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-385">If you run Caspol.exe from the command line without being in a directory for a specific runtime version, the tool is executed from the first runtime version directory in the path (usually the most recent runtime version installed).</span></span>  
  
 <span data-ttu-id="e0aac-386">**-s****[ecurity]** {**on** &#124; **off**} オプションは、コンピューター全体に対する操作です。</span><span class="sxs-lookup"><span data-stu-id="e0aac-386">The **-s**[**ecurity**] {**on** &#124; **off**} option is a computer-wide operation.</span></span> <span data-ttu-id="e0aac-387">コード アクセス セキュリティをオフにすると、すべてのマネージ コードおよびコンピューター上のすべてのユーザーに対するセキュリティ チェックが中止されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-387">Turning off code access security terminates security checks for all managed code and for all users on the computer.</span></span> <span data-ttu-id="e0aac-388">side-by-side 実行バージョンの .NET Framework がインストールされている場合は、このコマンドによってコンピューターにインストールされているすべてのバージョンのセキュリティがオフになります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-388">If side-by-side versions of the .NET Framework are installed, this command turns off security for every version installed on the computer.</span></span> <span data-ttu-id="e0aac-389">**-list** オプションを使用するとセキュリティがオフになっていることが示されますが、他のユーザーに対してセキュリティがオフになっていることが明確に示されることはありません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-389">Although the **-list** option shows that security is turned off, nothing else clearly indicates for other users that security has been turned off.</span></span>  
  
 <span data-ttu-id="e0aac-390">管理者の権限を持たないユーザーが Caspol.exe を実行する場合、**–machine** オプションが指定されていない限り、すべてのオプションはユーザー レベル ポリシーを参照します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-390">When a user without administrative rights runs Caspol.exe, all options refer to the user level policy unless the **–machine** option is specified.</span></span> <span data-ttu-id="e0aac-391">管理者が Caspol.exe を実行する場合、**–user** オプションが指定されていない限り、すべてのオプションはコンピューター ポリシーを参照します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-391">When an administrator runs Caspol.exe, all options refer to the machine policy unless the **–user** option is specified.</span></span>  
  
 <span data-ttu-id="e0aac-392">Caspol.exe が正しく機能するには、**Everything** アクセス許可セットと等価の許可を与えられている必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-392">Caspol.exe must be granted the equivalent of the **Everything** permission set to function.</span></span> <span data-ttu-id="e0aac-393">Caspol.exe には防御機構があるため、Caspol.exe が動作するために必要なアクセス許可を得られなくなるような方法でポリシーを変更することはできません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-393">The tool has a protective mechanism that prevents policy from being modified in ways that would prevent Caspol.exe from being granted the permissions it needs to run.</span></span> <span data-ttu-id="e0aac-394">変更を実行しようとすると、Caspol.exe は、要求されたポリシーの変更で Caspol.exe の実行が中断されること、およびポリシーの変更が拒否されることをユーザーに通知します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-394">If you try to make such changes, Caspol.exe notifies you that the requested policy change will break the tool, and the policy change is rejected.</span></span> <span data-ttu-id="e0aac-395">特定のコマンドについてこの防御機構をオフにするには、**–force** オプションを使用します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-395">You can turn this protective mechanism off for a given command by using the **–force** option.</span></span>  
  
<a name="cpgrfcodeaccesssecuritypolicyutilitycaspolexeanchor1"></a>   
## <a name="manually-editing-the-security-configuration-files"></a><span data-ttu-id="e0aac-396">手動によるセキュリティ構成ファイルの編集</span><span class="sxs-lookup"><span data-stu-id="e0aac-396">Manually Editing the Security Configuration Files</span></span>  
 <span data-ttu-id="e0aac-397">3 種類のセキュリティ構成ファイルは、Caspol.exe でサポートされる 3 種類のポリシー レベル、つまりコンピューター ポリシー、指定されたユーザーのポリシー、およびエンタープライズ ポリシーと対応します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-397">Three security configuration files correspond to the three policy levels supported by Caspol.exe: one for the machine policy, one for a given user's policy, and one for the enterprise policy.</span></span> <span data-ttu-id="e0aac-398">これらのファイルがディスク上に作成されるのは、コンピューター ポリシー、ユーザー ポリシー、またはエンタープライズ ポリシーが Caspol.exe によって変更される場合だけです。</span><span class="sxs-lookup"><span data-stu-id="e0aac-398">These files are created on disk only when machine, user, or enterprise policy is changed using Caspol.exe.</span></span> <span data-ttu-id="e0aac-399">必要な場合は、Caspol.exe の **–reset** オプションを使用して、既定のセキュリティ ポリシーをディスクに保存できます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-399">You can use the **–reset** option in Caspol.exe to save the default security policy to disk, if needed.</span></span>  
  
 <span data-ttu-id="e0aac-400">ほとんどの場合、手動によるセキュリティ構成ファイルの編集はお勧めしません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-400">In most cases, manually editing the security configuration files is not recommended.</span></span> <span data-ttu-id="e0aac-401">ただし、これらのファイルを変更する必要が生じることもあります。たとえば、管理者が特定のユーザーについてセキュリティ設定を編集する場合などです。</span><span class="sxs-lookup"><span data-stu-id="e0aac-401">But there might be scenarios in which modifying these files becomes necessary, such as when an administrator wants to edit the security configuration for a particular user.</span></span>  
  
## <a name="examples"></a><span data-ttu-id="e0aac-402">使用例</span><span class="sxs-lookup"><span data-stu-id="e0aac-402">Examples</span></span>  
 <span data-ttu-id="e0aac-403">**-addfulltrust**</span><span class="sxs-lookup"><span data-stu-id="e0aac-403">**-addfulltrust**</span></span>  
  
 <span data-ttu-id="e0aac-404">カスタム アクセス許可を含むアクセス許可セットがコンピューター ポリシーに追加されたものと見なします。</span><span class="sxs-lookup"><span data-stu-id="e0aac-404">Assume that a permission set containing a custom permission has been added to machine policy.</span></span> <span data-ttu-id="e0aac-405">このカスタム アクセス許可は、`MyPerm.exe` と、`MyPerm.exe` の `MyOther.exe` 参照クラスに実装されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-405">This custom permission is implemented in `MyPerm.exe`, and `MyPerm.exe` references classes in `MyOther.exe`.</span></span> <span data-ttu-id="e0aac-406">両方のアセンブリとも、完全信頼アセンブリ一覧に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-406">Both assemblies must be added to the full trust assembly list.</span></span> <span data-ttu-id="e0aac-407">`MyPerm.exe` アセンブリをコンピューター ポリシーの完全信頼一覧に追加するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-407">The following command adds the `MyPerm.exe` assembly to the full trust list for the machine policy.</span></span>  
  
```  
caspol -machine -addfulltrust MyPerm.exe  
```  
  
 <span data-ttu-id="e0aac-408">`MyOther.exe` アセンブリをコンピューター ポリシーの完全信頼一覧に追加するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-408">The following command adds the `MyOther.exe` assembly to the full trust list for the machine policy.</span></span>  
  
```  
caspol -machine -addfulltrust MyOther.exe  
```  
  
 <span data-ttu-id="e0aac-409">**-addgroup**</span><span class="sxs-lookup"><span data-stu-id="e0aac-409">**-addgroup**</span></span>  
  
 <span data-ttu-id="e0aac-410">子コード グループをコンピューター ポリシー コード グループ階層のルートに追加するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-410">The following command adds a child code group to the root of the machine policy code group hierarchy.</span></span> <span data-ttu-id="e0aac-411">新しいコード グループは **Internet** ゾーンのメンバーであり、**Execution** アクセス許可セットと関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-411">The new code group is a member of the **Internet** zone and is associated with the **Execution** permission set.</span></span>  
  
```  
caspol -machine -addgroup 1.  -zone Internet Execution  
```  
  
 <span data-ttu-id="e0aac-412">共有 \\\netserver\netshare にローカル イントラネット アクセス許可を与える子コード グループを追加するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-412">The following command adds a child code group that gives the share \\\netserver\netshare local intranet permissions.</span></span>  
  
```  
caspol -machine -addgroup 1. -url \\netserver\netshare\* LocalIntranet  
```  
  
 <span data-ttu-id="e0aac-413">**-addpset**</span><span class="sxs-lookup"><span data-stu-id="e0aac-413">**-addpset**</span></span>  
  
 <span data-ttu-id="e0aac-414">`Mypset` アクセス許可セットをユーザー ポリシーに追加するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-414">The following command adds the `Mypset` permission set to the user policy.</span></span>  
  
```  
caspol -user -addpset Mypset.xml Mypset  
```  
  
 <span data-ttu-id="e0aac-415">**-chggroup**</span><span class="sxs-lookup"><span data-stu-id="e0aac-415">**-chggroup**</span></span>  
  
 <span data-ttu-id="e0aac-416">1.2 というラベルの付いたコード グループのユーザー ポリシーに含まれるアクセス許可セットを、</span><span class="sxs-lookup"><span data-stu-id="e0aac-416">The following command changes the permission set in the user policy of the code group labeled 1.2.</span></span> <span data-ttu-id="e0aac-417">**Execution** アクセス許可セットに変更するコマンドを、次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-417">to the **Execution** permission set.</span></span>  
  
```  
caspol -user -chggroup 1.2. Execution  
```  
  
 <span data-ttu-id="e0aac-418">1.2.1 というラベルの付いたコード グループの既定のポリシーに含まれるメンバーシップ条件を変更し、</span><span class="sxs-lookup"><span data-stu-id="e0aac-418">The following command changes the membership condition in the default policy of the code group labeled 1.2.1.</span></span> <span data-ttu-id="e0aac-419">**exclusive**フラグの設定を変更するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-419">and changes the setting of the **exclusive** flag.</span></span> <span data-ttu-id="e0aac-420">メンバーシップ条件は、**Internet** ゾーンをソースとするコードとなるように定義され、**exclusive** フラグはオンになります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-420">The membership condition is defined to be code that originates from the **Internet** zone and the **exclusive** flag is switched on.</span></span>  
  
```  
caspol -chggroup 1.2.1. -zone Internet -exclusive on  
```  
  
 <span data-ttu-id="e0aac-421">**-chgpset**</span><span class="sxs-lookup"><span data-stu-id="e0aac-421">**-chgpset**</span></span>  
  
 <span data-ttu-id="e0aac-422">`Mypset` という名前のアクセス許可セットを `newpset.xml` に含まれるアクセス許可セットに変更するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-422">The following command changes the permission set with name `Mypset` to the permission set contained in `newpset.xml`.</span></span> <span data-ttu-id="e0aac-423">現在のリリースでは、コード グループ階層で使用されているアクセス許可の変更はサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="e0aac-423">Note that the current release does not support changing permission sets that are being used by the code group hierarchy.</span></span>  
  
```  
caspol -chgpset Mypset newpset.xml  
```  
  
 <span data-ttu-id="e0aac-424">**-force**</span><span class="sxs-lookup"><span data-stu-id="e0aac-424">**-force**</span></span>  
  
 <span data-ttu-id="e0aac-425">ユーザー ポリシーのルート コード グループ (ラベル 1) を名前付きアクセス許可セット **Nothing** と関連付けるコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-425">The following command causes the user policy's root code group (labeled 1) to be associated with the **Nothing** named permission set.</span></span> <span data-ttu-id="e0aac-426">このコマンドにより Caspol.exe は動作できなくなります。</span><span class="sxs-lookup"><span data-stu-id="e0aac-426">This prevents Caspol.exe from running.</span></span>  
  
```  
caspol -force -user -chggroup 1 Nothing  
```  
  
 <span data-ttu-id="e0aac-427">**-recover**</span><span class="sxs-lookup"><span data-stu-id="e0aac-427">**-recover**</span></span>  
  
 <span data-ttu-id="e0aac-428">最後に保存されたコンピューター ポリシーを復元するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-428">The following command recovers the most recently saved machine policy.</span></span>  
  
```  
caspol -machine -recover  
```  
  
 <span data-ttu-id="e0aac-429">**-remgroup**</span><span class="sxs-lookup"><span data-stu-id="e0aac-429">**-remgroup**</span></span>  
  
 <span data-ttu-id="e0aac-430">1.1 というラベルの付いたコード グループを削除するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-430">The following command removes the code group labeled 1.1.</span></span> <span data-ttu-id="e0aac-431">このコード グループが子コード グループを持つ場合は、子グループも削除されます。</span><span class="sxs-lookup"><span data-stu-id="e0aac-431">If this code group has any child code groups, those groups are also deleted.</span></span>  
  
```  
caspol -remgroup 1.1.  
```  
  
 <span data-ttu-id="e0aac-432">**-rempset**</span><span class="sxs-lookup"><span data-stu-id="e0aac-432">**-rempset**</span></span>  
  
 <span data-ttu-id="e0aac-433">ユーザー ポリシーから **Execution** アクセス許可セットを削除するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-433">The following command removes the **Execution** permission set from the user policy.</span></span>  
  
```  
caspol -user -rempset Execution  
```  
  
 <span data-ttu-id="e0aac-434">`Mypset` をユーザー ポリシー レベルから削除するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-434">The following command removes `Mypset` from the user policy level.</span></span>  
  
```  
caspol -rempset MyPset  
```  
  
 <span data-ttu-id="e0aac-435">**-resolvegroup**</span><span class="sxs-lookup"><span data-stu-id="e0aac-435">**-resolvegroup**</span></span>  
  
 <span data-ttu-id="e0aac-436">`myassembly` が所属するコンピューター ポリシーのすべてのコード グループを表示するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-436">The following command shows all code groups of the machine policy that `myassembly` belongs to.</span></span>  
  
```  
caspol -machine -resolvegroup myassembly  
```  
  
 <span data-ttu-id="e0aac-437">`myassembly` が所属するコンピューター ポリシー、エンタープライズ ポリシー、および指定されたカスタム ユーザー ポリシーのすべてのコード グループを表示するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-437">The following command shows all code groups of the machine, enterprise, and specified custom user policy that `myassembly` belongs to.</span></span>  
  
```  
caspol -customall "c:\config_test\security.config" -resolvegroup myassembly  
```  
  
 <span data-ttu-id="e0aac-438">**-resolveperm**</span><span class="sxs-lookup"><span data-stu-id="e0aac-438">**-resolveperm**</span></span>  
  
 <span data-ttu-id="e0aac-439">コンピューター ポリシー レベルとユーザー ポリシー レベルに基づいて `testassembly` のアクセス許可を計算するコマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e0aac-439">The following command calculates the permissions for `testassembly` based on the machine and user policy levels.</span></span>  
  
```  
caspol -all -resolveperm testassembly  
```  
  
## <a name="see-also"></a><span data-ttu-id="e0aac-440">参照</span><span class="sxs-lookup"><span data-stu-id="e0aac-440">See Also</span></span>  
 [<span data-ttu-id="e0aac-441">ツール</span><span class="sxs-lookup"><span data-stu-id="e0aac-441">Tools</span></span>](../../../docs/framework/tools/index.md)  
 [<span data-ttu-id="e0aac-442">Visual Studio 用開発者コマンド プロンプト</span><span class="sxs-lookup"><span data-stu-id="e0aac-442">Command Prompts</span></span>](../../../docs/framework/tools/developer-command-prompt-for-vs.md)
