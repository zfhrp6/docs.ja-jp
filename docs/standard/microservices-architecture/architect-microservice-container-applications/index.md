---
title: "コンテナーとマイクロサービス ベースのアプリケーションの設計"
description: ".NET マイクロサービス: コンテナー化された .NET アプリケーションのアーキテクチャ | コンテナーとマイクロサービス ベースのアプリケーションの設計"
keywords: "Docker, マイクロサービス, ASP.NET, コンテナー"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 246605b301f6bcea4cced2cb7d1c494e9f66aa4a
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/22/2017
---
# <a name="architecting-container--and-microservice-based-applications"></a>コンテナーとマイクロサービス ベースのアプリケーションの設計

*マイクロサービスは大きな利点がありますが、大きな新しい課題を発生させます。マイクロ サービス アーキテクチャ パターンは、マイクロサービス ベースのアプリケーションを作成するときの基本的な柱です。*

このガイドの前半では、コンテナーと Docker の基本的な概念を学習しました。 これはコンテナーの使用を開始するために必要な最小限の情報です。 コンテナーがマイクロサービスの実現要素であり、マイクロサービスに最適な場合であっても、マイクロサービス アーキテクチャに必須ではなく、このアーキテクチャ セクションの多くのアーキテクチャの概念はコンテナーなしでも適用できます。 ただし、このガイドでは、既に導入されたコンテナーの重要性のための、両方の共通部分に焦点を当てます。

エンタープライズ アプリケーションでは、複雑になることがあり、多くの場合 1 つのサービス ベースのアプリケーションではなく、複数のサービスで構成されます。 このような場合、マイクロサービス、特定のドメイン駆動型設計 (DDD) パターン、コンテナー オーケストレーションの概念など、追加のアーキテクチャの手法を理解する必要があります。 この章では、コンテナー上のマイクロサービスだけでなく、コンテナー化されたアプリケーションについても説明することに注意してください。

## <a name="container-design-principles"></a>コンテナー設計の原則

コンテナー モデルでは、コンテナー イメージのインスタンスは 1 つのプロセスを表します。 コンテナー イメージのプロセス境界として定義すると、プロセスの拡張やバッチ処理に使用できるプリミティブを作成できます。

コンテナー イメージをデザインするときには、[ENTRYPOINT](https://docs.docker.com/engine/reference/builder/) 定義が Dockerfile に表示されます。 これで定義するプロセスの有効期間が、コンテナーの有効期間を制御します。 プロセスが完了すると、コンテナーのライフサイクルが終了します。 コンテナーは、Web サーバーなどの実行時間の長いプロセスを表す場合がありますが、以前は Azure の [WebJobs](https://docs.microsoft.com/azure/app-service-web/websites-webjobs-resources) として実装される場合があったバッチ ジョブなどの有効期間が短いプロセスも表すことができます。

プロセスが失敗した場合、コンテナーが終了し、Orchestrator が引き継ぎます。 Orchestrator が 5 つのインスタンスの実行を維持するように構成され、1 つが失敗した場合、Orchestrator は、失敗したプロセスを置換する別のコンテナー インスタンスを作成します。 バッチ ジョブで、プロセスはパラメーターを指定して開始されます。 プロセスが完了すると、作業が完了します。 このガイダンスでは、後でオーケストレーターについてドリル ダウンします。

1 つのコンテナーで複数のプロセスが実行されているシナリオが見られる場合があります。 このシナリオでは、コンテナーごとに 1 つのエントリ ポイントのみが存在できるため、必要な数のプログラムを起動するスクリプトをコンテナー内で実行できます。 たとえば、[スーパーバイザー](http://supervisord.org/)または同様のツールを使用して、1 つのコンテナー内で複数のプロセスの起動を処理できます。 ただし、コンテナーごとに複数のプロセスを保持するアーキテクチャが見られる場合でも、その方法はあまり一般的ではありません。


>[!div class="step-by-step"]
[Previous] (../net-core-net-framework-containers/official-net-docker-images.md) [Next] (containerize-monolithic-applications.md)
