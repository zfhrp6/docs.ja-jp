### <a name="horizontal-scrolling-and-virtualization"></a><span data-ttu-id="290db-101">水平方向スクロールと仮想化</span><span class="sxs-lookup"><span data-stu-id="290db-101">Horizontal scrolling and virtualization</span></span>

|   |   |
|---|---|
|<span data-ttu-id="290db-102">説明</span><span class="sxs-lookup"><span data-stu-id="290db-102">Details</span></span>|<span data-ttu-id="290db-103">この変更は、メインのスクロール方向と直交する方向で独自に仮想化を行う <xref:System.Windows.Controls.ItemsControl?displayProperty=name> に適用されます (代表的な例は、EnableColumnVirtualization=&quot;True&quot; である <xref:System.Windows.Controls.DataGrid?displayProperty=name> です)。</span><span class="sxs-lookup"><span data-stu-id="290db-103">This change applies to an <xref:System.Windows.Controls.ItemsControl?displayProperty=name> that does its own virtualization in the direction orthogonal to the main scrolling direction (the chief example is <xref:System.Windows.Controls.DataGrid?displayProperty=name> with EnableColumnVirtualization=&quot;True&quot;).</span></span>  <span data-ttu-id="290db-104">特定の水平方向スクロール操作の結果が変更され、比較可能な垂直操作の結果により類似した、より直感的な結果が生成されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="290db-104">The outcome of certain horizontal scrolling operations has been changed to produce results that are more intuitive and more analogous to the results of comparable vertical operations.</span></span><p/><span data-ttu-id="290db-105">操作には &quot;ここにスクロール&quot; や &quot;右端&quot; などがあり、水平スクロール バーを右クリックすると表示されるメニューから名前を使用することができます。</span><span class="sxs-lookup"><span data-stu-id="290db-105">The operations include &quot;Scroll Here&quot; and &quot;Right Edge&quot;, to use the names from the menu obtained by right-clicking a horizontal scrollbar.</span></span>  <span data-ttu-id="290db-106">これらの両方でオフセット候補が計算され、<xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)> が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="290db-106">Both of these compute a candidate offset and call <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>.</span></span><p/><span data-ttu-id="290db-107">新しいオフセットにスクロールすると、&quot;ここ&quot; または &quot;右端&quot; の概念が変更されている場合があります。これは、新しく非仮想化されたコンテンツで <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> の値が変更されたためです。</span><span class="sxs-lookup"><span data-stu-id="290db-107">After scrolling to the new offset, the notion of &quot;here&quot; or &quot;right edge&quot; may have changed because newly de-virtualized content has changed the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>.</span></span><p/><span data-ttu-id="290db-108">.NET Framework 4.6.2 より前では、もう &quot;ここ&quot; や &quot;右端&quot; にない場合でも、スクロール操作では単にオフセット候補を使用します。</span><span class="sxs-lookup"><span data-stu-id="290db-108">Prior to .NET Framework 4.6.2, the scroll operation simply uses the candidate offset, even though it may not be &quot;here&quot; or at the &quot;right edge&quot; any more.</span></span>  <span data-ttu-id="290db-109">その結果、スクロールつまみの &quot;バウンス&quot; などの効果が得られます。次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="290db-109">This results in effects like &quot;bouncing&quot; the scroll thumb, best illustrated by example.</span></span> <span data-ttu-id="290db-110">たとえば、<xref:System.Windows.Controls.DataGrid?displayProperty=name> で ExtentWidth=1000 および Width=200 であるものとします。</span><span class="sxs-lookup"><span data-stu-id="290db-110">Suppose a <xref:System.Windows.Controls.DataGrid?displayProperty=name> has ExtentWidth=1000 and Width=200.</span></span>  <span data-ttu-id="290db-111">&quot;右端&quot; へのスクロールでは、1000 - 200 = 800 という候補オフセットを使用します。</span><span class="sxs-lookup"><span data-stu-id="290db-111">A scroll to &quot;Right Edge&quot; uses candidate offset 1000 - 200 = 800.</span></span>  <span data-ttu-id="290db-112">そのオフセットへのスクロール時に、新しい列が非仮想化されます。これらの列が非常に広いため、<xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> を 2000 に変更したとします。</span><span class="sxs-lookup"><span data-stu-id="290db-112">While scrolling to that offset, new columns are de- virtualized; let's suppose they are very wide, so that the <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> changes to 2000.</span></span>  <span data-ttu-id="290db-113">スクロールは HorizontalOffset=800 で終了し、つまみはスクロールバーの中央付近 (正確には 800/2000 = 40%) に &quot;戻り&quot; ます。</span><span class="sxs-lookup"><span data-stu-id="290db-113">The scroll ends with HorizontalOffset=800, and the thumb &quot;bounces&quot; back to near the middle of the scrollbar - precisely at 800/2000 = 40%.</span></span><p/><span data-ttu-id="290db-114">変更するには、この状況が発生したら新しいオフセット候補を再計算してやり直します</span><span class="sxs-lookup"><span data-stu-id="290db-114">The change is to recompute a new candidate offset when this situation occurs, and try again.</span></span> <span data-ttu-id="290db-115">(垂直方向スクロールの動作は既にこのようになっています)。</span><span class="sxs-lookup"><span data-stu-id="290db-115">(This is how vertical scrolling works already.)</span></span> <p/><span data-ttu-id="290db-116">この変更により、エンド ユーザーにはより予測可能で直感的なエクスペリエンスが提供されるようになりますが、水平方向スクロール後の <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> の正確な値に依存するアプリに影響する可能性もあります。これは、エンド ユーザーによる呼び出しであるか、<xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)> の明示的な呼び出しであるかに関係ありません。</span><span class="sxs-lookup"><span data-stu-id="290db-116">The change produces a more predictable and intuitive experience for the end user, but it could also affect any app that depends on the exact value of <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> after a horizontal scroll, whether invoked by the end user or by an explicit call to <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>.</span></span>|
|<span data-ttu-id="290db-117">提案される解決策</span><span class="sxs-lookup"><span data-stu-id="290db-117">Suggestion</span></span>|<span data-ttu-id="290db-118"><xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> の予測値を使用するアプリを、非仮想化により <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> が変更される可能性のある水平方向スクロール後の実際の値 (および <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> の値) を取得するように変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="290db-118">An app that uses a predicted value for <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> should be changed to fetch the actual value (and the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>) after any horizontal scroll that could change <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> due to de-virtualization.</span></span>|
|<span data-ttu-id="290db-119">スコープ</span><span class="sxs-lookup"><span data-stu-id="290db-119">Scope</span></span>|<span data-ttu-id="290db-120">マイナー</span><span class="sxs-lookup"><span data-stu-id="290db-120">Minor</span></span>|
|<span data-ttu-id="290db-121">Version</span><span class="sxs-lookup"><span data-stu-id="290db-121">Version</span></span>|<span data-ttu-id="290db-122">4.6.2</span><span class="sxs-lookup"><span data-stu-id="290db-122">4.6.2</span></span>|
|<span data-ttu-id="290db-123">型</span><span class="sxs-lookup"><span data-stu-id="290db-123">Type</span></span>|<span data-ttu-id="290db-124">ランタイム</span><span class="sxs-lookup"><span data-stu-id="290db-124">Runtime</span></span>|
|<span data-ttu-id="290db-125">影響を受ける API</span><span class="sxs-lookup"><span data-stu-id="290db-125">Affected APIs</span></span>|<ul><li><xref:System.Windows.Controls.Primitives.IScrollInfo?displayProperty=nameWithType></li></ul>|

